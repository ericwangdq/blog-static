<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Eric Wangçš„åšå®¢</title>
  <icon>https://www.gravatar.com/avatar/b70e941cdbb166441dfac343b945a180</icon>
  <subtitle>Web Developer</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.v2next.com/"/>
  <updated>2019-12-27T07:59:09.536Z</updated>
  <id>https://blog.v2next.com/</id>
  
  <author>
    <name>Eric Wang</name>
    <email>wdq1103@outlook.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Kotlin React App</title>
    <link href="https://blog.v2next.com/2019/12/20/Kotlin-React-App/"/>
    <id>https://blog.v2next.com/2019/12/20/Kotlin-React-App/</id>
    <published>2019-12-20T07:51:00.000Z</published>
    <updated>2019-12-27T07:59:09.536Z</updated>
    
    <content type="html"><![CDATA[<p>Great guide for Kotlin + React: <a href="https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/01_Introduction" target="_blank" rel="noopener">https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/01_Introduction</a></p><p>Instead of using JSX, Kotlin React is using its own domain-specific language (DSL) to describe it: <a href="https://medium.com/@ralf.stuckert/getting-started-with-kotlin-react-c5f3b079a8bf" target="_blank" rel="noopener">https://medium.com/@ralf.stuckert/getting-started-with-kotlin-react-c5f3b079a8bf</a></p><a id="more"></a><h3 id="Frontend-with-Kotlin-JS"><a href="#Frontend-with-Kotlin-JS" class="headerlink" title="Frontend with Kotlin/JS"></a>Frontend with Kotlin/JS</h3><p>JetBrains create-react-kotlin-app repo: <a href="https://github.com/JetBrains/create-react-kotlin-app" target="_blank" rel="noopener">https://github.com/JetBrains/create-react-kotlin-app</a></p><p>JetBrains kotlin-react-router-dom repo: <a href="https://github.com/JetBrains/kotlin-wrappers/tree/master/kotlin-react-router-dom" target="_blank" rel="noopener">https://github.com/JetBrains/kotlin-wrappers/tree/master/kotlin-react-router-dom</a></p><p>I have create a repo, and coding here: <a href="https://github.com/ericwdq/kotlin-react-app" target="_blank" rel="noopener">https://github.com/ericwdq/kotlin-react-app</a></p><p>Add the kotlin-react-router-dom to the app, in order to integrate react-kotlin app into micro frontend container</p><ol><li>We need to add @jetbrains/kotlin-react-router-domâ€ modules to package.json by using commands</li><li>List  â€œbrowserRouterâ€ or â€œhashRouterâ€ to register the react routers</li><li>Creating navigation component like sidebar for routing, and expose the paths to container</li></ol><p>Can reuse react components from npm : <a href="https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/07_Using_Packages_From_NPM" target="_blank" rel="noopener">https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/07_Using_Packages_From_NPM</a></p><p>â†’ but need to add types manually</p><p>â†’ can this be used to reuse fiori for react components? components we wrote in JS?</p><p>List of reusable, pre-typed projects: <a href="https://github.com/JetBrains/kotlin-wrappers" target="_blank" rel="noopener">https://github.com/JetBrains/kotlin-wrappers</a></p><p>How to add dependency into project, take fundamental-react for example</p><ol><li>We have to wrap each fundamental control/component, because fundamental index donâ€™t have a default export. And each file will export a single component, which will be a huge workload as fundamental react has many components, and the content may changed.</li><li>We can package fundamental-react in a specified naming space, and export them as a common library to all projects</li><li>Use  @file:JsModule(â€œfundamental-react/Buttonâ€) to define a component, and better to add an interface ButtonProps to make it typed</li><li>Code snippet may like those</li></ol><p>Next step is how to package them into ui-framework and ui-utils template.</p><h3 id="Microfrontend-compatible-code-split"><a href="#Microfrontend-compatible-code-split" class="headerlink" title="Microfrontend compatible? code split?"></a>Microfrontend compatible? code split?</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Great guide for Kotlin + React: &lt;a href=&quot;https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/01_Introduction&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/01_Introduction&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Instead of using JSX, Kotlin React is using its own domain-specific language (DSL) to describe it: &lt;a href=&quot;https://medium.com/@ralf.stuckert/getting-started-with-kotlin-react-c5f3b079a8bf&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://medium.com/@ralf.stuckert/getting-started-with-kotlin-react-c5f3b079a8bf&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://blog.v2next.com/tags/React/"/>
    
      <category term="Kotlin" scheme="https://blog.v2next.com/tags/Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>GraphQL Apollo Server implementation</title>
    <link href="https://blog.v2next.com/2019/10/28/GraphQL-Apollo-Server-implementation/"/>
    <id>https://blog.v2next.com/2019/10/28/GraphQL-Apollo-Server-implementation/</id>
    <published>2019-10-28T08:16:52.000Z</published>
    <updated>2019-12-30T09:08:25.989Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç›®æ ‡æ˜¯é‡‡ç”¨ä¸€ä¸ª GraphQL åº“ï¼Œèƒ½å¤Ÿä½¿ç”¨è¾ƒå°çš„ payload è°ƒç”¨åç«¯æŸ¥è¯¢çš„ APIï¼Œå‡å°‘ HTTP è¯·æ±‚å’Œå“åº”çš„æ—¶é—´ï¼Œä¼˜åŒ– API æ•°æ®è®¿é—®é€Ÿåº¦ã€‚</p></blockquote><p>å½“ç„¶<code>GraphQL</code>è¿˜æœ‰å¾ˆå¤šçš„ä¼˜åŠ¿ï¼Œèƒ½æ ¹æ®å®¢æˆ·ç«¯çš„æœŸæœ›æ¥è¿”å› API ç»“æ„æŒ‰éœ€è·å–ï¼ŒAPI Firstï¼Œå¼ºç±»å‹ Schemaï¼Œå¯ä»¥ç»„åˆå’Œè¿æ¥å¤šä¸ª GraphQL APIï¼Œåˆå¹¶ä¸ºä¸€ä¸ª API ç­‰ç­‰ã€‚</p><p>æˆ‘ä»¬é€‰æ‹©äº†<code>GraphQL Apollo Server</code>çš„<code>ExpressJS</code>ç‰ˆæœ¬åº“, è¿è¡Œåœ¨ <code>NodeJS</code> ç¯å¢ƒä¸­ã€‚</p><a id="more"></a><p>ä¸‹é¢æ˜¯<code>Apollo GraphQL</code>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å·¥ä½œæµç¨‹å›¾ï¼š</p><p><img src="https://www.apollographql.com/docs/apollo-server/ee7fbac9c0ca5b1dd6aef886bb695e63/index-diagram.svg" alt="alt text" title="Apollo GraphQL workflow"></p><p><a href="https://www.apollographql.com/docs/apollo-server/" target="_blank" rel="noopener">https://www.apollographql.com/docs/apollo-server/</a></p><h3 id="é…ç½®-Apollo-Server-å’Œ-ExpressJS-åœ¨-NodeJS"><a href="#é…ç½®-Apollo-Server-å’Œ-ExpressJS-åœ¨-NodeJS" class="headerlink" title="é…ç½® Apollo Server å’Œ ExpressJS åœ¨ NodeJS:"></a>é…ç½® <code>Apollo Server</code> å’Œ <code>ExpressJS</code> åœ¨ <code>NodeJS</code>:</h3><p>å®‰è£…ä¾èµ–ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add apollo-server-express graphql graphql-tools</span><br></pre></td></tr></table></figure><p>Or</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install apollo-server-express graphql graphql-tools</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-GraphQL-Schema"><a href="#åˆ›å»º-GraphQL-Schema" class="headerlink" title="åˆ›å»º GraphQL Schema"></a>åˆ›å»º <code>GraphQL Schema</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ApolloServer = <span class="keyword">new</span> ApolloServer(&#123;</span><br><span class="line">  typeDefs: Types,</span><br><span class="line">  resolvers: Resolvers,</span><br><span class="line">  playground: &#123;</span><br><span class="line">    endpoint: <span class="string">`/graphql`</span>,</span><br><span class="line">    settings: &#123;</span><br><span class="line">      <span class="string">"editor.theme"</span>: <span class="string">"light"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åˆ›å»º <code>GraphQL Apollo</code> æœåŠ¡å™¨ä½¿ç”¨åŸºæœ¬é€‰é¡¹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ApolloServer.applyMiddleware(&#123;</span><br><span class="line">  app: app, <span class="comment">// this parameter is express application</span></span><br><span class="line">  path: <span class="string">"/graphql"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-GraphQL-Query"><a href="#åˆ›å»º-GraphQL-Query" class="headerlink" title="åˆ›å»º GraphQL Query"></a>åˆ›å»º <code>GraphQL Query</code></h3><p>ä»¥è°ƒç”¨ BusinessPartner api ä¸ºä¾‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  BusinessPartner(Id: Int!): BusinessPartner</span><br><span class="line">  BusinessPartners: [BusinessPartner]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-GraphQL-Type"><a href="#åˆ›å»º-GraphQL-Type" class="headerlink" title="åˆ›å»º GraphQL Type"></a>åˆ›å»º <code>GraphQL Type</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">type BusinessPartner &#123;</span><br><span class="line">  Id: Int</span><br><span class="line">  BusinessPartner: Int</span><br><span class="line">  BusinessPartnerName: <span class="built_in">String</span></span><br><span class="line">  SearchTerm1: <span class="built_in">String</span></span><br><span class="line">  CreatedByUser: <span class="built_in">String</span></span><br><span class="line">  BusinessPartnerAddress: [BusinessPartnerAddress]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-GraphQL-Resolvers"><a href="#åˆ›å»º-GraphQL-Resolvers" class="headerlink" title="åˆ›å»º GraphQL Resolvers"></a>åˆ›å»º <code>GraphQL Resolvers</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BusinessPartner: <span class="keyword">async</span> (</span><br><span class="line">    parent: <span class="keyword">void</span>,</span><br><span class="line">    args: any,</span><br><span class="line">    info: GraphQLResolveInfo,</span><br><span class="line">    ) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> api.getBusinessPartner(args.Id);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å®Œæˆåˆ›å»ºå,è¿è¡Œ <code>yarn start</code>, ä½ å¯ä»¥è®¿é—® <a href="http://localhost:3000/graphql" target="_blank" rel="noopener">http://localhost:3000/graphql</a> å’Œæµ‹è¯•ä½ çš„ GraphQL query åœ¨ Apollo Playgound.</p><p>GraphQL æœ‰ä¸¤ç§ç±»å‹ <code>Query</code> å’Œ <code>Mutation</code>ã€‚</p><h3 id="ä¸‹é¢æ˜¯æˆ‘å­¦ä¹ æŸ¥æ‰¾ä¸€äº›æœ‰ç”¨çš„èµ„æº"><a href="#ä¸‹é¢æ˜¯æˆ‘å­¦ä¹ æŸ¥æ‰¾ä¸€äº›æœ‰ç”¨çš„èµ„æº" class="headerlink" title="ä¸‹é¢æ˜¯æˆ‘å­¦ä¹ æŸ¥æ‰¾ä¸€äº›æœ‰ç”¨çš„èµ„æº"></a>ä¸‹é¢æ˜¯æˆ‘å­¦ä¹ æŸ¥æ‰¾ä¸€äº›æœ‰ç”¨çš„èµ„æº</h3><p><a href="https://graphql.org/" target="_blank" rel="noopener">https://graphql.org/</a><br><a href="https://graphql.org/code/" target="_blank" rel="noopener">https://graphql.org/code/</a><br><a href="https://graphql.org/code/#javascript" target="_blank" rel="noopener">https://graphql.org/code/#javascript</a><br><a href="https://github.com/graphql/graphql-js/" target="_blank" rel="noopener">https://github.com/graphql/graphql-js/</a><br><a href="https://github.com/graphql/graphiql/" target="_blank" rel="noopener">https://github.com/graphql/graphiql/</a> graphiql<br><a href="https://www.apollographql.com/docs/apollo-server/" target="_blank" rel="noopener">https://www.apollographql.com/docs/apollo-server/</a></p><p>GraphQL Best Practices<br><a href="https://graphql.org/learn/best-practices/" target="_blank" rel="noopener">https://graphql.org/learn/best-practices/</a></p><p>Apollo graphql server:<br><a href="https://www.apollographql.com/docs/apollo-server/" target="_blank" rel="noopener">https://www.apollographql.com/docs/apollo-server/</a><br><a href="https://www.howtographql.com/graphql-js/8-filtering-pagination-and-sorting/" target="_blank" rel="noopener">https://www.howtographql.com/graphql-js/8-filtering-pagination-and-sorting/</a></p><p>Server:<br><a href="https://graphql.org/graphql-js/running-an-express-graphql-server/" target="_blank" rel="noopener">https://graphql.org/graphql-js/running-an-express-graphql-server/</a><br><a href="https://graphql.org/code/#javascript" target="_blank" rel="noopener">https://graphql.org/code/#javascript</a></p><p><a href="https://github.com/graphql/graphql-spec" target="_blank" rel="noopener">https://github.com/graphql/graphql-spec</a><br><a href="https://graphql.github.io/graphql-spec/June2018/" target="_blank" rel="noopener">https://graphql.github.io/graphql-spec/June2018/</a><br><a href="https://blog.apollographql.com/three-ways-to-represent-your-graphql-schema-a41f4175100d" target="_blank" rel="noopener">https://blog.apollographql.com/three-ways-to-represent-your-graphql-schema-a41f4175100d</a></p><p>Client: <a href="https://graphql.org/graphql-js/graphql-clients/" target="_blank" rel="noopener">https://graphql.org/graphql-js/graphql-clients/</a><br><a href="https://github.com/prisma/graphql-request" target="_blank" rel="noopener">https://github.com/prisma/graphql-request</a></p><p>Facebook data loader: <a href="https://github.com/graphql/dataloader" target="_blank" rel="noopener">https://github.com/graphql/dataloader</a></p><p>GraphQL API v4 Github<br><a href="https://developer.github.com/v4/" target="_blank" rel="noopener">https://developer.github.com/v4/</a></p><p>Dynamic schema and resolver generation<br><a href="https://www.contentful.com/blog/2018/12/21/dynamic-schema-generation-changing-data-models/" target="_blank" rel="noopener">https://www.contentful.com/blog/2018/12/21/dynamic-schema-generation-changing-data-models/</a><br><a href="https://blog.hasura.io/the-ultimate-guide-to-schema-stitching-in-graphql-f30178ac0072/" target="_blank" rel="noopener">https://blog.hasura.io/the-ultimate-guide-to-schema-stitching-in-graphql-f30178ac0072/</a><br><a href="https://github.com/apollographql/apollo-server/issues/2560" target="_blank" rel="noopener">https://github.com/apollographql/apollo-server/issues/2560</a></p><p><a href="https://medium.com/open-graphql/graphql-dynamic-persisted-queries-eb259700f1d3" target="_blank" rel="noopener">https://medium.com/open-graphql/graphql-dynamic-persisted-queries-eb259700f1d3</a></p><p>Modularizing your GraphQL schema code<br><a href="https://blog.apollographql.com/modularizing-your-graphql-schema-code-d7f71d5ed5f2" target="_blank" rel="noopener">https://blog.apollographql.com/modularizing-your-graphql-schema-code-d7f71d5ed5f2</a><br>æ¯ä¸ª service çš„æ•°æ®ç»“æ„å¥‘çº¦ï¼Œéƒ½æ”¾å…¥äº†ä¸€ä¸ªå¤§è€Œå…¨çš„ GraphQL Schema é‡Œï¼›å¦‚æœä¸åšä»»ä½•æ¨¡å—åŒ–å’Œè§£è€¦ï¼Œå¼€å‘ä½“éªŒå°†ä¼šéå¸¸ç³Ÿç³•ã€‚æ¯ä¸ªå›¢é˜Ÿæˆå‘˜ï¼Œéƒ½å»ä¿®æ”¹åŒä¸€ä»½ Schema æ–‡ä»¶ã€‚<br>è¿™æ˜æ˜¾æ˜¯ä¸åˆç†çš„ã€‚GraphQL-BFF çš„å¼€å‘æ¨¡å¼ï¼Œåº”è¯¥è·Ÿ service çš„é¢†åŸŸæ¨¡å‹ï¼Œæœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ç„¶åé€šè¿‡æŸç§å½¢å¼ï¼Œå¤šä¸ª services è‡ªç„¶æ•´åˆåˆ°ä¸€èµ·ã€‚</p><p>GraphQL-BFFï¼šå¾®æœåŠ¡èƒŒæ™¯ä¸‹çš„å‰åç«¯æ•°æ®äº¤äº’æ–¹æ¡ˆ<br><a href="https://zhuanlan.zhihu.com/p/75241522" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/75241522</a><br>å¼€å‘è¯­è¨€é€‰ç”¨äº† TypeScriptï¼Œè·‘åœ¨ Node.js v10.x ç‰ˆæœ¬ä¸Šï¼ŒæœåŠ¡ç«¯æ¡†æ¶æ˜¯ Koa v2.x ç‰ˆæœ¬ï¼Œä½¿ç”¨ apollo-server-koa æ¨¡å—å»è¿è¡Œ GraphQL æœåŠ¡ã€‚<br>Apollo-GraphQL æ˜¯ Node.js ç¤¾åŒºé‡Œï¼Œæ¯”è¾ƒçŸ¥åå’Œæˆç†Ÿçš„ GraphQL æ¡†æ¶ã€‚åšäº†å¾ˆå¤šçš„ç»†èŠ‚å·¥ä½œï¼Œä¹Ÿæœ‰ä¸€äº›ç›¸å¯¹å‰æ²¿çš„æ¢ç´¢ï¼Œæ¯”å¦‚ Apollo Federation æ¶æ„ç­‰ã€‚<br>ä¸è¿‡ï¼Œæœ‰ä¸¤ç‚¹å€¼å¾—ä¸€æï¼š<br>1ï¼‰Apollo-GraphQL å±äº GraphQL ç¤¾åŒºçš„ä¸€éƒ¨åˆ†ï¼Œè€Œé Facebook å®˜æ–¹çš„ GraphQL å¼€å‘å›¢é˜Ÿã€‚Apollo-GraphQL åœ¨å®˜æ–¹ GraphQL çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¸¦æœ‰ä»–ä»¬è‡ªèº«ç†å¿µç‰¹ç‚¹çš„å°è£…å’Œè®¾è®¡ã€‚åƒ Apollo Federation è¿™ç±»ç›®å‰çœ‹æ¥æ¯”è¾ƒæ¿€è¿›çš„æ–¹æ¡ˆï¼Œå³ä½¿æ˜¯ GraphQL å®˜æ–¹çš„å¼€å‘äººå‘˜ï¼Œå¯¹æ­¤ä¹ŸæŒä¿ç•™æ€åº¦ã€‚<br>2ï¼‰Apollo-GraphQL çš„é‡å¿ƒæ˜¯å‰æ–‡æ‰€è¯´çš„ç¬¬ä¸€ç±» API Gateway è§’è‰²çš„ GraphQL æœåŠ¡ï¼Œæœ¬æ–‡æ¢è®¨çš„æ˜¯ç¬¬äºŒç±»ã€‚å› æ­¤ï¼ŒApollo-GraphQL é‡Œæœ‰å¾ˆå¤šåŠŸèƒ½å¯¹æˆ‘ä»¬æ¥è¯´æ²¡å¿…è¦ï¼Œæœ‰ä¸€äº›åŠŸèƒ½çš„ä½¿ç”¨æ–¹å¼ï¼Œè·Ÿæˆ‘ä»¬çš„åœºæ™¯ä¹Ÿä¸å¥‘åˆã€‚<br>æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„æ˜¯ Apollo-GraphQL çš„ graphql-tools å’Œ apollo-server-koa ä¸¤ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†ç¬¦åˆæˆ‘ä»¬åœºæ™¯çš„è®¾è®¡å’Œæ”¹ç¼–ã€‚</p><p>Decouple schema and resovler: â€“&gt; Loosly couple æ¾è€¦åˆ<br>Merge å¤šä¸ª GraphQL-Service çš„ Schema åç”Ÿæˆçš„ç»“æœã€‚å¯ä»¥çœ‹å‡ºæ¥ï¼Œè·Ÿä¹‹å‰æ‰‹å†™çš„ç‰ˆæœ¬ï¼Œæ€»ä½“ä¸Šæ˜¯ä¸€æ ·çš„</p><p>TypeScript + GraphQL = TypeGraphQL<br><a href="https://zhuanlan.zhihu.com/p/56516614" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/56516614</a><br><a href="https://github.com/MichalLytek/type-graphql" target="_blank" rel="noopener">https://github.com/MichalLytek/type-graphql</a></p><p>GraphQL å¿«é€Ÿå…¥é—¨æ•™ç¨‹<br><a href="https://zhuanlan.zhihu.com/p/75618997" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/75618997</a><br><a href="https://github.com/MudOnTire/graphQL-tutorial" target="_blank" rel="noopener">https://github.com/MudOnTire/graphQL-tutorial</a></p><p>How to build an Apollo GraphQL server with TypeScript and Webpack Hot Module Replacement<br><a href="https://medium.com/free-code-camp/build-an-apollo-graphql-server-with-typescript-and-webpack-hot-module-replacement-hmr-3c339d05184f" target="_blank" rel="noopener">https://medium.com/free-code-camp/build-an-apollo-graphql-server-with-typescript-and-webpack-hot-module-replacement-hmr-3c339d05184f</a><br><a href="https://github.com/apollographql/apollo-server/tree/master/packages/apollo-server-express" target="_blank" rel="noopener">https://github.com/apollographql/apollo-server/tree/master/packages/apollo-server-express</a></p><p>Running an Express GraphQL Server<br><a href="https://graphql.org/graphql-js/running-an-express-graphql-server/" target="_blank" rel="noopener">https://graphql.org/graphql-js/running-an-express-graphql-server/</a><br><a href="https://graphql.org/blog/mocking-with-graphql/" target="_blank" rel="noopener">https://graphql.org/blog/mocking-with-graphql/</a><br><a href="https://graphql.org/blog/graphql-a-query-language/" target="_blank" rel="noopener">https://graphql.org/blog/graphql-a-query-language/</a><br><a href="https://graphql.org/community/" target="_blank" rel="noopener">https://graphql.org/community/</a><br><a href="https://launchpad.graphql.com/98lq7vz8r" target="_blank" rel="noopener">https://launchpad.graphql.com/98lq7vz8r</a></p><p>Cannot use graphQL server with express router<br><a href="https://github.com/apollographql/apollo-server/issues/336" target="_blank" rel="noopener">https://github.com/apollographql/apollo-server/issues/336</a></p><p>GraphQL is the better REST<br><a href="https://www.graphql.com/" target="_blank" rel="noopener">https://www.graphql.com/</a><br><a href="https://www.howtographql.com/basics/1-graphql-is-the-better-rest/" target="_blank" rel="noopener">https://www.howtographql.com/basics/1-graphql-is-the-better-rest/</a></p><p>å¦‚ä½•å°† Web ä¸»é¡µæ€§èƒ½æå‡åå€ä»¥ä¸Šï¼Ÿ<br><a href="https://www.infoq.cn/article/Xxyy8WZrWLwUlIF0*IxR" target="_blank" rel="noopener">https://www.infoq.cn/article/Xxyy8WZrWLwUlIF0*IxR</a></p><!-- GraphQL Evaluation: --><!-- https://wiki.wdf.sap.corp/wiki/display/Eureka/GraphQL+Evaluation --><!-- https://claims.np.eurekacloud.io/api/intelligent-claims/api/TenantConfig/v1/846277611134976 -->]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;ç›®æ ‡æ˜¯é‡‡ç”¨ä¸€ä¸ª GraphQL åº“ï¼Œèƒ½å¤Ÿä½¿ç”¨è¾ƒå°çš„ payload è°ƒç”¨åç«¯æŸ¥è¯¢çš„ APIï¼Œå‡å°‘ HTTP è¯·æ±‚å’Œå“åº”çš„æ—¶é—´ï¼Œä¼˜åŒ– API æ•°æ®è®¿é—®é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“ç„¶&lt;code&gt;GraphQL&lt;/code&gt;è¿˜æœ‰å¾ˆå¤šçš„ä¼˜åŠ¿ï¼Œèƒ½æ ¹æ®å®¢æˆ·ç«¯çš„æœŸæœ›æ¥è¿”å› API ç»“æ„æŒ‰éœ€è·å–ï¼ŒAPI Firstï¼Œå¼ºç±»å‹ Schemaï¼Œå¯ä»¥ç»„åˆå’Œè¿æ¥å¤šä¸ª GraphQL APIï¼Œåˆå¹¶ä¸ºä¸€ä¸ª API ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é€‰æ‹©äº†&lt;code&gt;GraphQL Apollo Server&lt;/code&gt;çš„&lt;code&gt;ExpressJS&lt;/code&gt;ç‰ˆæœ¬åº“, è¿è¡Œåœ¨ &lt;code&gt;NodeJS&lt;/code&gt; ç¯å¢ƒä¸­ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="GraphQL" scheme="https://blog.v2next.com/tags/GraphQL/"/>
    
      <category term="Apollo" scheme="https://blog.v2next.com/tags/Apollo/"/>
    
      <category term="Web API" scheme="https://blog.v2next.com/tags/Web-API/"/>
    
      <category term="NodeJs" scheme="https://blog.v2next.com/tags/NodeJs/"/>
    
      <category term="Evaluation" scheme="https://blog.v2next.com/tags/Evaluation/"/>
    
      <category term="Frontend Architecture" scheme="https://blog.v2next.com/tags/Frontend-Architecture/"/>
    
  </entry>
  
  <entry>
    <title>Micro Frontends In Action</title>
    <link href="https://blog.v2next.com/2019/08/18/Micro-Frontends-In-Action/"/>
    <id>https://blog.v2next.com/2019/08/18/Micro-Frontends-In-Action/</id>
    <published>2019-08-18T08:18:10.000Z</published>
    <updated>2019-12-27T08:12:38.748Z</updated>
    
    <content type="html"><![CDATA[<p>æ–°éƒ¨é—¨çš„å‰ç«¯é¡¹ç›®æ¶æ„ä¸­å®è·µäº†å¾®å‰ç«¯ï¼Œåé¢æœ‰æ—¶é—´å†æ•´ç†å†…å®¹ï¼Œä¸‹é¢å¼€å‘ä¸­æ”¶é›†çš„ä¸€äº›èµ„æ–™ã€‚</p><p>Micro frontends<br><a href="https://martinfowler.com/articles/micro-frontends.html" target="_blank" rel="noopener">https://martinfowler.com/articles/micro-frontends.html</a></p><p><a href="https://github.com/micro-frontends-demo" target="_blank" rel="noopener">https://github.com/micro-frontends-demo</a></p><p><a href="https://micro-frontends.org/" target="_blank" rel="noopener">https://micro-frontends.org/</a></p><a id="more"></a><p>Single SPA<br><a href="https://github.com/CanopyTax/single-spa" target="_blank" rel="noopener">https://github.com/CanopyTax/single-spa</a><br><a href="https://single-spa.js.org/" target="_blank" rel="noopener">https://single-spa.js.org/</a><br><a href="https://single-spa.surge.sh/" target="_blank" rel="noopener">https://single-spa.surge.sh/</a></p><p>Building Micro Frontends with React, Vue, and Single-spa<br><a href="https://github.com/dabit3/micro-frontend-example" target="_blank" rel="noopener">https://github.com/dabit3/micro-frontend-example</a><br><a href="https://dev.to/dabit3/building-micro-frontends-with-react-vue-and-single-spa-52op" target="_blank" rel="noopener">https://dev.to/dabit3/building-micro-frontends-with-react-vue-and-single-spa-52op</a></p><p>qiankunï¼ˆä¹¾å¤ï¼‰ï¼šAn implementation of Micro Frontends, based on single-spa, but made it production-ready.<br>ğŸ“¦ğŸš€Blazing fast, simple and completed solution for micro frontends.<br><a href="https://github.com/umijs/qiankun" target="_blank" rel="noopener">https://github.com/umijs/qiankun</a></p><p>å¯èƒ½æ˜¯ä½ è§è¿‡æœ€å®Œå–„çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆ<br><a href="https://zhuanlan.zhihu.com/p/78362028" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/78362028</a></p><p>å¾®å‰ç«¯å¦‚ä½•è½åœ°ï¼Ÿ<br><a href="https://zhuanlan.zhihu.com/p/73090920" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/73090920</a></p><p>Micro frontendsâ€”a microservice approach to front-end web development<br><a href="https://medium.com/@tomsoderlund/micro-frontends-a-microservice-approach-to-front-end-web-development-f325ebdadc16" target="_blank" rel="noopener">https://medium.com/@tomsoderlund/micro-frontends-a-microservice-approach-to-front-end-web-development-f325ebdadc16</a></p><p>typescript+nodejs æ˜¯å¦é€‚åˆå¼€å‘å¤§å‹é¡¹ç›®ï¼Ÿ<br><a href="https://www.zhihu.com/question/338345340/answer/778069075" target="_blank" rel="noopener">https://www.zhihu.com/question/338345340/answer/778069075</a></p><p>Monorepoâ€”â€”å¤§å‹å‰ç«¯é¡¹ç›®çš„ä»£ç ç®¡ç†æ–¹å¼<br><a href="https://segmentfault.com/a/1190000019309820" target="_blank" rel="noopener">https://segmentfault.com/a/1190000019309820</a></p><p>Google repo mgmt:<br><a href="https://zhuanlan.zhihu.com/p/50564255" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/50564255</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ–°éƒ¨é—¨çš„å‰ç«¯é¡¹ç›®æ¶æ„ä¸­å®è·µäº†å¾®å‰ç«¯ï¼Œåé¢æœ‰æ—¶é—´å†æ•´ç†å†…å®¹ï¼Œä¸‹é¢å¼€å‘ä¸­æ”¶é›†çš„ä¸€äº›èµ„æ–™ã€‚&lt;/p&gt;
&lt;p&gt;Micro frontends&lt;br&gt;&lt;a href=&quot;https://martinfowler.com/articles/micro-frontends.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://martinfowler.com/articles/micro-frontends.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/micro-frontends-demo&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/micro-frontends-demo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://micro-frontends.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://micro-frontends.org/&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://blog.v2next.com/tags/React/"/>
    
      <category term="Frontend Architecture" scheme="https://blog.v2next.com/tags/Frontend-Architecture/"/>
    
      <category term="Micro Frontends" scheme="https://blog.v2next.com/tags/Micro-Frontends/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Docker Compose éƒ¨ç½² NodeJS Web App</title>
    <link href="https://blog.v2next.com/2019/04/10/docker-compose-for-node-webapp/"/>
    <id>https://blog.v2next.com/2019/04/10/docker-compose-for-node-webapp/</id>
    <published>2019-04-10T06:48:38.000Z</published>
    <updated>2019-12-27T07:59:54.786Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸Šä¸€ç¯‡ Post ä½¿ç”¨äº† <a href="https://blog.v2next.com/2019/03/15/nodejs-docker-webapp/" title="Docker åŒ– Node.js çš„ Webapp">Docker åŒ– Node.js çš„ Web App</a>ï¼Œè¿™ä¸€ç¯‡ Post å°è¯•ç©ä¸‹ docker composeã€‚ğŸ˜Š</p></blockquote><p>Dockerfile å’Œ dockerignore å‰é¢å·²ç»åˆ›å»ºè¿‡ ğŸ”—<a href="https://github.com/ericwdq/atlas-app" title="atlas-app github" target="_blank" rel="noopener"><code>atlas-app</code></a></p><ul><li><strong>æ–°å»º</strong> <a href="https://github.com/ericwdq/atlas-app/docker-compose.yml" title="docker-compose.yml" target="_blank" rel="noopener"><code>docker-compose.yml</code></a></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app:</span></span><br><span class="line"><span class="attr">  build:</span> <span class="string">./</span></span><br><span class="line"><span class="attr">  volumes:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">./:/usr/src/app</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="number">8888</span><span class="string">:6075</span></span><br><span class="line"><span class="attr">  environment:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">NODE_ENV=development</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">PORT=6075</span></span><br><span class="line"><span class="attr">  command:</span> <span class="string">"npm start"</span></span><br><span class="line"><span class="attr">  restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>8888 æ˜¯å®¿ä¸»æœº IP å’Œç«¯å£ï¼Œ6075 æ˜¯è·‘åœ¨ docker é‡Œ app çš„ç«¯å£</p><ul><li><strong>æ„å»ºå’Œè¿è¡Œ</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f ./docker-compose.yml up -d</span><br></pre></td></tr></table></figure><ul><li><strong>æŸ¥çœ‹ containers å’Œå¯¹åº”çš„ logs</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;container id&gt;</span><br></pre></td></tr></table></figure><ul><li><strong>æ‰§è¡Œå®¹å™¨ä¸­ bash</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it &lt;container id&gt; /bin/bash</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><p>ğŸ”— <a href="https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/" target="_blank" rel="noopener">A Docker/docker-compose setup with Redis and Node/Express</a></p><p>ğŸ”— <a href="https://blog.codeship.com/using-docker-compose-for-nodejs-development/" target="_blank" rel="noopener">Using Docker Compose for NodeJS Development</a></p><p>ğŸ”— <a href="https://www.ddhigh.com/2017/11/01/docker-composer-nodejs.html" target="_blank" rel="noopener">ä½¿ç”¨ docker-composer éƒ¨ç½² nodejs åº”ç”¨</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;ä¸Šä¸€ç¯‡ Post ä½¿ç”¨äº† &lt;a href=&quot;https://blog.v2next.com/2019/03/15/nodejs-docker-webapp/&quot; title=&quot;Docker åŒ– Node.js çš„ Webapp&quot;&gt;Docker åŒ– Node.js çš„ Web App&lt;/a&gt;ï¼Œè¿™ä¸€ç¯‡ Post å°è¯•ç©ä¸‹ docker composeã€‚ğŸ˜Š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Dockerfile å’Œ dockerignore å‰é¢å·²ç»åˆ›å»ºè¿‡ ğŸ”—&lt;a href=&quot;https://github.com/ericwdq/atlas-app&quot; title=&quot;atlas-app github&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;atlas-app&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°å»º&lt;/strong&gt; &lt;a href=&quot;https://github.com/ericwdq/atlas-app/docker-compose.yml&quot; title=&quot;docker-compose.yml&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;docker-compose.yml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight yml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;app:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  build:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;./&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  volumes:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;./:/usr/src/app&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  ports:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;8888&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;:6075&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  environment:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;NODE_ENV=development&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;PORT=6075&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  command:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;npm start&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  restart:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;always&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="NodeJS" scheme="https://blog.v2next.com/tags/NodeJS/"/>
    
      <category term="Docker" scheme="https://blog.v2next.com/tags/Docker/"/>
    
      <category term="Web App" scheme="https://blog.v2next.com/tags/Web-App/"/>
    
      <category term="Docker Compose" scheme="https://blog.v2next.com/tags/Docker-Compose/"/>
    
  </entry>
  
  <entry>
    <title>Docker åŒ– Node.js çš„ Web App</title>
    <link href="https://blog.v2next.com/2019/03/15/nodejs-docker-webapp/"/>
    <id>https://blog.v2next.com/2019/03/15/nodejs-docker-webapp/</id>
    <published>2019-03-15T05:54:17.000Z</published>
    <updated>2019-10-20T07:59:34.696Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆé€šè¿‡<code>git clone</code>å‘½ä»¤åœ¨æœ¬åœ° clone å¥½ä¸€ä¸ª node appã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ericwdq/atlas-app.git</span><br></pre></td></tr></table></figure><p>ç„¶åå‡†å¤‡ä¸º App åˆ›å»ºä¸€ä¸ª Docker é•œåƒï¼Œæœ€åå†å°†åˆ›å»ºçš„é•œåƒè¿ä½œåœ¨ä¸€ä¸ªå®¹å™¨ä¸­ã€‚</p><p>Docker å¯ä»¥æŠŠå…·æœ‰æ‰€æœ‰ä¾èµ–å…³ç³»çš„ App æ‰“åŒ…åˆ°ä¸€ä¸ªæ ‡å‡†åŒ–å•å…ƒçš„å®¹å™¨ç”¨äºè½¯ä»¶å¼€å‘ã€‚ å®¹å™¨æ˜¯ Linux ä¸­åŸºç¡€æ¦‚å¿µï¼Œé•œåƒå°±æ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸­çš„åº”ç”¨ç¨‹åºã€‚</p><a id="more"></a><h1 id="è¿è¡Œ-App-åœ¨-Docker-ä¸Š"><a href="#è¿è¡Œ-App-åœ¨-Docker-ä¸Š" class="headerlink" title="è¿è¡Œ App åœ¨ Docker ä¸Š"></a>è¿è¡Œ App åœ¨ Docker ä¸Š</h1><ul><li><strong>åˆ›å»º Dockerfile æ–‡ä»¶åœ¨ App çš„æ ¹ç›®å½•</strong></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">FROM node:8</span><br><span class="line"></span><br><span class="line"># Create app directory</span><br><span class="line">WORKDIR /usr/src/app</span><br><span class="line"></span><br><span class="line"># Install app dependencies</span><br><span class="line"># A wildcard is used to ensure both package.json AND package-lock.json are copied</span><br><span class="line"># where available (npm@5+)</span><br><span class="line">COPY package*.json ./</span><br><span class="line"></span><br><span class="line">RUN npm install</span><br><span class="line"># If you are building your code for production</span><br><span class="line"># RUN npm ci --only=production</span><br><span class="line"></span><br><span class="line"># Bundle app source</span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line"># Expose app ports</span><br><span class="line">EXPOSE 6075</span><br><span class="line"></span><br><span class="line"># Start application</span><br><span class="line">CMD [ "npm", "start" ]</span><br></pre></td></tr></table></figure><ul><li><strong>åˆ›å»º dockerignore æ–‡ä»¶åœ¨ App çš„æ ¹ç›®å½•</strong></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">npm-debug.log</span><br></pre></td></tr></table></figure><ul><li><strong>æ„å»ºé•œåƒ</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t eric/atlas-app .</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <code>.</code> ä»£è¡¨å½“å‰ç›®å½•</p><ul><li><strong>æŸ¥çœ‹ docker é•œåƒåˆ—è¡¨</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><pre>REPOSITORY                TAG                 IMAGE ID            CREATED             SIZEeric/atlas-app   latest              d6e01bdfc655        40 minutes ago      1.24GB</pre><ul><li><strong>è¿è¡Œå®¹å™¨</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8888:6075 -d -it eric/atlas-app</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç¤ºä¾‹ï¼ŒDocker å°†æ˜ å°„å®¹å™¨ä¸­çš„ 6075 ç«¯å£åˆ° 8888 ä½ çš„æœºå™¨çš„ç«¯å£ä¸Šï¼Œæ‰€ä»¥ä½ å¯ä»¥è®¿é—® 8888 ç«¯å£å»æµ‹è¯• appã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çš„ç›¸åŒçš„ç«¯å£è½¬å‘ã€‚</p><ul><li><strong>è·å–å®¹å™¨çš„ ID</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><ul><li><strong>æ‰“å° app çš„æ—¥å¿—</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs &lt;container id&gt;</span><br></pre></td></tr></table></figure><ul><li><p><strong>æµ‹è¯•è®¿é—® app url</strong><br><a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a></p></li><li><p><strong>æ‰§è¡Œå®¹å™¨ä¸­çš„ bash</strong></p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it &lt;container id&gt; /bin/bash</span><br></pre></td></tr></table></figure><ul><li><strong>åˆ é™¤å®¹å™¨</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm --force &lt;container id&gt;</span><br></pre></td></tr></table></figure><ul><li><strong>åˆ é™¤é•œåƒ</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi Image &lt;container id&gt;</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><p>ğŸ”— <a href="https://nodejs.org/en/docs/guides/nodejs-docker-webapp/" target="_blank" rel="noopener">Dockerizing a Node.js web app</a></p><p><strong>ä¸‹ä¸€æ­¥å‡†å¤‡å°è¯•ä½¿ç”¨ docker compose å¤šå®¹å™¨æ§åˆ¶å’Œè‡ªåŠ¨åŒ–ã€‚ ğŸ˜Š</strong></p><p>ğŸ”— <a href="https://blog.codeship.com/using-docker-compose-for-nodejs-development/" target="_blank" rel="noopener">Using Docker Compose for NodeJS Development</a></p><p>ğŸ”— <a href="https://www.ddhigh.com/2017/11/01/docker-composer-nodejs.html" target="_blank" rel="noopener">ä½¿ç”¨ docker-composer éƒ¨ç½² nodejs åº”ç”¨</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¦–å…ˆé€šè¿‡&lt;code&gt;git clone&lt;/code&gt;å‘½ä»¤åœ¨æœ¬åœ° clone å¥½ä¸€ä¸ª node appã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/ericwdq/atlas-app.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶åå‡†å¤‡ä¸º App åˆ›å»ºä¸€ä¸ª Docker é•œåƒï¼Œæœ€åå†å°†åˆ›å»ºçš„é•œåƒè¿ä½œåœ¨ä¸€ä¸ªå®¹å™¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;Docker å¯ä»¥æŠŠå…·æœ‰æ‰€æœ‰ä¾èµ–å…³ç³»çš„ App æ‰“åŒ…åˆ°ä¸€ä¸ªæ ‡å‡†åŒ–å•å…ƒçš„å®¹å™¨ç”¨äºè½¯ä»¶å¼€å‘ã€‚ å®¹å™¨æ˜¯ Linux ä¸­åŸºç¡€æ¦‚å¿µï¼Œé•œåƒå°±æ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸­çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="NodeJS" scheme="https://blog.v2next.com/tags/NodeJS/"/>
    
      <category term="Docker" scheme="https://blog.v2next.com/tags/Docker/"/>
    
      <category term="Web App" scheme="https://blog.v2next.com/tags/Web-App/"/>
    
  </entry>
  
  <entry>
    <title>React Hooks with Typescript</title>
    <link href="https://blog.v2next.com/2019/02/15/react-hooks-with-ts/"/>
    <id>https://blog.v2next.com/2019/02/15/react-hooks-with-ts/</id>
    <published>2019-02-15T09:21:46.000Z</published>
    <updated>2019-10-20T07:59:34.697Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>React Hooks are a new addition in React 16.8. They let you use state and other React features without writing a class. - <em>from</em> <a href="https://reactjs.org/docs/hooks-intro.html" title="Introducing Hooks" target="_blank" rel="noopener"><code>reactjs.org</code></a></p></blockquote><h1 id="React-Hooks-with-TypeScript"><a href="#React-Hooks-with-TypeScript" class="headerlink" title="React Hooks with TypeScript"></a>React Hooks with TypeScript</h1><p>ğŸ”— <a href="https://blog.usejournal.com/using-react-hooks-with-typescript-aae6c7b2a3a9" target="_blank" rel="noopener">https://blog.usejournal.com/using-react-hooks-with-typescript-aae6c7b2a3a9</a></p><a id="more"></a><p>ğŸ”— <a href="https://react-hooks-typescript.now.sh/" target="_blank" rel="noopener">https://react-hooks-typescript.now.sh/</a></p><p>ğŸ”— <a href="https://github.com/ericwdq/react-hooks-typescript-example" target="_blank" rel="noopener">https://github.com/ericwdq/react-hooks-typescript-example</a></p><p>Code sandbox live demo:<br>ğŸ”— <a href="https://codesandbox.io/s/github/skovy/react-hooks-typescript-example" target="_blank" rel="noopener">https://codesandbox.io/s/github/skovy/react-hooks-typescript-example</a></p><p>ğŸ”— How to Use Typescript with React and Redux<br><a href="https://medium.com/@rossbulat/how-to-use-typescript-with-react-and-redux-a118b1e02b76" target="_blank" rel="noopener">https://medium.com/@rossbulat/how-to-use-typescript-with-react-and-redux-a118b1e02b76</a></p><h2 id="UseState"><a href="#UseState" class="headerlink" title="UseState"></a>UseState</h2><h2 id="UseEffect"><a href="#UseEffect" class="headerlink" title="UseEffect"></a>UseEffect</h2><h2 id="UseReducer"><a href="#UseReducer" class="headerlink" title="UseReducer"></a>UseReducer</h2><h2 id="UseContext"><a href="#UseContext" class="headerlink" title="UseContext"></a>UseContext</h2><p>Typescript:<br><a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" target="_blank" rel="noopener">https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;React Hooks are a new addition in React 16.8. They let you use state and other React features without writing a class. - &lt;em&gt;from&lt;/em&gt; &lt;a href=&quot;https://reactjs.org/docs/hooks-intro.html&quot; title=&quot;Introducing Hooks&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;reactjs.org&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;React-Hooks-with-TypeScript&quot;&gt;&lt;a href=&quot;#React-Hooks-with-TypeScript&quot; class=&quot;headerlink&quot; title=&quot;React Hooks with TypeScript&quot;&gt;&lt;/a&gt;React Hooks with TypeScript&lt;/h1&gt;&lt;p&gt;ğŸ”— &lt;a href=&quot;https://blog.usejournal.com/using-react-hooks-with-typescript-aae6c7b2a3a9&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.usejournal.com/using-react-hooks-with-typescript-aae6c7b2a3a9&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://blog.v2next.com/tags/React/"/>
    
      <category term="React Hooks" scheme="https://blog.v2next.com/tags/React-Hooks/"/>
    
      <category term="ts" scheme="https://blog.v2next.com/tags/ts/"/>
    
      <category term="Typescript" scheme="https://blog.v2next.com/tags/Typescript/"/>
    
  </entry>
  
  <entry>
    <title>React Hooks å¼€å‘ Todo List</title>
    <link href="https://blog.v2next.com/2018/12/06/react-hooks/"/>
    <id>https://blog.v2next.com/2018/12/06/react-hooks/</id>
    <published>2018-12-06T06:45:59.000Z</published>
    <updated>2019-10-20T07:59:34.697Z</updated>
    
    <content type="html"><![CDATA[<p>Introducing Hooks<br><a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener">https://reactjs.org/docs/hooks-intro.html</a></p><p>How to Build a Todo List with React Hooks<br><a href="https://medium.freecodecamp.org/how-to-build-a-todo-list-with-react-hooks-ebaa4e3db3b" target="_blank" rel="noopener">https://medium.freecodecamp.org/how-to-build-a-todo-list-with-react-hooks-ebaa4e3db3b</a></p><p><a href="https://codesandbox.io/s/github/yazeedb/react-hooks-todo" target="_blank" rel="noopener">https://codesandbox.io/s/github/yazeedb/react-hooks-todo</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Introducing Hooks&lt;br&gt;&lt;a href=&quot;https://reactjs.org/docs/hooks-intro.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://reactjs.org/docs/hooks-in
      
    
    </summary>
    
    
      <category term="React" scheme="https://blog.v2next.com/tags/React/"/>
    
      <category term="React Hooks" scheme="https://blog.v2next.com/tags/React-Hooks/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£… nvm and NodeJS åœ¨ SUSE/Linux ç¯å¢ƒ</title>
    <link href="https://blog.v2next.com/2018/12/03/install-nvm-and-nodejs-on-SUSE-Linux/"/>
    <id>https://blog.v2next.com/2018/12/03/install-nvm-and-nodejs-on-SUSE-Linux/</id>
    <published>2018-12-03T08:54:46.000Z</published>
    <updated>2019-10-20T07:59:34.696Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å…¬å¸çš„é¡¹ç›®äº§å“ server build çš„ç¯å¢ƒæ˜¯ <code>SUSE Linux</code> ï¼Œæ‰€ä»¥å‰ç«¯é¡¹ç›®æ„å»ºä½¿ç”¨çš„ NodeJS æ˜¯ linux ç‰ˆæœ¬ï¼Œç ”ç©¶äº†ä¸‹ nvm å’Œ NodeJS åœ¨ <code>SUSE</code> çš„å®‰è£…ã€‚</p></blockquote><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><ul><li>æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> lsb_release -a; uname -a; arch</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><pre>cnpvg50842594:~/.nvm/versions/node # lsb_release -a; uname -a; archLSB Version:    n/aDistributor ID: SUSE LINUXDescription:    SUSE Linux Enterprise Server 12 SP1Release:        12.1Codename:       n/aLinux cnpvg50842594 3.12.74-60.64.40-xen #1 SMP Wed May 10 05:07:16 UTC 2017 (4eb35ec) x86_64 x86_64 x86_64 GNU/Linuxx86_64</pre><ul><li>ä¸‹è½½å®‰è£… nvmï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.10/install.sh | bash</span></span><br></pre></td></tr></table></figure><a id="more"></a><ul><li>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ .nvmï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vim ~/.bashrc</span></span><br></pre></td></tr></table></figure><pre>export NVM_DIR="$HOME/.nvm"[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm</pre><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.bashrc</span></span><br></pre></td></tr></table></figure><p>nvm github å®‰è£…è„šæœ¬ï¼š<a href="https://github.com/creationix/nvm#install-script" target="_blank" rel="noopener">https://github.com/creationix/nvm#install-script</a></p><ul><li>æŸ¥çœ‹ nvm å‘½ä»¤ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">command</span> -v nvm</span></span><br></pre></td></tr></table></figure><ul><li>å®‰è£… nodejs</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> nvm install 10.14.0 [arch]</span></span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹å·²å®‰è£…çš„ nodejs åˆ—è¡¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm list</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æœ‰ä¸ª Youtobe è§†é¢‘ï¼ŒåŸºæœ¬å®‰è£…æ­¥éª¤å·®ä¸å¤šã€‚<br><a href="https://www.youtube.com/watch?v=MYXRbXabmsc" target="_blank" rel="noopener">https://www.youtube.com/watch?v=MYXRbXabmsc</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;å…¬å¸çš„é¡¹ç›®äº§å“ server build çš„ç¯å¢ƒæ˜¯ &lt;code&gt;SUSE Linux&lt;/code&gt; ï¼Œæ‰€ä»¥å‰ç«¯é¡¹ç›®æ„å»ºä½¿ç”¨çš„ NodeJS æ˜¯ linux ç‰ˆæœ¬ï¼Œç ”ç©¶äº†ä¸‹ nvm å’Œ NodeJS åœ¨ &lt;code&gt;SUSE&lt;/code&gt; çš„å®‰è£…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;å®‰è£…æ­¥éª¤&quot;&gt;&lt;a href=&quot;#å®‰è£…æ­¥éª¤&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…æ­¥éª¤&quot;&gt;&lt;/a&gt;å®‰è£…æ­¥éª¤&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; lsb_release -a; uname -a; arch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰§è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
cnpvg50842594:~/.nvm/versions/node # lsb_release -a; uname -a; arch
LSB Version:    n/a
Distributor ID: SUSE LINUX
Description:    SUSE Linux Enterprise Server 12 SP1
Release:        12.1
Codename:       n/a
Linux cnpvg50842594 3.12.74-60.64.40-xen #1 SMP Wed May 10 05:07:16 UTC 2017 (4eb35ec) x86_64 x86_64 x86_64 GNU/Linux
x86_64
&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;ä¸‹è½½å®‰è£… nvmï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.10/install.sh | bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="nvm" scheme="https://blog.v2next.com/tags/nvm/"/>
    
      <category term="NodeJS" scheme="https://blog.v2next.com/tags/NodeJS/"/>
    
      <category term="SUSE" scheme="https://blog.v2next.com/tags/SUSE/"/>
    
      <category term="Linux" scheme="https://blog.v2next.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ JSON Web Token</title>
    <link href="https://blog.v2next.com/2018/11/06/jwt-auth/"/>
    <id>https://blog.v2next.com/2018/11/06/jwt-auth/</id>
    <published>2018-11-06T02:53:26.000Z</published>
    <updated>2019-10-20T07:59:34.696Z</updated>
    
    <content type="html"><![CDATA[<p>Here are some scenarios where JSON Web Tokens are useful:</p><p>Authorization: This is the most common scenario for using JWT. Once the user is logged in, each subsequent request will include the JWT, allowing the user to access routes, services, and resources that are permitted with that token. Single Sign On is a feature that widely uses JWT nowadays, because of its small overhead and its ability to be easily used across different domains.</p><p>Information Exchange: JSON Web Tokens are a good way of securely transmitting information between parties. Because JWTs can be signedâ€”for example, using public/private key pairsâ€”you can be sure the senders are who they say they are. Additionally, as the signature is calculated using the header</p><p>[GitHub] Understanding JWT (JSON web token) authentication<br><a href="https://github.com/ericwdq/jwt-auth" target="_blank" rel="noopener">https://github.com/ericwdq/jwt-auth</a></p><p>ä¸è¦ç”¨ JWT æ›¿ä»£ session ç®¡ç†ï¼ˆä¸Šï¼‰ï¼šå…¨é¢äº†è§£ Token,JWT,OAuth,SAML,SSO<br><a href="https://zhuanlan.zhihu.com/p/38942172" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/38942172</a></p><p>jwt.io<br><a href="https://jwt.io/introduction/" target="_blank" rel="noopener">https://jwt.io/introduction/</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Here are some scenarios where JSON Web Tokens are useful:&lt;/p&gt;
&lt;p&gt;Authorization: This is the most common scenario for using JWT. Once the 
      
    
    </summary>
    
    
      <category term="JSON Web Token" scheme="https://blog.v2next.com/tags/JSON-Web-Token/"/>
    
      <category term="JWT" scheme="https://blog.v2next.com/tags/JWT/"/>
    
      <category term="auth" scheme="https://blog.v2next.com/tags/auth/"/>
    
  </entry>
  
  <entry>
    <title>You Don&#39;t Need jQuery</title>
    <link href="https://blog.v2next.com/2018/09/12/you-dont-need-jquery-cn/"/>
    <id>https://blog.v2next.com/2018/09/12/you-dont-need-jquery-cn/</id>
    <published>2018-09-12T02:36:13.000Z</published>
    <updated>2019-10-20T07:59:34.698Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ“° GitHub å·¥ç¨‹å›¢é˜Ÿå‘å¸ƒæ–‡ç«  ğŸ”—<a href="https://githubengineering.com/removing-jquery-from-github-frontend/" title="Removing jQuery from GitHub.com frontend" target="_blank" rel="noopener">Removing jQuery from GitHub.com frontend</a> å®£å¸ƒä»–ä»¬å°†é€æ¸è„±ç¦» jQueryï¼Œç›´åˆ°èƒ½å¤Ÿå®Œå…¨åˆ é™¤åº“ï¼Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ APIs å¯ä»¥æ»¡è¶³æ‰€æœ‰éœ€æ±‚ã€‚æˆ‘æ¸…æ™°çš„è®°å¾—åˆšå¼€å§‹ jQuery çš„æ—¶å€™ï¼Œä½¿å‰ç«¯å¼€å‘å·¥ä½œå˜çš„ç®€å•ï¼Œé«˜æ•ˆã€‚æ‰€ä»¥ä¸å¾—ä¸è¯´ jQuery æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„åº“ï¼Œâ¤ï¸ çºªå¿µä¸€ä¸‹ï¼Œæ„Ÿè°¢ jQueryï¼</p></blockquote><p>æˆ‘åœ¨ Github ä¸Šå‘ç°äº†è¿™ä¸ªå¾ˆå®ç”¨çš„ repoï¼ğŸ”—<a href="https://github.com/nefe/You-Dont-Need-jQuery" title="You Don&#39;t Need jQuery" target="_blank" rel="noopener">You Donâ€™t Need jQuery</a> æœ‰å¾ˆå¤šç¿»è¯‘ç‰ˆæœ¬ï¼Œä¸‹é¢æ˜¯ä¸­æ–‡ç‰ˆã€‚</p><p>å‰ç«¯å‘å±•å¾ˆå¿«ï¼Œç°ä»£æµè§ˆå™¨åŸç”Ÿ API å·²ç»è¶³å¤Ÿå¥½ç”¨ã€‚æˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸ºäº†æ“ä½œ DOMã€Event ç­‰å†å­¦ä¹ ä¸€ä¸‹ jQuery çš„ APIã€‚åŒæ—¶ç”±äº Reactã€Angularã€Vue ç­‰æ¡†æ¶çš„æµè¡Œï¼Œç›´æ¥æ“ä½œ DOM ä¸å†æ˜¯å¥½çš„æ¨¡å¼ï¼ŒjQuery ä½¿ç”¨åœºæ™¯å¤§å¤§å‡å°‘ã€‚æœ¬é¡¹ç›®æ€»ç»“äº†å¤§éƒ¨åˆ† jQuery API æ›¿ä»£çš„æ–¹æ³•ï¼Œæš‚æ—¶åªæ”¯æŒ IE10 ä»¥ä¸Šæµè§ˆå™¨ã€‚</p><a id="more"></a><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#Query-Selector">Query Selector</a></li><li><a href="#CSS-amp-Style">CSS &amp; Style</a></li><li><a href="#DOM-Manipulation">DOM Manipulation</a></li><li><a href="#Ajax">Ajax</a></li><li><a href="#Events">Events</a></li><li><a href="#Utilities">Utilities</a></li><li><a href="#Promises">Promises</a></li><li><a href="#Animation">Animation</a></li><li><a href="#alternatives">Alternatives</a></li><li><a href="#Browser-Support">Browser Support</a></li></ol><h2 id="Query-Selector"><a href="#Query-Selector" class="headerlink" title="Query Selector"></a>Query Selector</h2><p>å¸¸ç”¨çš„ classã€idã€å±æ€§ é€‰æ‹©å™¨éƒ½å¯ä»¥ä½¿ç”¨ <code>document.querySelector</code> æˆ– <code>document.querySelectorAll</code> æ›¿ä»£ã€‚åŒºåˆ«æ˜¯</p><ul><li><code>document.querySelector</code> è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ Element</li><li><code>document.querySelectorAll</code> è¿”å›æ‰€æœ‰åŒ¹é…çš„ Element ç»„æˆçš„ NodeListã€‚å®ƒå¯ä»¥é€šè¿‡ <code>[].slice.call()</code> æŠŠå®ƒè½¬æˆ Array</li><li>å¦‚æœåŒ¹é…ä¸åˆ°ä»»ä½• Elementï¼ŒjQuery è¿”å›ç©ºæ•°ç»„ <code>[]</code>ï¼Œä½† <code>document.querySelector</code> è¿”å› <code>null</code>ï¼Œæ³¨æ„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å½“æ‰¾ä¸åˆ°æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>||</code> è®¾ç½®é»˜è®¤çš„å€¼ï¼Œå¦‚ <code>document.querySelectorAll(selector) || []</code></li></ul><blockquote><p>æ³¨æ„ï¼š<code>document.querySelector</code> å’Œ <code>document.querySelectorAll</code> æ€§èƒ½å¾ˆ<strong>å·®</strong>ã€‚å¦‚æœæƒ³æé«˜æ€§èƒ½ï¼Œå°½é‡ä½¿ç”¨ <code>document.getElementById</code>ã€<code>document.getElementsByClassName</code> æˆ– <code>document.getElementsByTagName</code>ã€‚</p></blockquote><ul><li><p><a href="#1.0">1.0</a> <a name="1.0"></a> é€‰æ‹©å™¨æŸ¥è¯¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">"selector"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">"selector"</span>);</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.1">1.1</a> <a name="1.1"></a> class æŸ¥è¯¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">".class"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">".class"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">"class"</span>);</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.2">1.2</a> <a name="1.2"></a> id æŸ¥è¯¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">"#id"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#id"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"id"</span>);</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.3">1.3</a> <a name="1.3"></a> å±æ€§æŸ¥è¯¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">"a[target=_blank]"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">"a[target=_blank]"</span>);</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.4">1.4</a> <a name="1.4"></a> åä»£æŸ¥è¯¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.find(<span class="string">"li"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.querySelectorAll(<span class="string">"li"</span>);</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.5">1.5</a> <a name="1.5"></a> å…„å¼ŸåŠä¸Šä¸‹å…ƒç´ </p><ul><li><p>å…„å¼Ÿå…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.siblings();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native - latest, Edge13+</span></span><br><span class="line">[...el.parentNode.children].filter(<span class="function"><span class="params">child</span> =&gt;</span> child !== el);</span><br><span class="line"><span class="comment">// Native (alternative) - latest, Edge13+</span></span><br><span class="line"><span class="built_in">Array</span>.from(el.parentNode.children).filter(<span class="function"><span class="params">child</span> =&gt;</span> child !== el);</span><br><span class="line"><span class="comment">// Native - IE10+</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.filter.call(el.parentNode.children, child =&gt; child !== el);</span><br></pre></td></tr></table></figure></li><li><p>ä¸Šä¸€ä¸ªå…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.prev();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.previousElementSibling;</span><br></pre></td></tr></table></figure></li><li><p>ä¸‹ä¸€ä¸ªå…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// next</span></span><br><span class="line">$el.next();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.nextElementSibling;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#1.6">1.6</a> <a name="1.6"></a> Closest</p><p>Closest è·å¾—åŒ¹é…é€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªç¥–å…ˆå…ƒç´ ï¼Œä»å½“å‰å…ƒç´ å¼€å§‹æ²¿ DOM æ ‘å‘ä¸Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.closest(queryString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native - Only latest, NO IE</span></span><br><span class="line">el.closest(selector);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native - IE10+</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closest</span>(<span class="params">el, selector</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> matchesSelector =</span><br><span class="line">    el.matches ||</span><br><span class="line">    el.webkitMatchesSelector ||</span><br><span class="line">    el.mozMatchesSelector ||</span><br><span class="line">    el.msMatchesSelector;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (el) &#123;</span><br><span class="line">    <span class="keyword">if</span> (matchesSelector.call(el, selector)) &#123;</span><br><span class="line">      <span class="keyword">return</span> el;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      el = el.parentElement;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.7">1.7</a> <a name="1.7"></a> Parents Until</p><p>è·å–å½“å‰æ¯ä¸€ä¸ªåŒ¹é…å…ƒç´ é›†çš„ç¥–å…ˆï¼Œä¸åŒ…æ‹¬åŒ¹é…å…ƒç´ çš„æœ¬èº«ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.parentsUntil(selector, filter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parentsUntil</span>(<span class="params">el, selector, filter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> matchesSelector =</span><br><span class="line">    el.matches ||</span><br><span class="line">    el.webkitMatchesSelector ||</span><br><span class="line">    el.mozMatchesSelector ||</span><br><span class="line">    el.msMatchesSelector;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// match start from parent</span></span><br><span class="line">  el = el.parentElement;</span><br><span class="line">  <span class="keyword">while</span> (el &amp;&amp; !matchesSelector.call(el, selector)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!filter) &#123;</span><br><span class="line">      result.push(el);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (matchesSelector.call(el, filter)) &#123;</span><br><span class="line">        result.push(el);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    el = el.parentElement;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.8">1.8</a> <a name="1.8"></a> Form</p><ul><li><p>Input/Textarea</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">"#my-input"</span>).val();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#my-input"</span>).value;</span><br></pre></td></tr></table></figure></li><li><p>è·å– e.currentTarget åœ¨ <code>.radio</code> ä¸­çš„æ•°ç»„ç´¢å¼•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">".radio"</span>).index(e.currentTarget);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.indexOf.call(</span><br><span class="line">  <span class="built_in">document</span>.querySelectorAll(<span class="string">".radio"</span>),</span><br><span class="line">  e.currentTarget</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#1.9">1.9</a> <a name="1.9"></a> Iframe Contents</p><p>jQuery å¯¹è±¡çš„ iframe <code>contents()</code> è¿”å›çš„æ˜¯ iframe å†…çš„ <code>document</code></p><ul><li><p>Iframe contents</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$iframe.contents();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">iframe.contentDocument;</span><br></pre></td></tr></table></figure></li><li><p>Iframe Query</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$iframe.contents().find(<span class="string">".css"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">iframe.contentDocument.querySelectorAll(<span class="string">".css"</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#1.10">1.10</a> <a name="1.10"></a> è·å– body</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">"body"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">document</span>.body;</span><br></pre></td></tr></table></figure></li><li><p><a href="#1.11">1.11</a> <a name="1.11"></a> è·å–æˆ–è®¾ç½®å±æ€§</p><ul><li><p>è·å–å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.attr(<span class="string">"foo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.getAttribute(<span class="string">"foo"</span>);</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery, note that this works in memory without change the DOM</span></span><br><span class="line">$el.attr(<span class="string">"foo"</span>, <span class="string">"bar"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.setAttribute(<span class="string">"foo"</span>, <span class="string">"bar"</span>);</span><br></pre></td></tr></table></figure></li><li><p>è·å– <code>data-</code> å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.data(<span class="string">"foo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (use `getAttribute`)</span></span><br><span class="line">el.getAttribute(<span class="string">"data-foo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (use `dataset` if only need to support IE 11+)</span></span><br><span class="line">el.dataset[<span class="string">"foo"</span>];</span><br></pre></td></tr></table></figure></li></ul></li></ul><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="CSS-amp-Style"><a href="#CSS-amp-Style" class="headerlink" title="CSS &amp; Style"></a>CSS &amp; Style</h2><ul><li><p><a href="#2.1">2.1</a> <a name="2.1"></a> CSS</p><ul><li><p>Get style</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.css(<span class="string">"color"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šæ­¤å¤„ä¸ºäº†è§£å†³å½“ style å€¼ä¸º auto æ—¶ï¼Œè¿”å› auto çš„é—®é¢˜</span></span><br><span class="line"><span class="keyword">const</span> win = el.ownerDocument.defaultView;</span><br><span class="line"></span><br><span class="line"><span class="comment">// null çš„æ„æ€æ˜¯ä¸è¿”å›ä¼ªç±»å…ƒç´ </span></span><br><span class="line">win.getComputedStyle(el, <span class="literal">null</span>).color;</span><br></pre></td></tr></table></figure></li><li><p>Set style</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.css(&#123; <span class="attr">color</span>: <span class="string">"#ff0011"</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.style.color = <span class="string">"#ff0011"</span>;</span><br></pre></td></tr></table></figure></li><li><p>Get/Set Styles</p><p>æ³¨æ„ï¼Œå¦‚æœæƒ³ä¸€æ¬¡è®¾ç½®å¤šä¸ª styleï¼Œå¯ä»¥å‚è€ƒ oui-dom-utils ä¸­ <a href="https://github.com/oneuijs/oui-dom-utils/blob/master/src/index.js#L194" target="_blank" rel="noopener">setStyles</a> æ–¹æ³•</p></li><li><p>Add class</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.addClass(className);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.classList.add(className);</span><br></pre></td></tr></table></figure></li><li><p>Remove class</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.removeClass(className);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.classList.remove(className);</span><br></pre></td></tr></table></figure></li><li><p>has class</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.hasClass(className);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.classList.contains(className);</span><br></pre></td></tr></table></figure></li><li><p>Toggle class</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.toggleClass(className);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.classList.toggle(className);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#2.2">2.2</a> <a name="2.2"></a> Width &amp; Height</p><p>Width ä¸ Height è·å–æ–¹æ³•ç›¸åŒï¼Œä¸‹é¢ä»¥ Height ä¸ºä¾‹ï¼š</p><ul><li><p>Window height</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// window height</span></span><br><span class="line">$(<span class="built_in">window</span>).height();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å« scrollbar</span></span><br><span class="line"><span class="built_in">window</span>.document.documentElement.clientHeight;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å« scrollbarï¼Œä¸ jQuery è¡Œä¸ºä¸€è‡´</span></span><br><span class="line"><span class="built_in">window</span>.innerHeight;</span><br></pre></td></tr></table></figure></li><li><p>Document height</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="built_in">document</span>).height();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="keyword">const</span> body = <span class="built_in">document</span>.body;</span><br><span class="line"><span class="keyword">const</span> html = <span class="built_in">document</span>.documentElement;</span><br><span class="line"><span class="keyword">const</span> height = <span class="built_in">Math</span>.max(</span><br><span class="line">  body.offsetHeight,</span><br><span class="line">  body.scrollHeight,</span><br><span class="line">  html.clientHeight,</span><br><span class="line">  html.offsetHeight,</span><br><span class="line">  html.scrollHeight</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>Element height</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.height();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getHeight</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> styles = <span class="keyword">this</span>.getComputedStyle(el);</span><br><span class="line">  <span class="keyword">const</span> height = el.offsetHeight;</span><br><span class="line">  <span class="keyword">const</span> borderTopWidth = <span class="built_in">parseFloat</span>(styles.borderTopWidth);</span><br><span class="line">  <span class="keyword">const</span> borderBottomWidth = <span class="built_in">parseFloat</span>(styles.borderBottomWidth);</span><br><span class="line">  <span class="keyword">const</span> paddingTop = <span class="built_in">parseFloat</span>(styles.paddingTop);</span><br><span class="line">  <span class="keyword">const</span> paddingBottom = <span class="built_in">parseFloat</span>(styles.paddingBottom);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    height - borderBottomWidth - borderTopWidth - paddingTop - paddingBottom</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç²¾ç¡®åˆ°æ•´æ•°ï¼ˆborder-box æ—¶ä¸º height - border å€¼ï¼Œcontent-box æ—¶ä¸º height + padding å€¼ï¼‰</span></span><br><span class="line">el.clientHeight;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç²¾ç¡®åˆ°å°æ•°ï¼ˆborder-box æ—¶ä¸º height å€¼ï¼Œcontent-box æ—¶ä¸º height + padding + border å€¼ï¼‰</span></span><br><span class="line">el.getBoundingClientRect().height;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#2.3">2.3</a> <a name="2.3"></a> Position &amp; Offset</p><ul><li><p>Position</p><p>è·å¾—åŒ¹é…å…ƒç´ ç›¸å¯¹çˆ¶å…ƒç´ çš„åç§»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.position();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">&#123; <span class="attr">left</span>: el.offsetLeft, <span class="attr">top</span>: el.offsetTop &#125;</span><br></pre></td></tr></table></figure></li><li><p>Offset</p><p>è·å¾—åŒ¹é…å…ƒç´ ç›¸å¯¹æ–‡æ¡£çš„åç§»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.offset();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOffset</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> box = el.getBoundingClientRect();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    top: box.top + <span class="built_in">window</span>.pageYOffset - <span class="built_in">document</span>.documentElement.clientTop,</span><br><span class="line">    left:</span><br><span class="line">      box.left + <span class="built_in">window</span>.pageXOffset - <span class="built_in">document</span>.documentElement.clientLeft</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#2.4">2.4</a> <a name="2.4"></a> Scroll Top</p></li></ul><p>è·å–å…ƒç´ æ»šåŠ¨æ¡å‚ç›´ä½ç½®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollTop();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">(<span class="built_in">document</span>.documentElement &amp;&amp; <span class="built_in">document</span>.documentElement.scrollTop) ||</span><br><span class="line">  <span class="built_in">document</span>.body.scrollTop;</span><br></pre></td></tr></table></figure><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="DOM-Manipulation"><a href="#DOM-Manipulation" class="headerlink" title="DOM Manipulation"></a>DOM Manipulation</h2><ul><li><p><a href="#3.1">3.1</a> <a name="3.1"></a> Remove</p><p>ä» DOM ä¸­ç§»é™¤å…ƒç´ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.remove();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.parentNode.removeChild(el);</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.2">3.2</a> <a name="3.2"></a> Text</p><ul><li><p>Get text</p><p>è¿”å›æŒ‡å®šå…ƒç´ åŠå…¶åä»£çš„æ–‡æœ¬å†…å®¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.text();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.textContent;</span><br></pre></td></tr></table></figure></li><li><p>Set text</p><p>è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.text(string);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.textContent = string;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#3.3">3.3</a> <a name="3.3"></a> HTML</p><ul><li><p>Get HTML</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.html();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.innerHTML;</span><br></pre></td></tr></table></figure></li><li><p>Set HTML</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.html(htmlString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.innerHTML = htmlString;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><a href="#3.4">3.4</a> <a name="3.4"></a> Append</p><p>Append æ’å…¥åˆ°å­èŠ‚ç‚¹çš„æœ«å°¾</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.append(<span class="string">"&lt;div id='container'&gt;hello&lt;/div&gt;"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (HTML string)</span></span><br><span class="line">el.insertAdjacentHTML(<span class="string">"beforeend"</span>, <span class="string">'&lt;div id="container"&gt;Hello World&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (Element)</span></span><br><span class="line">el.appendChild(newEl);</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.5">3.5</a> <a name="3.5"></a> Prepend</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.prepend(<span class="string">"&lt;div id='container'&gt;hello&lt;/div&gt;"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (HTML string)</span></span><br><span class="line">el.insertAdjacentHTML(<span class="string">"afterbegin"</span>, <span class="string">'&lt;div id="container"&gt;Hello World&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (Element)</span></span><br><span class="line">el.insertBefore(newEl, el.firstChild);</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.6">3.6</a> <a name="3.6"></a> insertBefore</p><p>åœ¨é€‰ä¸­å…ƒç´ å‰æ’å…¥æ–°èŠ‚ç‚¹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$newEl.insertBefore(queryString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (HTML string)</span></span><br><span class="line">el.insertAdjacentHTML(</span><br><span class="line">  <span class="string">"beforebegin "</span>,</span><br><span class="line">  <span class="string">'&lt;div id="container"&gt;Hello World&lt;/div&gt;'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (Element)</span></span><br><span class="line"><span class="keyword">const</span> el = <span class="built_in">document</span>.querySelector(selector);</span><br><span class="line"><span class="keyword">if</span> (el.parentNode) &#123;</span><br><span class="line">  el.parentNode.insertBefore(newEl, el);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.7">3.7</a> <a name="3.7"></a> insertAfter</p><p>åœ¨é€‰ä¸­å…ƒç´ åæ’å…¥æ–°èŠ‚ç‚¹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$newEl.insertAfter(queryString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (HTML string)</span></span><br><span class="line">el.insertAdjacentHTML(<span class="string">"afterend"</span>, <span class="string">'&lt;div id="container"&gt;Hello World&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native (Element)</span></span><br><span class="line"><span class="keyword">const</span> el = <span class="built_in">document</span>.querySelector(selector);</span><br><span class="line"><span class="keyword">if</span> (el.parentNode) &#123;</span><br><span class="line">  el.parentNode.insertBefore(newEl, el.nextSibling);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.8">3.8</a> <a name="3.8"></a> is</p><p>å¦‚æœåŒ¹é…ç»™å®šçš„é€‰æ‹©å™¨ï¼Œè¿”å› true</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.is(selector);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.matches(selector);</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.9">3.9</a> <a name="3.9"></a> clone</p><p>æ·±æ‹·è´è¢«é€‰å…ƒç´ ã€‚ï¼ˆç”Ÿæˆè¢«é€‰å…ƒç´ çš„å‰¯æœ¬ï¼ŒåŒ…å«å­èŠ‚ç‚¹ã€æ–‡æœ¬å’Œå±æ€§ã€‚ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery</span></span><br><span class="line">$el.clone();</span><br><span class="line"></span><br><span class="line"><span class="comment">//Native</span></span><br><span class="line">el.cloneNode();</span><br></pre></td></tr></table></figure></li></ul><p>//æ·±æ‹·è´æ·»åŠ å‚æ•°â€˜trueâ€™<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- [3.10](#3.10) &lt;a name=&apos;3.10&apos;&gt;&lt;/a&gt; empty</span><br><span class="line"></span><br><span class="line">  ç§»é™¤æ‰€æœ‰å­èŠ‚ç‚¹</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">//jQuery</span><br><span class="line">$el.empty();</span><br><span class="line"></span><br><span class="line">//Native</span><br><span class="line">el.innerHTML = &quot;&quot;;</span><br></pre></td></tr></table></figure></p><ul><li><a href="#3.11">3.11</a> <a name="3.11"></a> wrap</li></ul><p>æŠŠæ¯ä¸ªè¢«é€‰å…ƒç´ æ”¾ç½®åœ¨æŒ‡å®šçš„ HTML ç»“æ„ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery</span></span><br><span class="line">$(<span class="string">".inner"</span>).wrap(<span class="string">'&lt;div class="wrapper"&gt;&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Native</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">document</span>.querySelector(<span class="string">".inner"</span>), el =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">  wrapper.className = <span class="string">"wrapper"</span>;</span><br><span class="line">  el.parentNode.insertBefore(wrapper, el);</span><br><span class="line">  el.parentNode.removeChild(el);</span><br><span class="line">  wrapper.appendChild(el);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p><a href="#3.12">3.12</a> <a name="3.12"></a> unwrap</p><p>ç§»é™¤è¢«é€‰å…ƒç´ çš„çˆ¶å…ƒç´ çš„ DOM ç»“æ„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">".inner"</span>).unwrap();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">".inner"</span>), el =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> elParentNode = el.parentNode;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (elParentNode !== <span class="built_in">document</span>.body) &#123;</span><br><span class="line">    elParentNode.parentNode.insertBefore(el, elParentNode);</span><br><span class="line">    elParentNode.parentNode.removeChild(elParentNode);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.13">3.13</a> <a name="3.13"></a> replaceWith</p><p>ç”¨æŒ‡å®šçš„å…ƒç´ æ›¿æ¢è¢«é€‰çš„å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery</span></span><br><span class="line">$(<span class="string">".inner"</span>).replaceWith(<span class="string">'&lt;div class="outer"&gt;&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Native</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.forEach.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">".inner"</span>), el =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> outer = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">  outer.className = <span class="string">"outer"</span>;</span><br><span class="line">  el.parentNode.insertBefore(outer, el);</span><br><span class="line">  el.parentNode.removeChild(el);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><a href="#3.14">3.14</a> <a name="3.14"></a> simple parse</p></li></ul><p>è§£æ HTML/SVG/XML å­—ç¬¦ä¸²</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="string">`&lt;ol&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;a&lt;/li&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;b&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;/ol&gt;</span></span><br><span class="line"><span class="string">&lt;ol&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;c&lt;/li&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;d&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;/ol&gt;`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">range = <span class="built_in">document</span>.createRange();</span><br><span class="line">parse = range.createContextualFragment.bind(range);</span><br><span class="line"></span><br><span class="line">parse(<span class="string">`&lt;ol&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;a&lt;/li&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;b&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;/ol&gt;</span></span><br><span class="line"><span class="string">&lt;ol&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;c&lt;/li&gt;</span></span><br><span class="line"><span class="string">  &lt;li&gt;d&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;/ol&gt;`</span>);</span><br></pre></td></tr></table></figure><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p><a href="https://fetch.spec.whatwg.org/" target="_blank" rel="noopener">Fetch API</a> æ˜¯ç”¨äºæ›¿æ¢ XMLHttpRequest å¤„ç† ajax çš„æ–°æ ‡å‡†ï¼ŒChrome å’Œ Firefox å‡æ”¯æŒï¼Œæ—§æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ polyfills æä¾›æ”¯æŒã€‚</p><p>IE9+ è¯·ä½¿ç”¨ <a href="http://github.com/github/fetch" target="_blank" rel="noopener">github/fetch</a>ï¼ŒIE8+ è¯·ä½¿ç”¨ <a href="https://github.com/camsong/fetch-ie8/" target="_blank" rel="noopener">fetch-ie8</a>ï¼ŒJSONP è¯·ä½¿ç”¨ <a href="https://github.com/camsong/fetch-jsonp" target="_blank" rel="noopener">fetch-jsonp</a>ã€‚</p><ul><li><p><a href="#4.1">4.1</a> <a name="4.1"></a> ä»æœåŠ¡å™¨è¯»å–æ•°æ®å¹¶æ›¿æ¢åŒ¹é…å…ƒç´ çš„å†…å®¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(selector).load(url, completeCallback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">fetch(url)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> data.text())</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(selector).innerHTML = data;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(completeCallback);</span><br></pre></td></tr></table></figure></li></ul><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><p>å®Œæ•´åœ°æ›¿ä»£å‘½åç©ºé—´å’Œäº‹ä»¶ä»£ç†ï¼Œé“¾æ¥åˆ° <a href="https://github.com/oneuijs/oui-dom-events" target="_blank" rel="noopener">https://github.com/oneuijs/oui-dom-events</a></p><ul><li><p><a href="#5.0">5.0</a> <a name="5.0"></a> Document ready by <code>DOMContentLoaded</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(eventHandler);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="comment">// æ£€æµ‹ DOMContentLoaded æ˜¯å¦å·²å®Œæˆ</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.readyState !== <span class="string">"loading"</span>) &#123;</span><br><span class="line">  eventHandler();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, eventHandler);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#5.1">5.1</a> <a name="5.1"></a> ä½¿ç”¨ on ç»‘å®šäº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.on(eventName, eventHandler);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.addEventListener(eventName, eventHandler);</span><br></pre></td></tr></table></figure></li><li><p><a href="#5.2">5.2</a> <a name="5.2"></a> ä½¿ç”¨ off è§£ç»‘äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.off(eventName, eventHandler);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.removeEventListener(eventName, eventHandler);</span><br></pre></td></tr></table></figure></li><li><p><a href="#5.3">5.3</a> <a name="5.3"></a> Trigger</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$(el).trigger(<span class="string">"custom-event"</span>, &#123; <span class="attr">key1</span>: <span class="string">"data"</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.CustomEvent) &#123;</span><br><span class="line">  <span class="keyword">const</span> event = <span class="keyword">new</span> CustomEvent(<span class="string">"custom-event"</span>, &#123; <span class="attr">detail</span>: &#123; <span class="attr">key1</span>: <span class="string">"data"</span> &#125; &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> event = <span class="built_in">document</span>.createEvent(<span class="string">"CustomEvent"</span>);</span><br><span class="line">  event.initCustomEvent(<span class="string">"custom-event"</span>, <span class="literal">true</span>, <span class="literal">true</span>, &#123; <span class="attr">key1</span>: <span class="string">"data"</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">el.dispatchEvent(event);</span><br></pre></td></tr></table></figure></li></ul><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><p>å¤§éƒ¨åˆ†å®ç”¨å·¥å…·éƒ½èƒ½åœ¨ native API ä¸­æ‰¾åˆ°. å…¶ä»–é«˜çº§åŠŸèƒ½å¯ä»¥é€‰ç”¨ä¸“æ³¨äºè¯¥é¢†åŸŸçš„ç¨³å®šæ€§å’Œæ€§èƒ½éƒ½æ›´å¥½çš„åº“æ¥ä»£æ›¿ï¼Œæ¨è <a href="https://lodash.com" target="_blank" rel="noopener">lodash</a>ã€‚</p><ul><li><p><a href="#6.1">6.1</a> <a name="6.1"></a> åŸºæœ¬å·¥å…·</p><ul><li>isArray</li></ul><p>æ£€æµ‹å‚æ•°æ˜¯ä¸æ˜¯æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.isArray(range);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(range);</span><br></pre></td></tr></table></figure><ul><li>isWindow</li></ul><p>æ£€æµ‹å‚æ•°æ˜¯ä¸æ˜¯ windowã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.isWindow(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isWindow</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj !== <span class="literal">null</span> &amp;&amp; obj !== <span class="literal">undefined</span> &amp;&amp; obj === obj.window;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>inArray</li></ul><p>åœ¨æ•°ç»„ä¸­æœç´¢æŒ‡å®šå€¼å¹¶è¿”å›ç´¢å¼• (æ‰¾ä¸åˆ°åˆ™è¿”å› -1)ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.inArray(item, array);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">array.indexOf(item) &gt; <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6-way</span></span><br><span class="line">array.includes(item);</span><br></pre></td></tr></table></figure><ul><li>isNumeric</li></ul><p>æ£€æµ‹ä¼ å…¥çš„å‚æ•°æ˜¯ä¸æ˜¯æ•°å­—ã€‚<br>Use <code>typeof</code> to decide the type or the <code>type</code> example for better accuracy.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.isNumeric(item);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumeric</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(n)) &amp;&amp; <span class="built_in">isFinite</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>isFunction</li></ul><p>æ£€æµ‹ä¼ å…¥çš„å‚æ•°æ˜¯ä¸æ˜¯ JavaScript å‡½æ•°å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.isFunction(item);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> item === <span class="string">"function"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> type = <span class="built_in">Object</span>.prototype.toString(item);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    type === <span class="string">"[object Function]"</span> || type === <span class="string">"[object GeneratorFunction]"</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>isEmptyObject</li></ul><p>æ£€æµ‹å¯¹è±¡æ˜¯å¦ä¸ºç©º (åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§).</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.isEmptyObject(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmptyObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(obj).length === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>isPlainObject</li></ul><p>æ£€æµ‹æ˜¯ä¸æ˜¯æ‰å¹³å¯¹è±¡ (ä½¿ç”¨ â€œ{}â€ æˆ– â€œnew Objectâ€ åˆ›å»º).</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.isPlainObject(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    <span class="keyword">typeof</span> obj !== <span class="string">"object"</span> ||</span><br><span class="line">    obj.nodeType ||</span><br><span class="line">    (obj !== <span class="literal">null</span> &amp;&amp; obj !== <span class="literal">undefined</span> &amp;&amp; obj === obj.window)</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    obj.constructor &amp;&amp;</span><br><span class="line">    !<span class="built_in">Object</span>.prototype.hasOwnProperty.call(</span><br><span class="line">      obj.constructor.prototype,</span><br><span class="line">      <span class="string">"isPrototypeOf"</span></span><br><span class="line">    )</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>extend</li></ul><p>åˆå¹¶å¤šä¸ªå¯¹è±¡çš„å†…å®¹åˆ°ç¬¬ä¸€ä¸ªå¯¹è±¡ã€‚<br>object.assign æ˜¯ ES6 APIï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://github.com/ljharb/object.assign" target="_blank" rel="noopener">polyfill</a>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.extend(&#123;&#125;, defaultOpts, opts);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, defaultOpts, opts);</span><br></pre></td></tr></table></figure><ul><li>trim</li></ul><p>ç§»é™¤å­—ç¬¦ä¸²å¤´å°¾ç©ºç™½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.trim(string);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">string.trim();</span><br></pre></td></tr></table></figure><ul><li>map</li></ul><p>å°†æ•°ç»„æˆ–å¯¹è±¡è½¬åŒ–ä¸ºåŒ…å«æ–°å†…å®¹çš„æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.map(array, (value, index) =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">array.map(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><ul><li>each</li></ul><p>è½®è¯¢å‡½æ•°ï¼Œå¯ç”¨äºå¹³æ»‘çš„è½®è¯¢å¯¹è±¡å’Œæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.each(array, (index, value) =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">array.forEach(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><ul><li>grep</li></ul><p>æ‰¾åˆ°æ•°ç»„ä¸­ç¬¦åˆè¿‡æ»¤å‡½æ•°çš„å…ƒç´ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.grep(array, (value, index) =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">array.filter(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><ul><li>type</li></ul><p>æ£€æµ‹å¯¹è±¡çš„ JavaScript [Class] å†…éƒ¨ç±»å‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.type(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reTypeOf = <span class="regexp">/(?:^\[object\s(.*?)\]$)/</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString</span><br><span class="line">    .call(item)</span><br><span class="line">    .replace(reTypeOf, <span class="string">"$1"</span>)</span><br><span class="line">    .toLowerCase();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>merge</li></ul><p>åˆå¹¶ç¬¬äºŒä¸ªæ•°ç»„å†…å®¹åˆ°ç¬¬ä¸€ä¸ªæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.merge(array1, array2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ concatï¼Œä¸èƒ½å»é™¤é‡å¤å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].concat(...args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6ï¼ŒåŒæ ·ä¸èƒ½å»é™¤é‡å¤å€¼</span></span><br><span class="line">array1 = [...array1, ...array2];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Setï¼Œå¯ä»¥å»é™¤é‡å¤å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([].concat(...args)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>now</li></ul><p>è¿”å›å½“å‰æ—¶é—´çš„æ•°å­—å‘ˆç°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.now();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Date</span>.now();</span><br></pre></td></tr></table></figure><ul><li>proxy</li></ul><p>ä¼ å…¥å‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ç»‘å®šæŒ‡å®šä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.proxy(fn, context);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">fn.bind(context);</span><br></pre></td></tr></table></figure><ul><li>makeArray</li></ul><p>ç±»æ•°ç»„å¯¹è±¡è½¬åŒ–ä¸ºçœŸæ­£çš„ JavaScript æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.makeArray(arrayLike);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(arrayLike);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6-way</span></span><br><span class="line"><span class="built_in">Array</span>.from(arrayLike);</span><br></pre></td></tr></table></figure></li><li><p><a href="#6.2">6.2</a> <a name="6.2"></a> åŒ…å«</p><p>æ£€æµ‹ DOM å…ƒç´ æ˜¯ä¸æ˜¯å…¶ä»– DOM å…ƒç´ çš„åä»£.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.contains(el, child);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el !== child &amp;&amp; el.contains(child);</span><br></pre></td></tr></table></figure></li><li><p><a href="#6.3">6.3</a> <a name="6.3"></a> Globaleval</p><p>å…¨å±€æ‰§è¡Œ JavaScript ä»£ç ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.globaleval(code);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Globaleval</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  script.text = code;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.head.appendChild(script).parentNode.removeChild(script);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use eval, but context of eval is current, context of $.Globaleval is global.</span></span><br><span class="line"><span class="built_in">eval</span>(code);</span><br></pre></td></tr></table></figure></li><li><p><a href="#6.4">6.4</a> <a name="6.4"></a> è§£æ</p><ul><li>parseHTML</li></ul><p>è§£æå­—ç¬¦ä¸²ä¸º DOM èŠ‚ç‚¹æ•°ç»„.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.parseHTML(htmlString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseHTML</span>(<span class="params">string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> context = <span class="built_in">document</span>.implementation.createHTMLDocument();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Set the base href for the created document so any parsed elements with URLs</span></span><br><span class="line">  <span class="comment">// are based on the document's URL</span></span><br><span class="line">  <span class="keyword">const</span> base = context.createElement(<span class="string">"base"</span>);</span><br><span class="line">  base.href = <span class="built_in">document</span>.location.href;</span><br><span class="line">  context.head.appendChild(base);</span><br><span class="line"></span><br><span class="line">  context.body.innerHTML = string;</span><br><span class="line">  <span class="keyword">return</span> context.body.children;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>parseJSON</li></ul><p>ä¼ å…¥æ ¼å¼æ­£ç¡®çš„ JSON å­—ç¬¦ä¸²å¹¶è¿”å› JavaScript å€¼.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.parseJSON(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(str);</span><br></pre></td></tr></table></figure></li></ul><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h2><p>Promise ä»£è¡¨å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœã€‚jQuery ç”¨å®ƒè‡ªå·±çš„æ–¹å¼å¤„ç† promisesï¼ŒåŸç”Ÿ JavaScript éµå¾ª <a href="http://promises-aplus.github.io/promises-spec/" target="_blank" rel="noopener">Promises/A+</a> æ ‡å‡†å®ç°äº†æœ€å° API æ¥å¤„ç† promisesã€‚</p><ul><li><p><a href="#7.1">7.1</a> <a name="7.1"></a> done, fail, always</p><p><code>done</code> ä¼šåœ¨ promise è§£å†³æ—¶è°ƒç”¨ï¼Œ<code>fail</code> ä¼šåœ¨ promise æ‹’ç»æ—¶è°ƒç”¨ï¼Œ<code>always</code> æ€»ä¼šè°ƒç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$promise</span><br><span class="line">  .done(doneCallback)</span><br><span class="line">  .fail(failCallback)</span><br><span class="line">  .always(alwaysCallback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">promise.then(doneCallback, failCallback).then(alwaysCallback, alwaysCallback);</span><br></pre></td></tr></table></figure></li><li><p><a href="#7.2">7.2</a> <a name="7.2"></a> when</p><p><code>when</code> ç”¨äºå¤„ç†å¤šä¸ª promisesã€‚å½“å…¨éƒ¨ promises è¢«è§£å†³æ—¶è¿”å›ï¼Œå½“ä»»ä¸€ promise è¢«æ‹’ç»æ—¶æ‹’ç»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$.when($promise1, $promise2).done(<span class="function">(<span class="params">promise1Result, promise2Result</span>) =&gt;</span> &#123;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="built_in">Promise</span>.all([$promise1, $promise2]).then([promise1Result, promise2Result] =&gt; &#123;&#125;);</span><br></pre></td></tr></table></figure></li><li><p><a href="#7.3">7.3</a> <a name="7.3"></a> Deferred</p><p>Deferred æ˜¯åˆ›å»º promises çš„ä¸€ç§æ–¹å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> defer = <span class="keyword">new</span> $.Deferred();</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      defer.resolve(<span class="string">"some_value_computed_asynchronously"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      defer.reject(<span class="string">"failed"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> defer.promise();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        resolve(<span class="string">"some_value_computed_asynchronously"</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(<span class="string">"failed"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Deferred way</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> deferred = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    deferred.resolve = resolve;</span><br><span class="line">    deferred.reject = reject;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  deferred.promise = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> promise;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> deferred;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> defer = defer();</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      defer.resolve(<span class="string">"some_value_computed_asynchronously"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      defer.reject(<span class="string">"failed"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> defer.promise();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h2><ul><li><p><a href="#8.1">8.1</a> <a name="8.1"></a> Show &amp; Hide</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.show();</span><br><span class="line">$el.hide();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="comment">// æ›´å¤š show æ–¹æ³•çš„ç»†èŠ‚è¯¦è§ https://github.com/oneuijs/oui-dom-utils/blob/master/src/index.js#L363</span></span><br><span class="line">el.style.display = <span class="string">""</span> | <span class="string">"inline"</span> | <span class="string">"inline-block"</span> | <span class="string">"inline-table"</span> | <span class="string">"block"</span>;</span><br><span class="line">el.style.display = <span class="string">"none"</span>;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.2">8.2</a> <a name="8.2"></a> Toggle</p><p>æ˜¾ç¤ºæˆ–éšè—å…ƒç´ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.toggle();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  el.ownerDocument.defaultView.getComputedStyle(el, <span class="literal">null</span>).display === <span class="string">"none"</span></span><br><span class="line">) &#123;</span><br><span class="line">  el.style.display =</span><br><span class="line">    <span class="string">""</span> | <span class="string">"inline"</span> | <span class="string">"inline-block"</span> | <span class="string">"inline-table"</span> | <span class="string">"block"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  el.style.display = <span class="string">"none"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.3">8.3</a> <a name="8.3"></a> FadeIn &amp; FadeOut</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.fadeIn(<span class="number">3000</span>);</span><br><span class="line">$el.fadeOut(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.style.transition = <span class="string">"opacity 3s"</span>;</span><br><span class="line"><span class="comment">// fadeIn</span></span><br><span class="line">el.style.opacity = <span class="string">"1"</span>;</span><br><span class="line"><span class="comment">// fadeOut</span></span><br><span class="line">el.style.opacity = <span class="string">"0"</span>;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.4">8.4</a> <a name="8.4"></a> FadeTo</p><p>è°ƒæ•´å…ƒç´ é€æ˜åº¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.fadeTo(<span class="string">"slow"</span>, <span class="number">0.15</span>);</span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.style.transition = <span class="string">"opacity 3s"</span>; <span class="comment">// å‡è®¾ 'slow' ç­‰äº 3 ç§’</span></span><br><span class="line">el.style.opacity = <span class="string">"0.15"</span>;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.5">8.5</a> <a name="8.5"></a> FadeToggle</p><p>åŠ¨ç”»è°ƒæ•´é€æ˜åº¦ç”¨æ¥æ˜¾ç¤ºæˆ–éšè—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.fadeToggle();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.style.transition = <span class="string">"opacity 3s"</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; opacity &#125; = el.ownerDocument.defaultView.getComputedStyle(el, <span class="literal">null</span>);</span><br><span class="line"><span class="keyword">if</span> (opacity === <span class="string">"1"</span>) &#123;</span><br><span class="line">  el.style.opacity = <span class="string">"0"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  el.style.opacity = <span class="string">"1"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.6">8.6</a> <a name="8.6"></a> SlideUp &amp; SlideDown</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.slideUp();</span><br><span class="line">$el.slideDown();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="keyword">const</span> originHeight = <span class="string">"100px"</span>;</span><br><span class="line">el.style.transition = <span class="string">"height 3s"</span>;</span><br><span class="line"><span class="comment">// slideUp</span></span><br><span class="line">el.style.height = <span class="string">"0px"</span>;</span><br><span class="line"><span class="comment">// slideDown</span></span><br><span class="line">el.style.height = originHeight;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.7">8.7</a> <a name="8.7"></a> SlideToggle</p><p>æ»‘åŠ¨åˆ‡æ¢æ˜¾ç¤ºæˆ–éšè—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.slideToggle();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line"><span class="keyword">const</span> originHeight = <span class="string">"100px"</span>;</span><br><span class="line">el.style.transition = <span class="string">"height 3s"</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; height &#125; = el.ownerDocument.defaultView.getComputedStyle(el, <span class="literal">null</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">parseInt</span>(height, <span class="number">10</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">  el.style.height = originHeight;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  el.style.height = <span class="string">"0px"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="#8.8">8.8</a> <a name="8.8"></a> Animate</p><p>æ‰§è¡Œä¸€ç³»åˆ— CSS å±æ€§åŠ¨ç”»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jQuery</span></span><br><span class="line">$el.animate(&#123; params &#125;, speed);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Native</span></span><br><span class="line">el.style.transition = <span class="string">'all '</span> + speed;</span><br><span class="line"><span class="built_in">Object</span>.keys(params).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span></span><br><span class="line">  el.style[key] = params[key];</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ul><p><strong><a href="#ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p><h2 id="Alternatives"><a href="#Alternatives" class="headerlink" title="Alternatives"></a>Alternatives</h2><ul><li><a href="http://youmightnotneedjquery.com/" target="_blank" rel="noopener">ä½ å¯èƒ½ä¸éœ€è¦ jQuery (You Might Not Need jQuery)</a> - å¦‚ä½•ä½¿ç”¨åŸç”Ÿ JavaScript å®ç°é€šç”¨äº‹ä»¶ï¼Œå…ƒç´ ï¼Œajax ç­‰ç”¨æ³•ã€‚</li><li><a href="http://github.com/npm-dom" target="_blank" rel="noopener">npm-dom</a> ä»¥åŠ <a href="http://github.com/webmodules" target="_blank" rel="noopener">webmodules</a> - åœ¨ NPM ä¸Šæä¾›ç‹¬ç«‹ DOM æ¨¡å—çš„ç»„ç»‡</li></ul><h2 id="Browser-Support"><a href="#Browser-Support" class="headerlink" title="Browser Support"></a>Browser Support</h2><table><thead><tr><th><img src="https://raw.github.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome"></th><th><img src="https://raw.github.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox"></th><th><img src="https://raw.github.com/alrra/browser-logos/master/src/archive/internet-explorer_9-11/internet-explorer_9-11_48x48.png" alt="IE"></th><th><img src="https://raw.github.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera"></th><th><img src="https://raw.github.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari"></th></tr></thead><tbody><tr><td>Latest âœ”</td><td>Latest âœ”</td><td>10+ âœ”</td><td>Latest âœ”</td><td>6.1+ âœ”</td></tr></tbody></table><h1 id="License"><a href="#License" class="headerlink" title="License"></a>License</h1><p>MIT</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;ğŸ“° GitHub å·¥ç¨‹å›¢é˜Ÿå‘å¸ƒæ–‡ç«  ğŸ”—&lt;a href=&quot;https://githubengineering.com/removing-jquery-from-github-frontend/&quot; title=&quot;Removing jQuery from GitHub.com frontend&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Removing jQuery from GitHub.com frontend&lt;/a&gt; å®£å¸ƒä»–ä»¬å°†é€æ¸è„±ç¦» jQueryï¼Œç›´åˆ°èƒ½å¤Ÿå®Œå…¨åˆ é™¤åº“ï¼Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ APIs å¯ä»¥æ»¡è¶³æ‰€æœ‰éœ€æ±‚ã€‚æˆ‘æ¸…æ™°çš„è®°å¾—åˆšå¼€å§‹ jQuery çš„æ—¶å€™ï¼Œä½¿å‰ç«¯å¼€å‘å·¥ä½œå˜çš„ç®€å•ï¼Œé«˜æ•ˆã€‚æ‰€ä»¥ä¸å¾—ä¸è¯´ jQuery æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„åº“ï¼Œâ¤ï¸ çºªå¿µä¸€ä¸‹ï¼Œæ„Ÿè°¢ jQueryï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘åœ¨ Github ä¸Šå‘ç°äº†è¿™ä¸ªå¾ˆå®ç”¨çš„ repoï¼ğŸ”—&lt;a href=&quot;https://github.com/nefe/You-Dont-Need-jQuery&quot; title=&quot;You Don&amp;#39;t Need jQuery&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;You Donâ€™t Need jQuery&lt;/a&gt; æœ‰å¾ˆå¤šç¿»è¯‘ç‰ˆæœ¬ï¼Œä¸‹é¢æ˜¯ä¸­æ–‡ç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;å‰ç«¯å‘å±•å¾ˆå¿«ï¼Œç°ä»£æµè§ˆå™¨åŸç”Ÿ API å·²ç»è¶³å¤Ÿå¥½ç”¨ã€‚æˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸ºäº†æ“ä½œ DOMã€Event ç­‰å†å­¦ä¹ ä¸€ä¸‹ jQuery çš„ APIã€‚åŒæ—¶ç”±äº Reactã€Angularã€Vue ç­‰æ¡†æ¶çš„æµè¡Œï¼Œç›´æ¥æ“ä½œ DOM ä¸å†æ˜¯å¥½çš„æ¨¡å¼ï¼ŒjQuery ä½¿ç”¨åœºæ™¯å¤§å¤§å‡å°‘ã€‚æœ¬é¡¹ç›®æ€»ç»“äº†å¤§éƒ¨åˆ† jQuery API æ›¿ä»£çš„æ–¹æ³•ï¼Œæš‚æ—¶åªæ”¯æŒ IE10 ä»¥ä¸Šæµè§ˆå™¨ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="jQuery" scheme="https://blog.v2next.com/tags/jQuery/"/>
    
      <category term="JavaScript" scheme="https://blog.v2next.com/tags/JavaScript/"/>
    
      <category term="Web" scheme="https://blog.v2next.com/tags/Web/"/>
    
      <category term="Github" scheme="https://blog.v2next.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº WebAssembly / wasm</title>
    <link href="https://blog.v2next.com/2018/09/05/about-webassembly-wasm/"/>
    <id>https://blog.v2next.com/2018/09/05/about-webassembly-wasm/</id>
    <published>2018-09-05T06:32:13.000Z</published>
    <updated>2019-10-20T07:59:34.696Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘åœ¨çœ‹ <a href="http://webassembly.org" title="webassembly.org" target="_blank" rel="noopener"><code>WebAssembly</code></a>ï¼Œæ”¶é›†äº†ä¸€äº›èµ„æ–™ã€‚åé¢å‡†å¤‡å†™ä¸€äº› samplesã€‚</p></blockquote><h1 id="MDN-ä¸Šå…³äº-WebAssembly-çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚"><a href="#MDN-ä¸Šå…³äº-WebAssembly-çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚" class="headerlink" title="MDN ä¸Šå…³äº WebAssembly çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚"></a>MDN ä¸Šå…³äº <code>WebAssembly</code> çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚</h1><p>MDN Github ç¤ºä¾‹ï¼š<a href="https://github.com/mdn/webassembly-examples" target="_blank" rel="noopener">https://github.com/mdn/webassembly-examples</a><br>MDN WebAssembly æ–‡æ¡£ï¼š <a href="https://developer.mozilla.org/en-US/docs/WebAssembly" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/WebAssembly</a>.</p><a id="more"></a><h1 id="MS-Blazor"><a href="#MS-Blazor" class="headerlink" title="MS Blazor:"></a>MS Blazor:</h1><p>å¾®è½¯ <code>Blazor</code> = <code>Browser</code> + <code>Razor</code> æ˜¯ä¸€ä¸ªè¯•éªŒçš„ Web UI æ¡†æ¶åŸºäº C#ï¼ŒRazor å’Œ HTMLï¼Œ é€šè¿‡ <code>WebAssembly</code> è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚</p><p><a href="https://blogs.msdn.microsoft.com/webdev/2018/02/06/blazor-experimental-project" target="_blank" rel="noopener">https://blogs.msdn.microsoft.com/webdev/2018/02/06/blazor-experimental-project</a></p><p>Blazor demo: <a href="https://blazor-demo.github.io/" target="_blank" rel="noopener">https://blazor-demo.github.io/</a><br>Blazor demo repo: <a href="https://github.com/blazor-demo" target="_blank" rel="noopener">https://github.com/blazor-demo</a></p><p>ä¸‹é¢æ˜¯é€›çŸ¥ä¹å‘ç°çš„ <code>Vim</code> å’Œ <code>WIndows 2000</code> è·‘åœ¨ wasm ä¸Šï¼Œå¾ˆèµï¼ğŸ‘ éå¸¸æœ‰è¶£ï¼ğŸ˜„</p><p><code>WebAssembly Vim</code>:<br><a href="https://github.com/rhysd/vim.wasm" target="_blank" rel="noopener">https://github.com/rhysd/vim.wasm</a><br><a href="https://zhuanlan.zhihu.com/p/39879691" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/39879691</a></p><p><code>WebAssembly Windows 2000</code>:<br><a href="https://yq.aliyun.com/roundtable/289191" target="_blank" rel="noopener">https://yq.aliyun.com/roundtable/289191</a><br><a href="https://zhuanlan.zhihu.com/p/44076682" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/44076682</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;æœ€è¿‘åœ¨çœ‹ &lt;a href=&quot;http://webassembly.org&quot; title=&quot;webassembly.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;WebAssembly&lt;/code&gt;&lt;/a&gt;ï¼Œæ”¶é›†äº†ä¸€äº›èµ„æ–™ã€‚åé¢å‡†å¤‡å†™ä¸€äº› samplesã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;MDN-ä¸Šå…³äº-WebAssembly-çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚&quot;&gt;&lt;a href=&quot;#MDN-ä¸Šå…³äº-WebAssembly-çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚&quot; class=&quot;headerlink&quot; title=&quot;MDN ä¸Šå…³äº WebAssembly çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚&quot;&gt;&lt;/a&gt;MDN ä¸Šå…³äº &lt;code&gt;WebAssembly&lt;/code&gt; çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚&lt;/h1&gt;&lt;p&gt;MDN Github ç¤ºä¾‹ï¼š&lt;a href=&quot;https://github.com/mdn/webassembly-examples&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/mdn/webassembly-examples&lt;/a&gt;&lt;br&gt;MDN WebAssembly æ–‡æ¡£ï¼š &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/WebAssembly&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/WebAssembly&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
      <category term="WebAssembly" scheme="https://blog.v2next.com/tags/WebAssembly/"/>
    
      <category term="wasm" scheme="https://blog.v2next.com/tags/wasm/"/>
    
      <category term="Blazor" scheme="https://blog.v2next.com/tags/Blazor/"/>
    
      <category term="fun" scheme="https://blog.v2next.com/tags/fun/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Vue, React, Angular æ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ª</title>
    <link href="https://blog.v2next.com/2018/08/25/react-vs-vue-vs-angular/"/>
    <id>https://blog.v2next.com/2018/08/25/react-vs-vue-vs-angular/</id>
    <published>2018-08-25T02:21:11.000Z</published>
    <updated>2019-10-20T07:59:34.697Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ”—<a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2651008699&amp;idx=1&amp;sn=105db8b8489f5d751fec66ee52b9d1df&amp;chksm=bdbed6e88ac95ffe90816e46bb7e2895dfce49311946d199e6a24270a77d4524088c29441557&amp;mpshare=1&amp;scene=1&amp;srcid=0813Ok93GA9E7fusIU4IPRW7&amp;pass_ticket=3KaC3BtdKxMPCsbWjzKleE6EDcHghkVLHQfistwcqnY%3D#rd" title="ç”¨Vueå’ŒReactæ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ªï¼Ÿ" target="_blank" rel="noopener">ç”¨ Vue å’Œ React æ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ªï¼Ÿ- Infoq</a></p><p>ğŸ”—<a href="https://medium.com/javascript-in-plain-english/i-created-the-exact-same-app-in-react-and-vue-here-are-the-differences-e9a1ae8077fd" title="I created the exact same app in React and Vue. Here are the differences." target="_blank" rel="noopener">I created the exact same app in React and Vue. Here are the differences. - Medium</a></p><p>ğŸ”—<a href="https://medium.com/javascript-in-plain-english/i-created-the-exact-same-app-in-react-and-vue-part-2-angular-39b1aa289878" title="I created the same app in React and Vue (Part 2: Angular). " target="_blank" rel="noopener">I created the same app in React and Vue (Part 2: Angular). - Medium</a></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ”—&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;amp;mid=2651008699&amp;amp;idx=1&amp;amp;sn=105db8b8489f5d751fec66ee52b9d1df&amp;amp;chksm=bdbed6e88ac95ffe90816e46bb7e2895dfce49311946d199e6a24270a77d4524088c29441557&amp;amp;mpshare=1&amp;amp;scene=1&amp;amp;srcid=0813Ok93GA9E7fusIU4IPRW7&amp;amp;pass_ticket=3KaC3BtdKxMPCsbWjzKleE6EDcHghkVLHQfistwcqnY%3D#rd&quot; title=&quot;ç”¨Vueå’ŒReactæ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ªï¼Ÿ&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ç”¨ Vue å’Œ React æ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ªï¼Ÿ- Infoq&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ğŸ”—&lt;a href=&quot;https://medium.com/javascript-in-plain-english/i-created-the-exact-same-app-in-react-and-vue-here-are-the-differences-e9a1ae8077fd&quot; title=&quot;I created the exact same app in React and Vue. Here are the differences.&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;I created the exact same app in React and Vue. Here are the differences. - Medium&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ğŸ”—&lt;a href=&quot;https://medium.com/javascript-in-plain-english/i-created-the-exact-same-app-in-react-and-vue-part-2-angular-39b1aa289878&quot; title=&quot;I created the same app in React and Vue (Part 2: Angular). &quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;I created the same app in React and Vue (Part 2: Angular). - Medium&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://blog.v2next.com/tags/React/"/>
    
      <category term="Vue" scheme="https://blog.v2next.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨nodejså¼€å‘WebSocketåº”ç”¨</title>
    <link href="https://blog.v2next.com/2018/08/20/nodejs-websocket/"/>
    <id>https://blog.v2next.com/2018/08/20/nodejs-websocket/</id>
    <published>2018-08-20T05:10:10.000Z</published>
    <updated>2019-10-20T07:59:34.696Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨äº†<a href="https://www.npmjs.com/package/websocket" title="websocket package" target="_blank" rel="noopener"><code>websocket</code></a> <code>npm</code>æ­å»º websocket server, ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ <a href="https://socket.io/" title="socket.io" target="_blank" rel="noopener">socket.io</a>ï¼Œä½†æ˜¯<code>socket.io</code> å°è£…æ¯”è¾ƒå¥½ï¼ŒåŸºæœ¬ä¸ç”¨å†™ä»€ä¹ˆä»£ç ï¼Œæˆ‘è¿˜æ˜¯æƒ³å†™äº›ä»£ç ä½“éªŒä¸€ä¸‹ã€‚</p><p>ğŸ“² Chat App:<br><a href="https://github.com/ericwdq/ws-chat" target="_blank" rel="noopener">https://github.com/ericwdq/ws-chat</a></p><p>âœ‰ï¸ Backend data push:<br><a href="https://github.com/ericwdq/d3-demo" target="_blank" rel="noopener">https://github.com/ericwdq/d3-demo</a></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨äº†&lt;a href=&quot;https://www.npmjs.com/package/websocket&quot; title=&quot;websocket package&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;websocket&lt;/code&gt;&lt;/a&gt; &lt;code&gt;npm&lt;/code&gt;æ­å»º websocket server, ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ &lt;a href=&quot;https://socket.io/&quot; title=&quot;socket.io&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;socket.io&lt;/a&gt;ï¼Œä½†æ˜¯&lt;code&gt;socket.io&lt;/code&gt; å°è£…æ¯”è¾ƒå¥½ï¼ŒåŸºæœ¬ä¸ç”¨å†™ä»€ä¹ˆä»£ç ï¼Œæˆ‘è¿˜æ˜¯æƒ³å†™äº›ä»£ç ä½“éªŒä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“² Chat App:&lt;br&gt;&lt;a href=&quot;https://github.com/ericwdq/ws-chat&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/ericwdq/ws-chat&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;âœ‰ï¸ Backend data push:&lt;br&gt;&lt;a href=&quot;https://github.com/ericwdq/d3-demo&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/ericwdq/d3-demo&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="NodeJS" scheme="https://blog.v2next.com/tags/NodeJS/"/>
    
      <category term="WebSocket" scheme="https://blog.v2next.com/tags/WebSocket/"/>
    
      <category term="ws" scheme="https://blog.v2next.com/tags/ws/"/>
    
      <category term="npm" scheme="https://blog.v2next.com/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>Javascript Async and Await</title>
    <link href="https://blog.v2next.com/2018/03/23/Javascript-async-and-await/"/>
    <id>https://blog.v2next.com/2018/03/23/Javascript-async-and-await/</id>
    <published>2018-03-23T08:58:12.000Z</published>
    <updated>2019-10-20T07:59:34.695Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http
      
    
    </summary>
    
    
      <category term="ES2017" scheme="https://blog.v2next.com/tags/ES2017/"/>
    
      <category term="Javascript" scheme="https://blog.v2next.com/tags/Javascript/"/>
    
      <category term="Async" scheme="https://blog.v2next.com/tags/Async/"/>
    
      <category term="Await" scheme="https://blog.v2next.com/tags/Await/"/>
    
  </entry>
  
  <entry>
    <title>Promiseä½¿ç”¨æŠ€å·§ä¹åˆ™</title>
    <link href="https://blog.v2next.com/2018/03/22/promising-promise-tips/"/>
    <id>https://blog.v2next.com/2018/03/22/promising-promise-tips/</id>
    <published>2018-03-22T07:24:27.000Z</published>
    <updated>2019-10-20T07:59:34.697Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è¯‘è‡ª <a href="https://dev.to/kepta/promising-promise-tips--c8f" title="9 Promising Promise Tips" target="_blank" rel="noopener">9 Promising Promise Tips</a>ã€‚</p></blockquote><p>å·¥ç¨‹å¸ˆä»¬ï¼Œä½ ä»¬æ€»è¯´ <code>Pormise</code> å¥½ç”¨ï¼ä½†æœ‰æ—¶å€™ç”¨èµ·æ¥æ˜¯ä¸æ˜¯è¿˜å¾ˆæ‡µé€¼ã€‚æœ¬æ–‡ä¼ æˆç»™ä½ ä¹æ¡å®ç”¨çš„ Promise ä½¿ç”¨æŠ€å·§ï¼Œå¸®åŠ©ä½ å’Œå®ƒå»ºç«‹èµ·è‰¯å¥½çš„å…³ç³»ï¼</p><p><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--zlauxVhZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/6966254/36483828-3e361d88-16e5-11e8-9f11-cbe99d719066.png" alt="alt text" title="Promise"></p><h1 id="1-ä½ å¯ä»¥åœ¨-then-å›è°ƒé‡Œè¿”å›-Promise"><a href="#1-ä½ å¯ä»¥åœ¨-then-å›è°ƒé‡Œè¿”å›-Promise" class="headerlink" title="1. ä½ å¯ä»¥åœ¨ .then å›è°ƒé‡Œè¿”å› Promise"></a>1. ä½ å¯ä»¥åœ¨ <code>.then</code> å›è°ƒé‡Œè¿”å› Promise</h1><blockquote><p>æ˜¯çš„ï¼ä½ å¯ä»¥ .then å›è°ƒé‡Œè¿”å› Promiseï¼</p></blockquote><p>è€Œä¸”ï¼Œè¿”å›çš„ promise ä¼šåœ¨æ¥ä¸‹æ¥çš„ <code>.then</code> è¢«è‡ªåŠ¨æ‰“å¼€ï¼ˆunwrappedï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™æ˜¯ä¸€ä¸ª &#123; statusCode: 200 &#125; promise</span></span><br><span class="line">    <span class="keyword">return</span> serverStatusPromise(r);</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">resp</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 200ï¼›æ³¨æ„ä¸Šé¢çš„ promise è¢«è‡ªåŠ¨ unwrap äº†</span></span><br><span class="line">    <span class="built_in">console</span>.log(resp.statusCode);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="2-æ¯æ¬¡è°ƒç”¨-then-éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„-Promise"><a href="#2-æ¯æ¬¡è°ƒç”¨-then-éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„-Promise" class="headerlink" title="2. æ¯æ¬¡è°ƒç”¨ .then éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Promise"></a>2. æ¯æ¬¡è°ƒç”¨ <code>.then</code> éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Promise</h1><blockquote><p>å¦‚æœä½ ç†Ÿæ‚‰ JavaScript çš„é“¾å¼è°ƒç”¨ï¼Œå¯¹è¿™ç§ç”¨æ³•ä¸€å®šä¸é™Œç”Ÿã€‚</p></blockquote><p>è°ƒç”¨ <code>.then</code> å’Œ <code>.catch</code> æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Promiseã€‚è¿™ä¸ªæ–°çš„ Promise å¯ä»¥ç»§ç»­ä½¿ç”¨ <code>.then</code> æˆ–è€… <code>.catch</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> statusProm = fetchServerStatus();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promA = statusProm.then(<span class="function"><span class="params">r</span> =&gt;</span> (r.statusCode === <span class="number">200</span> ? <span class="string">"good"</span> : <span class="string">"bad"</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promB = promA.then(<span class="function"><span class="params">r</span> =&gt;</span> (r === <span class="string">"good"</span> ? <span class="string">"ALL OK"</span> : <span class="string">"NOTOK"</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promC = statusProm.then(<span class="function"><span class="params">r</span> =&gt;</span> fetchThisAnotherThing());</span><br></pre></td></tr></table></figure><p>é‡ç‚¹æ³¨æ„ï¼Œ <code>promA</code>ã€ <code>promB</code> å’Œ <code>promC</code> è™½ç„¶ç›¸å…³ï¼Œä½†éƒ½æ˜¯ä¸åŒçš„ <code>promise</code> å®ä¾‹ã€‚</p><p>æˆ‘å–œæ¬¢æŠŠè¿™ç§ <code>.then</code> é“¾å½“åšä¸€ä¸ªå·¨å¤§çš„æ°´æš–ç³»ç»Ÿï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹å‡ºäº†æ•…éšœï¼Œçƒ­æ°´å°†æ— æ³•æµå…¥åˆ°è‡ªèŠ‚ç‚¹ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ promB æ•…éšœäº†ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸å—å½±å“ï¼Œä½†æ˜¯å¦‚æœ statusProm å‡ºé—®é¢˜äº†ï¼Œå…¶ä»–èŠ‚ç‚¹å°±ä¼šè¢«å½±å“ï¼Œä¹Ÿå°±æ˜¯è¢« rejectedã€‚</p><h1 id="3-åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise-resolve-reject-çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„"><a href="#3-åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise-resolve-reject-çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„" class="headerlink" title="3. åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise resolve/reject çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„"></a>3. åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise <code>resolve/reject</code> çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„</h1><p>è¿™æ˜¯ Promise ä¹‹æ‰€ä»¥å¥½ç”¨çš„åŸå› ã€‚ç®€å•ç†è§£ï¼Œå°±æ˜¯å¦‚æœä¸€ä¸ª promise åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œå½“å®ƒè¢« <code>resolve</code> æˆ–è€… <code>reject</code> çš„æ—¶å€™ï¼Œéƒ½ä¼šè·å¾—é€šçŸ¥ã€‚</p><blockquote><p>è€Œä¸” promise æ˜¯æ— æ³•è¢«ä¿®æ”¹çš„ï¼Œå› æ­¤å®ƒå¯ä»¥éšæ„ä¼ é€’ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yourFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> yourAwesomeProm = makeMeProm();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ— è®ºåå”å”å¦‚ä½•æ¶ˆè´¹ä½ çš„ promiseï¼Œä½ çš„ promise éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œ</span></span><br><span class="line">  yourEvilUncle(yourAwesomeProm);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> yourAwesomeProm.then(<span class="function"><span class="params">r</span> =&gt;</span> importantProcessing(r));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">yourEvilUncle</span>(<span class="params">prom</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åå”å”</span></span><br><span class="line">  <span class="keyword">return</span> prom.then(<span class="function"><span class="params">r</span> =&gt;</span> <span class="built_in">Promise</span>.reject(<span class="string">"destroy!!"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Promise çš„è®¾è®¡é¿å…äº†æ¶æ„çš„ç ´åï¼Œå¦‚æˆ‘æ‰€è¯´ï¼šâ€œæ²¡äº‹ï¼Œå¯ä»¥æŠŠ promise éšä¾¿æ‰”ï¼â€</p><h1 id="4-Promise-æ„é€ å‡½æ•°ä¸æ˜¯ä¸‡é‡‘æ²¹"><a href="#4-Promise-æ„é€ å‡½æ•°ä¸æ˜¯ä¸‡é‡‘æ²¹" class="headerlink" title="4. Promise æ„é€ å‡½æ•°ä¸æ˜¯ä¸‡é‡‘æ²¹"></a>4. Promise æ„é€ å‡½æ•°ä¸æ˜¯ä¸‡é‡‘æ²¹</h1><p>æˆ‘å‘ç°æœ‰äº›å·¥ç¨‹å¸ˆåœ¨ä»»ä½•åœ°æ–¹éƒ½ä¼šä½¿ç”¨ Promise çš„ constructorï¼Œè¿˜è®¤ä¸ºè¿™å°±æ˜¯ promise çš„ä½¿ç”¨æ–¹å¼ã€‚è¿™æ˜¯ä¸å¯¹çš„ï¼Œæ ¹æœ¬åŸå› å°±æ˜¯ constructor API ä¸åŸæ¥ callback API å¾ˆåƒï¼Œè€çš„ä¹ æƒ¯å¾ˆéš¾æ”¹ã€‚</p><blockquote><p>å¦‚æœä½ çš„ä»£ç ä¸­éå¸ƒ Promise constructorï¼Œä½ çš„åšæ³•å°±æ˜¯é”™çš„ï¼</p></blockquote><p>Promise æ„é€ å‡½æ•°æ­£ç¡®çš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">  fs.readFile(<span class="string">"/etc/passwd"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> rej(err);</span><br><span class="line">    <span class="keyword">return</span> res(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><b><code>Promise constructor</code> åªåœ¨å°†å›è°ƒè½¬æˆ promise æ—¶ä½¿ç”¨ã€‚</b></p><p>çœ‹ä¸€ä¸ªå†—ä½™çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç”¨æ³•</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> fetchPromise = fetchSomeData(.....);</span><br><span class="line">    fetchPromise</span><br><span class="line">        .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            res(data); <span class="comment">// é”™è¯¯çš„æ–¹å¼</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span> =&gt;</span> rej(err))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ç”¨æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çœ‹ä¸Šå»å¯¹å°±æ˜¯å¯¹çš„</span></span><br><span class="line"><span class="keyword">return</span> fetchSomeData(...);</span><br></pre></td></tr></table></figure><p>åœ¨ Node.js ä¸­ï¼Œæ¨èä½¿ç”¨ <a href="http://2ality.com/2017/05/util-promisify.html" title="util.promisify" target="_blank" rel="noopener">util.promisify</a>ã€‚ç”¨æ¥å°†å›è°ƒ API è½¬æˆ promise å¼çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; promisify &#125; = <span class="built_in">require</span>(<span class="string">"util"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readFileAsync = promisify(fs.readFile);</span><br><span class="line"></span><br><span class="line">readFileAsync(<span class="string">"myfile.txt"</span>, <span class="string">"utf-8"</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">r</span> =&gt;</span> <span class="built_in">console</span>.log(r))</span><br><span class="line">  .catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.error(e));</span><br></pre></td></tr></table></figure><h1 id="5-ä½¿ç”¨-Promise-resolve"><a href="#5-ä½¿ç”¨-Promise-resolve" class="headerlink" title="5. ä½¿ç”¨ Promise.resolve"></a>5. ä½¿ç”¨ Promise.resolve</h1><p>JavaScript æä¾›äº† <code>Promise.resolve</code> APIï¼Œæ˜¯äº§ç”Ÿ Promise å¯¹è±¡çš„ä¸€ç§å¿«æ·æ–¹å¼ï¼Œè¿™ä¸ª promise å¯¹è±¡æ˜¯è¢« <code>resolve</code> çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> similarProm = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> res(<span class="number">5</span>));</span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line"><span class="keyword">var</span> prom = <span class="built_in">Promise</span>.resolve(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><p>è¿™æœ‰å¾ˆå¤šä½¿ç”¨åœºæ™¯ï¼Œæˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªæ˜¯ï¼Œå°†ä¸€ä¸ªåŒæ­¥çš„å¯¹è±¡è½¬æˆä¸€ä¸ª promiseï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†ä¸€ä¸ªåŒæ­¥å‡½æ•°è½¬æˆå¼‚æ­¥çš„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨æ¥åœ¨ä¸ç¡®å®šè¿”å›å€¼æ˜¯æ™®é€šå¯¹è±¡è¿˜æ˜¯ promise æ—¶ï¼Œå°†è¿”å›å€¼å°è£…ä¸º promise å¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goodProm</span>(<span class="params">maybePromise</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(maybePromise);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodProm(<span class="number">5</span>).then(<span class="built_in">console</span>.log); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ª promise resolve æˆ 5</span></span><br><span class="line"><span class="keyword">var</span> sixPromise = fetchMeNumber(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">goodProm(sixPromise).then(<span class="built_in">console</span>.log); <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ï¼Œæ³¨æ„ï¼Œæ¯å±‚ promise éƒ½è¢«è‡ªåŠ¨ unwrap äº†</span></span><br><span class="line">goodProm(<span class="built_in">Promise</span>.resolve(<span class="built_in">Promise</span>.resolve(<span class="number">5</span>))).then(<span class="built_in">console</span>.log);</span><br></pre></td></tr></table></figure><h1 id="6-ä½¿ç”¨-Promise-reject"><a href="#6-ä½¿ç”¨-Promise-reject" class="headerlink" title="6. ä½¿ç”¨ Promise.reject"></a>6. ä½¿ç”¨ Promise.reject</h1><p>ä¸ <code>Promise.resolve</code> ç±»ä¼¼ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§å¿«æ·å†™æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rejProm = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, reject</span>) =&gt;</span> reject(<span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">rejProm.catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(e)); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>æˆ‘æœ€å–œæ¬¢çš„ Promise.reject çš„ç”¨æ³•æ˜¯ï¼Œå°½æ—©åœ° rejectï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">myVal</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!mVal) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"myVal is required"</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™äº›å°†å·¨å¤§çš„ callback è½¬æˆ promise</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>.then</code> ä¸­ä½¿ç”¨ rejectï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (val != <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'Not Good'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(e)) <span class="comment">// Not Good</span></span><br></pre></td></tr></table></figure><h1 id="7-ä½¿ç”¨-Promise-all"><a href="#7-ä½¿ç”¨-Promise-all" class="headerlink" title="7. ä½¿ç”¨ Promise.all"></a>7. ä½¿ç”¨ Promise.all</h1><p>JavaScript è¿˜æä¾›äº† <code>Promise.all</code>ï¼Œä½†å®ƒä¸æ˜¯ä»€ä¹ˆå¿«æ·æ–¹å¼ã€‚</p><p>å¯ä»¥å¦‚ä¸‹æ€»ç»“å®ƒçš„ç®—æ³•ï¼š</p><pre>  æ¥å—ä¸€ä¸ª promise çš„æ•°ç»„  ç­‰å¾…æ‰€æœ‰è¿™äº› promise å®Œæˆ  è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå°†æ‰€æœ‰çš„ resolve ç»“æœæ”¾è¿›ä¸€ä¸ªæ•°ç»„é‡Œ  åªè¦æœ‰ä¸€ä¸ª  promise å¤±è´¥/rejectedï¼Œè¿™ä¸ªæ–°çš„ promise å°†ä¼šè¢« rejected</pre><p>ä¸‹ä¾‹å±•ç¤ºäº†æ‰€æœ‰ promise éƒ½ resolve çš„æƒ…å†µï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> prom1 = <span class="built_in">Promise</span>.resolve(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> prom2 = fetchServerStatus(); <span class="comment">// returns a promise of &#123;statusCode: 200&#125;</span></span><br><span class="line"></span><br><span class="line">Proimise.all([prom1, prom2])</span><br><span class="line">.then([val1, val2] =&gt; &#123; <span class="comment">// notice that it resolves into an Array</span></span><br><span class="line">    <span class="built_in">console</span>.log(val1); <span class="comment">// 5</span></span><br><span class="line">    <span class="built_in">console</span>.log(val2.statusCode); <span class="comment">// 200</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸‹ä¾‹å±•ç¤ºæœ‰ä¸€ä¸ªå¤±è´¥çš„æƒ…å†µï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> prom1 = <span class="built_in">Promise</span>.resolve(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> prom2 = fetchServerStatus(); <span class="comment">// returns a promise of &#123;statusCode: 200&#125;</span></span><br><span class="line"></span><br><span class="line">Proimise.all([prom1, prom2])</span><br><span class="line">.then([val1, val2] =&gt; &#123; <span class="comment">// notice that it resolves into an Array</span></span><br><span class="line">    <span class="built_in">console</span>.log(val1); <span class="comment">// 5</span></span><br><span class="line">    <span class="built_in">console</span>.log(val2.statusCode); <span class="comment">// 200</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š<code>Promise.all</code> æ˜¯ä¸€ç‚¹ä¸ç¬¨ï¼Œåªè¦æœ‰ä¸€ä¸ª promise è¢« reject äº†ï¼Œå®ƒå°±ç›´æ¥ rejectï¼Œä¸ä¼šç­‰åˆ°å…¶ä»– promise å®Œæˆã€‚</p></blockquote><h1 id="8-ä¸è¦å®³æ€•-reject-æˆ–è€…ä¸è¦åœ¨æ¯ä¸€ä¸ª-then-åé¢ä½¿ç”¨-catch"><a href="#8-ä¸è¦å®³æ€•-reject-æˆ–è€…ä¸è¦åœ¨æ¯ä¸€ä¸ª-then-åé¢ä½¿ç”¨-catch" class="headerlink" title="8. ä¸è¦å®³æ€• reject æˆ–è€…ä¸è¦åœ¨æ¯ä¸€ä¸ª .then åé¢ä½¿ç”¨ .catch"></a>8. ä¸è¦å®³æ€• reject æˆ–è€…ä¸è¦åœ¨æ¯ä¸€ä¸ª .then åé¢ä½¿ç”¨ .catch</h1><p>æˆ‘ä»¬æ˜¯ä¸æ˜¯å¸¸å¸¸æ„Ÿåˆ°æœ‰å¾ˆå¤šéšè—çš„é”™è¯¯æ²¡æœ‰è¢«å¤„ç†ï¼Ÿ</p><p>ä¸ç”¨æ‹…å¿ƒåƒä¸‹é¢è¿™æ ·å†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> fetchSomeData(...);</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥åœ¨ä»»ä½•ä½ æƒ³å¤„ç†çš„åœ°æ–¹è§£å†³æˆ–è€…å»¶ç»­ rejectionã€‚</p><p><b>å¤„ç†æ‰ rejection</b><br>è¿™å¾ˆç®€å•ï¼Œåœ¨ <code>.catch</code> å›è°ƒä¸­ï¼Œæ— è®ºä½ è¿”å›ä»€ä¹ˆéƒ½ä¼šå˜æˆ resolveï¼Œé™¤éä½ è¿”å›ä¸€ä¸ª <code>Promise.reject</code>ï¼Œæ‰ä¼šå»¶ç»­ rejectionã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="number">5.</span>length) <span class="comment">// &lt;-- something wrong happenned here</span></span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>;  <span class="comment">// &lt;-- making javascript great again</span></span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(r); <span class="comment">// 5</span></span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e); <span class="comment">// this function will never be called :)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><b>reject rejection</b><br>reject rejection çš„æ–¹æ³•å°±æ˜¯ä»€ä¹ˆéƒ½ä¸åšã€‚é€šå¸¸ï¼Œçˆ¶å‡½æ•°æ¯”èµ·å½“å‰å‡½æ•°æ›´æ“…é•¿å¤„ç† rejectionã€‚</p><p>è¦è®°ä½ä¸€ä¸ªè¦ç‚¹ï¼Œä¸€æ—¦ä½ å†™äº† <code>.catch</code> å°±æ„å‘³ç€ rejection å·²ç»è¢«å¤„ç†äº†ï¼Œè¿™ä¸åŒæ­¥çš„ <code>try/catch</code> ç±»ä¼¼ã€‚</p><p>å¦‚æœä½ ç¡®å®æƒ³è¦é˜»æ–­ rejectionï¼ˆæˆ‘å¼ºçƒˆä¸æ¨èè¿™ä¹ˆåšï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="number">5.</span>length) <span class="comment">// &lt;-- something wrong happenned here</span></span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  errorLogger(e); <span class="comment">// do something impure</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(e); <span class="comment">// reject it, Yes you can do that!</span></span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(r); <span class="comment">// this .then (or any subsequent .then) will never be called as we rejected it above :)</span></span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e); <span class="comment">//&lt;-- it becomes this catch's problem</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>.then(x,y)</code> å’Œ <code>then(x).catch(x)</code></p><p><code>.then</code> æ¥å—ç¬¬äºŒä¸ªå›è°ƒå‚æ•°æ¥å¤„ç†é”™è¯¯ã€‚è™½ç„¶ä¸ <code>then(x).catch(x)</code> çœ‹ä¸€èµ·ç±»ä¼¼ï¼Œä½†å´æœ‰æ‰€ä¸åŒï¼Œä¸åŒç‚¹åœ¨äºå¯æ•è·çš„é”™è¯¯ã€‚</p><p>ä¸‹é¢ä¾‹å­å¾ˆå¥½åœ°è¯´äº†è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'something wrong happened'</span>));</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.error(e); <span class="comment">// something wrong happened</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'something wrong happened'</span>));</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="comment">// callback handles error coming from the chain above the current `.then`</span></span><br><span class="line">    <span class="built_in">console</span>.error(e); <span class="comment">// no error logged</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="9-é¿å…-then-åµŒå¥—"><a href="#9-é¿å…-then-åµŒå¥—" class="headerlink" title="9. é¿å… .then åµŒå¥—"></a>9. é¿å… <code>.then</code> åµŒå¥—</h1><p>è¿™ä¸ªåŸåˆ™ç†è§£èµ·æ¥å¾ˆç®€å•ï¼Œå°±æ˜¯é¿å…åœ¨ <code>.then</code> é‡Œé¢ç»§ç»­ä½¿ç”¨ <code>.then</code> æˆ–è€… .catchã€‚ç›¸ä¿¡æˆ‘ï¼Œè¿™ç»å¯¹æ˜¯å¯ä»¥é¿å…çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç”¨æ³•</span></span><br><span class="line">request(opts).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.statusCode === <span class="number">400</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> request(opts)</span><br><span class="line">      .then(<span class="function"><span class="params">r</span> =&gt;</span> r.text())</span><br><span class="line">      .catch(<span class="function"><span class="params">err2</span> =&gt;</span> <span class="built_in">console</span>.error(err2));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ç”¨æ³•</span></span><br><span class="line">request(opts)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.statusCode === <span class="number">400</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> request(opts);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">r</span> =&gt;</span> r.text())</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.erro(err));</span><br></pre></td></tr></table></figure><p>å°±ç®—æ˜¯å¦‚ä¸‹è¿™ç§æƒ…å†µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>Promise.all</code> æ¥è§£å†³ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="params">myVal</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> promA = foo(myVal);</span><br><span class="line">    <span class="keyword">const</span> promB = anotherPromMake(myVal);</span><br><span class="line">    <span class="keyword">return</span> promA</span><br><span class="line">          .then(<span class="function"><span class="params">valA</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> promB.then(<span class="function"><span class="params">valB</span> =&gt;</span> hungryFunc(valA, valB)); <span class="comment">// very hungry!</span></span><br><span class="line">          &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.then(<span class="function"><span class="params">myVal</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> promA = foo(myVal);</span><br><span class="line">    <span class="keyword">const</span> promB = anotherPromMake(myVal);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.all([prom, anotherProm])</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">[valA, valB]</span>) =&gt;</span> &#123;   <span class="comment">// putting ES6 destructing to good use</span></span><br><span class="line">    <span class="built_in">console</span>.log(valA, valB) <span class="comment">// all the resolved values</span></span><br><span class="line">    <span class="keyword">return</span> hungryFunc(valA, valB)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼ŒçœŸå¿ƒå¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åˆ°ä½ æ›´å¥½åœ°ç†è§£ Promiseï¼</p><p><a href="https://qianduan.group/posts/5a9be8980cf6b624d2239cbd" title="Forked from https://qianduan.group - å‰ç«¯å¤–åˆŠè¯„è®º" target="_blank" rel="noopener">åŸæ–‡</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&quot;https://dev.to/kepta/promising-promise-tips--c8f&quot; title=&quot;9 Promising Promise Tips&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;9 Promising Promise Tips&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å·¥ç¨‹å¸ˆä»¬ï¼Œä½ ä»¬æ€»è¯´ &lt;code&gt;Pormise&lt;/code&gt; å¥½ç”¨ï¼ä½†æœ‰æ—¶å€™ç”¨èµ·æ¥æ˜¯ä¸æ˜¯è¿˜å¾ˆæ‡µé€¼ã€‚æœ¬æ–‡ä¼ æˆç»™ä½ ä¹æ¡å®ç”¨çš„ Promise ä½¿ç”¨æŠ€å·§ï¼Œå¸®åŠ©ä½ å’Œå®ƒå»ºç«‹èµ·è‰¯å¥½çš„å…³ç³»ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://res.cloudinary.com/practicaldev/image/fetch/s--zlauxVhZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/6966254/36483828-3e361d88-16e5-11e8-9f11-cbe99d719066.png&quot; alt=&quot;alt text&quot; title=&quot;Promise&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;1-ä½ å¯ä»¥åœ¨-then-å›è°ƒé‡Œè¿”å›-Promise&quot;&gt;&lt;a href=&quot;#1-ä½ å¯ä»¥åœ¨-then-å›è°ƒé‡Œè¿”å›-Promise&quot; class=&quot;headerlink&quot; title=&quot;1. ä½ å¯ä»¥åœ¨ .then å›è°ƒé‡Œè¿”å› Promise&quot;&gt;&lt;/a&gt;1. ä½ å¯ä»¥åœ¨ &lt;code&gt;.then&lt;/code&gt; å›è°ƒé‡Œè¿”å› Promise&lt;/h1&gt;&lt;blockquote&gt;&lt;p&gt;æ˜¯çš„ï¼ä½ å¯ä»¥ .then å›è°ƒé‡Œè¿”å› Promiseï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œä¸”ï¼Œè¿”å›çš„ promise ä¼šåœ¨æ¥ä¸‹æ¥çš„ &lt;code&gt;.then&lt;/code&gt; è¢«è‡ªåŠ¨æ‰“å¼€ï¼ˆunwrappedï¼‰ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;.then(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;r&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// è¿™æ˜¯ä¸€ä¸ª &amp;#123; statusCode: 200 &amp;#125; promise&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; serverStatusPromise(r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.then(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 200ï¼›æ³¨æ„ä¸Šé¢çš„ promise è¢«è‡ªåŠ¨ unwrap äº†&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(resp.statusCode);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Javascript" scheme="https://blog.v2next.com/tags/Javascript/"/>
    
      <category term="ES6" scheme="https://blog.v2next.com/tags/ES6/"/>
    
      <category term="Promise" scheme="https://blog.v2next.com/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>Parcelï¼Œé›¶é…ç½®å¼€å‘ React åº”ç”¨ï¼</title>
    <link href="https://blog.v2next.com/2017/12/28/Create-a-React-app-with-zero-configuration-using-Parcel/"/>
    <id>https://blog.v2next.com/2017/12/28/Create-a-React-app-with-zero-configuration-using-Parcel/</id>
    <published>2017-12-28T03:27:17.000Z</published>
    <updated>2019-10-20T07:59:34.695Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è¯‘è‡ª <a href="http://blog.jakoblind.no/react-parcel/" title="Create a React app with zero configuration using Parcel" target="_blank" rel="noopener">Create a React app with zero configuration using Parcel</a> å·²ç»ç»å†ä¸‰å››å¹´çš„å‘å±•ï¼Œç¤¾åŒºå’ŒæŠ€æœ¯è¶‹äºæˆç†Ÿï¼Œå®ƒå·²ç»æˆä¸ºäº†å‰ç«¯å¼€å‘ä¸­çš„å¿…å¤‡å·¥å…·ã€‚é‚£é—®é¢˜æ¥äº†ï¼Œä¼šæœ‰æ–°çš„å·¥å…·æ¥æŒ‘æˆ˜ webpack çš„åœ°ä½å—ï¼Ÿå„ä½ä¸å¦¨çœ‹çœ‹æœ¬æ–‡çš„ Parcelï¼Œè¯´ä¸å®šå°±æ˜¯æœªæ¥çš„ä¸»è§’ã€‚</p></blockquote><p>ä¸€å¼€å§‹ä½¿ç”¨ React çš„ç—›è‹¦æƒ³å¿…å¤§å®¶éƒ½ç»å†è¿‡ã€‚åœ¨çœŸæ­£è¿›å…¥ç¼–ç ä¹‹å‰ï¼Œéœ€è¦èŠ±å¤§é‡çš„æ—¶é—´ææ¸…æ¥šå¦‚ä½•é…ç½® webpackã€‚</p><p><a href="https://github.com/facebookincubator/create-react-app" title="Create React App" target="_blank" rel="noopener">Create React App</a> é¡¹ç›®çš„æµè¡Œå°±æ˜¯å› ä¸ºå®ƒç®€åŒ–äº†é…ç½®ï¼ŒåŠ å¿«äº†é¡¹ç›®åˆå§‹åŒ–çš„é€Ÿåº¦ã€‚ä¿—è¯è¯´ï¼Œæˆä¹Ÿé£äº‘ï¼Œè´¥ä¹Ÿé£äº‘ã€‚å°† webpack é…ç½®éšè—æ—¢æ˜¯å®ƒçš„ä¼˜ç‚¹ï¼Œä¹Ÿæ˜¯å®ƒçš„ç¼ºç‚¹ã€‚éšç€é¡¹ç›®ä¸æ–­åœ°æ‰©å¤§ï¼Œä½ å¯èƒ½æƒ³åšä¸€äº›é«˜çº§é…ç½®ï¼Œå°±éœ€è¦å°† webpack é…ç½®ä» Create React App â€œæ‹–â€ï¼ˆejectï¼‰å‡ºæ¥ï¼Œè¿™æ®µé…ç½®å¼‚å¸¸å¤æ‚ï¼Œè¿™å°±å›åˆ°äº†è€é—®é¢˜â€”â€”webpack è¿˜æ˜¯å¾—å­¦ä¹ å•Šï¼</p><p>æœ€è¿‘ï¼Œä¸€ä¸ªæ–°çš„æ„å»ºå·¥å…· <a href="https://parceljs.org/" title="Parcel" target="_blank" rel="noopener">Parcel</a> å‡ºç°äº†ï¼Œå®ƒæ˜¯é›¶é…ç½®çš„ï¼çœŸçš„ä¸æ•¢ç›¸ä¿¡æœ‰è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼Œçœ‹èµ·æ¥æ‰€æœ‰é—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£ã€‚</p><a id="more"></a><p>æˆ‘åœ¨ä¸€ä¸ªå¤§é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨ Parcelï¼Œæ•ˆæœæ‹”ç¾¤ã€‚build å‡ºåŒ…ç»è¿‡ä¼˜åŒ–ï¼Œè¦çŸ¥é“ç”¨ webpack çš„æ—¶å€™ï¼Œæˆ‘éœ€è¦èŠ±æ•°å¤©æ—¶é—´æ¥å®ç°ç›¸åŒçš„ä¼˜åŒ–ã€‚</p><p>æˆ‘æƒ³è¿™ä¸ªå·¥å…·æ½œåŠ›æ— é™ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒæ¥è½»æ¾æ­å»ºä¸€ä¸ª React åº”ç”¨ã€‚</p><h2 id="ä½¿ç”¨-Parcel-å¼€å‘-React-åº”ç”¨"><a href="#ä½¿ç”¨-Parcel-å¼€å‘-React-åº”ç”¨" class="headerlink" title="ä½¿ç”¨ Parcel å¼€å‘ React åº”ç”¨"></a>ä½¿ç”¨ Parcel å¼€å‘ React åº”ç”¨</h2><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª NPM é¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir react-parcel</span><br><span class="line"><span class="built_in">cd</span> react-parcel</span><br><span class="line">npm init</span><br></pre></td></tr></table></figure><p>npm init ä¼šè¯¢é—®ä½ ä¸€äº›é—®é¢˜ï¼Œç›´æ¥æŒ‰ enter é”®ä½¿ç”¨é»˜è®¤å€¼å³å¯ã€‚</p><p>ä¸‹ä¸€æ­¥å®‰è£… Reactã€babel å’Œ Parcel ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir react-parcel</span><br><span class="line"><span class="built_in">cd</span> react-parcel</span><br><span class="line">npm init</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»º .babelrc æ–‡ä»¶ï¼Œå‘Šè¯‰ parcel æˆ‘ä»¬ä½¿ç”¨ ES6 å’Œ React JSXï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"env"</span>, <span class="string">"react"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º React Appï¼Œå°±ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><p>index.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloMessage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mountNode = <span class="built_in">document</span>.getElementById(<span class="string">"app"</span>);</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">HelloMessage</span> <span class="attr">name</span>=<span class="string">"Jane"</span> /&gt;</span>, mountNode);</span></span><br></pre></td></tr></table></figure><p>index.html:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>React starter app<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œåªéœ€è¦åœ¨ package.json æ·»åŠ ä¸€ä¸ªå¯åŠ¨è„šæœ¬å°±å¯ä»¥æŠŠæˆ‘ä»¬çš„åº”ç”¨è·‘èµ·æ¥äº†ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "parcel index.html",</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æå®šï¼Œå¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure><p><a href="https://github.com/ericwdq/parcel-react" title="parcel-react - Github Repo" target="_blank" rel="noopener">parcel-react - Github Repo</a></p><p><a href="https://zhuanlan.zhihu.com/p/32375500?group_id=929116167755902976" title="Forked from çŸ¥ä¹" target="_blank" rel="noopener">åŸæ–‡</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&quot;http://blog.jakoblind.no/react-parcel/&quot; title=&quot;Create a React app with zero configuration using Parcel&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Create a React app with zero configuration using Parcel&lt;/a&gt; å·²ç»ç»å†ä¸‰å››å¹´çš„å‘å±•ï¼Œç¤¾åŒºå’ŒæŠ€æœ¯è¶‹äºæˆç†Ÿï¼Œå®ƒå·²ç»æˆä¸ºäº†å‰ç«¯å¼€å‘ä¸­çš„å¿…å¤‡å·¥å…·ã€‚é‚£é—®é¢˜æ¥äº†ï¼Œä¼šæœ‰æ–°çš„å·¥å…·æ¥æŒ‘æˆ˜ webpack çš„åœ°ä½å—ï¼Ÿå„ä½ä¸å¦¨çœ‹çœ‹æœ¬æ–‡çš„ Parcelï¼Œè¯´ä¸å®šå°±æ˜¯æœªæ¥çš„ä¸»è§’ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€å¼€å§‹ä½¿ç”¨ React çš„ç—›è‹¦æƒ³å¿…å¤§å®¶éƒ½ç»å†è¿‡ã€‚åœ¨çœŸæ­£è¿›å…¥ç¼–ç ä¹‹å‰ï¼Œéœ€è¦èŠ±å¤§é‡çš„æ—¶é—´ææ¸…æ¥šå¦‚ä½•é…ç½® webpackã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/facebookincubator/create-react-app&quot; title=&quot;Create React App&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Create React App&lt;/a&gt; é¡¹ç›®çš„æµè¡Œå°±æ˜¯å› ä¸ºå®ƒç®€åŒ–äº†é…ç½®ï¼ŒåŠ å¿«äº†é¡¹ç›®åˆå§‹åŒ–çš„é€Ÿåº¦ã€‚ä¿—è¯è¯´ï¼Œæˆä¹Ÿé£äº‘ï¼Œè´¥ä¹Ÿé£äº‘ã€‚å°† webpack é…ç½®éšè—æ—¢æ˜¯å®ƒçš„ä¼˜ç‚¹ï¼Œä¹Ÿæ˜¯å®ƒçš„ç¼ºç‚¹ã€‚éšç€é¡¹ç›®ä¸æ–­åœ°æ‰©å¤§ï¼Œä½ å¯èƒ½æƒ³åšä¸€äº›é«˜çº§é…ç½®ï¼Œå°±éœ€è¦å°† webpack é…ç½®ä» Create React App â€œæ‹–â€ï¼ˆejectï¼‰å‡ºæ¥ï¼Œè¿™æ®µé…ç½®å¼‚å¸¸å¤æ‚ï¼Œè¿™å°±å›åˆ°äº†è€é—®é¢˜â€”â€”webpack è¿˜æ˜¯å¾—å­¦ä¹ å•Šï¼&lt;/p&gt;
&lt;p&gt;æœ€è¿‘ï¼Œä¸€ä¸ªæ–°çš„æ„å»ºå·¥å…· &lt;a href=&quot;https://parceljs.org/&quot; title=&quot;Parcel&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Parcel&lt;/a&gt; å‡ºç°äº†ï¼Œå®ƒæ˜¯é›¶é…ç½®çš„ï¼çœŸçš„ä¸æ•¢ç›¸ä¿¡æœ‰è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼Œçœ‹èµ·æ¥æ‰€æœ‰é—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="React" scheme="https://blog.v2next.com/tags/React/"/>
    
      <category term="Parcel" scheme="https://blog.v2next.com/tags/Parcel/"/>
    
      <category term="Build System" scheme="https://blog.v2next.com/tags/Build-System/"/>
    
  </entry>
  
  <entry>
    <title>èŠä¸€èŠæ€§èƒ½ä¼˜åŒ–</title>
    <link href="https://blog.v2next.com/2017/12/27/Talk-about-performance-optimization/"/>
    <id>https://blog.v2next.com/2017/12/27/Talk-about-performance-optimization/</id>
    <published>2017-12-27T03:28:08.000Z</published>
    <updated>2019-10-20T07:59:34.695Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ç®¡æ˜¯åº”ä»˜å‰ç«¯é¢è¯•è¿˜æ˜¯æ”¹è¿›äº§å“ä½“éªŒï¼Œæ€§èƒ½ä¼˜åŒ–éƒ½æ˜¯èº²ä¸å¼€çš„è¯é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬å°±ç®€å•èŠä¸€èŠæ€§èƒ½ä¼˜åŒ–ã€‚</p><h2 id="ä¼ è¾“å¿«-vs-ä½“éªŒå¿«"><a href="#ä¼ è¾“å¿«-vs-ä½“éªŒå¿«" class="headerlink" title="ä¼ è¾“å¿« vs ä½“éªŒå¿«"></a>ä¼ è¾“å¿« vs ä½“éªŒå¿«</h2><p>ä¼˜åŒ–çš„ç›®çš„æ˜¯è®©ç”¨æˆ·æœ‰â€œå¿«â€çš„æ„Ÿå—ï¼Œé‚£å¦‚ä½•è®©ç”¨æˆ·æ„Ÿå—åˆ°å¿«å‘¢ï¼Ÿ</p><p>åŠ è½½é€Ÿåº¦çœŸçš„å¾ˆå¿«ï¼Œç”¨æˆ·æ‰“å¼€è¾“å…¥ç½‘å€æŒ‰ä¸‹å›è½¦ç«‹å³çœ‹åˆ°äº†é¡µé¢<br>åŠ è½½é€Ÿåº¦å¹¶æ²¡æœ‰å˜å¿«ï¼Œä½†ç”¨æˆ·æ„Ÿè§‰ä½ çš„ç½‘ç«™å¾ˆå¿«</p><h2 id="ä¼ è¾“å¿«"><a href="#ä¼ è¾“å¿«" class="headerlink" title="ä¼ è¾“å¿«"></a>ä¼ è¾“å¿«</h2><p>æ‰€è°“çš„çœŸå¿«å°±æ˜¯ç½‘ç«™èµ„æºä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç”¨æˆ·æµè§ˆå™¨ï¼Œé‚£å¦‚ä½•å»åšå‘¢ï¼Ÿæˆ‘ä»¬å…ˆç²—ç•¥å®šä¸€äº›åŸåˆ™ï¼š</p><ul><li>ä¼ è¾“çš„å†…å®¹ä½“ç§¯è¦å°</li><li>ä¼ è¾“çš„å†…å®¹æ•°é‡è¦å°‘</li><li>ç½‘é€Ÿè¦è¶³å¤Ÿå¿«</li><li>æœåŠ¡å™¨å“åº”è¦åŠæ—¶</li><li>èƒ½é‡å¤åˆ©ç”¨çš„èµ„æºè¦åˆ©ç”¨å¥½</li><li>æš‚æ—¶ä¸éœ€è¦çš„èµ„æºå…ˆä¸è¦</li><li>å°†æ¥éœ€è¦çš„èµ„æºæŠ½ç©ºè¦</li><li>ä¸‹é¢å°±èƒ½é¡ºè—¤æ‘¸ç“œï¼Œåšä¸ªç»†åŒ–</li></ul><a id="more"></a><ol><li>ä¼ è¾“çš„å†…å®¹ä½“ç§¯è¦å°</li><li>å›¾ç‰‡è¦å‹ç¼©</li><li>å›¾ç‰‡æ ¹æ®æ”¯æŒæƒ…å†µé€‰æ‹©ä½“ç§¯æ›´å°çš„æ ¼å¼(å¦‚ webp)</li><li>cssã€js å†…å®¹å‹ç¼©</li><li>æœåŠ¡ç«¯å¼€å¯ Gzipï¼Œåœ¨ä¼ è¾“æ•°æ®ä¹‹å‰å†æ¬¡å‹ç¼©</li><li>ä¼ è¾“çš„å†…å®¹æ•°é‡è¦å°‘</li><li>å›¾ç‰‡å›¾æ ‡åˆå¹¶ï¼ˆcss spriteï¼‰ã€svg å›¾æ ‡åˆå¹¶ï¼ˆsvg spriteï¼‰</li><li>cssã€js æ–‡ä»¶æ‰“åŒ…åˆå¹¶</li><li>ç½‘é€Ÿè¦è¶³å¤Ÿå¿«</li><li>æœåŠ¡å™¨å‡ºå£å¸¦å®½è¦å¤Ÿ</li><li>è€ƒè™‘åˆ°å—åŒ—å·®å¼‚ã€è¿è¥å•†å·®å¼‚ï¼Œåœ¨ä¸åŒåœ°åŒºéƒ¨ç½²æœåŠ¡å™¨</li><li>é™æ€èµ„æºæ”¾ CDN</li><li>æœåŠ¡å™¨å“åº”è¦åŠæ—¶</li><li>æ¥å£å“åº”é€Ÿåº¦è¦å¿«(æ•°æ®åº“ä¼˜åŒ–ã€æŸ¥è¯¢ä¼˜åŒ–ã€ç®—æ³•ä¼˜åŒ–)</li><li>cpuã€å†…å­˜ã€ç¡¬ç›˜è¯»å†™ä¸è¦æˆä¸ºç“¶é¢ˆï¼›å¤šåŠ å‡ å°æœºå™¨</li><li>é‡è¦é¡µé¢(é¦–é¡µ)é™æ€åŒ–ã€‚æœåŠ¡ç«¯æå‰æ¸²æŸ“åé¦–é¡µç”Ÿæˆé™æ€é¡µé¢ï¼Œç”¨æˆ·è®¿é—®é¦–é¡µç›´æ¥è¿”å›é™æ€é¡µé¢ï¼Œä¸éœ€è¦åƒå…¶ä»–é¡µé¢é‚£æ ·è¿˜éœ€åŠ è½½ cssã€js å†è·å–æ•°æ®æ¸²æŸ“å±•ç¤º</li><li>èƒ½é‡å¤åˆ©ç”¨çš„èµ„æºè¦åˆ©ç”¨å¥½</li><li>æœåŠ¡å™¨è®¾ç½®åˆé€‚çš„é™æ€èµ„æºç¼“å­˜æ—¶é—´</li><li>å‰ç«¯æ–‡ä»¶æ‰“åŒ…æ—¶åšåˆç†çš„åˆ†å—ï¼Œè®©å…¬å…±çš„èµ„æºç¼“å­˜åèƒ½è¢«å¤šä¸ªé¡µé¢å¤ç”¨</li><li>æš‚æ—¶ä¸éœ€è¦çš„èµ„æºå…ˆä¸è¦</li><li>å›¾ç‰‡æ‡’åŠ è½½</li><li>åŠŸèƒ½ã€æ¨¡å—ã€ç»„ä»¶æŒ‰éœ€åŠ è½½</li><li>å°†æ¥éœ€è¦çš„èµ„æºæŠ½ç©ºå…ˆæ‹¿åˆ°</li></ol><p>1.DNS é¢„è§£æ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"dns-prefetch"</span> <span class="attr">href</span>=<span class="string">"//jirengu.com"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>2.é¢„è¿æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preconnect"</span> <span class="attr">href</span>=<span class="string">"//jirengu.com"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>3.é¢„è·å–</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"prefetch"</span> <span class="attr">href</span>=<span class="string">"image.png"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>4.é¢„æ¸²æŸ“</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"prerender"</span> <span class="attr">href</span>=<span class="string">"//xiedaimala.com"</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä½“éªŒå¿«"><a href="#ä½“éªŒå¿«" class="headerlink" title="ä½“éªŒå¿«"></a>ä½“éªŒå¿«</h2><p>æ‰€è°“çš„ä½“éªŒå¿«å°±æ˜¯è®©ç”¨æˆ·è§‰å¾—ç½‘ç«™çš„äº¤äº’æ˜¯â€œæµç•…çš„â€ã€â€œèˆ’é€‚çš„â€ã€‚æ¯”å¦‚</p><ol><li>æ»šåŠ¨é¡µé¢ä¸è¦æœ‰è¿Ÿæ»æ„Ÿ</li><li>å¯¹äºçŸ­æ—¶è¿ç»­å¤§é‡è§¦å‘çš„æ“ä½œè¦åšèŠ‚æµ</li><li>ä¸€äº›å¸¸è§æ“ä½œä¸è¦æ„Ÿè§‰æ‹–æ³¥å¸¦æ°´</li><li>DOM çš„æ“ä½œä¸è¦è¿‡äºé¢‘ç¹</li><li>ä¸è¦å‡ºç°å†…å­˜æ³„éœ²</li><li>ä¼˜åŒ–å¤æ‚è¿ç®—</li><li>åŠ¨ç”»ä¸è¦å¡é¡¿</li><li>å¤šç”¨ CSS åŠ¨ç”»ï¼Œå°‘ç”¨ JS åŠ¨ç”»</li><li>å¼€å¯ç¡¬ä»¶åŠ é€Ÿ</li><li>ä¸è¦ç”¨ setTimeout/setInterval å»æ¨¡æ‹ŸåŠ¨ç”»</li><li>åŠ¨ç”»æˆ–è€…è¿‡æ¸¡çš„æ‰§è¡Œæ—¶é—´ä¸è¦å¤ªä¹…</li></ol><h2 id="æ€§èƒ½ä¼˜åŒ–çš„å»ºè®®"><a href="#æ€§èƒ½ä¼˜åŒ–çš„å»ºè®®" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–çš„å»ºè®®"></a>æ€§èƒ½ä¼˜åŒ–çš„å»ºè®®</h2><p>è‡†æƒ³çš„ä¼˜åŒ–ä¸æ˜¯ä¼˜åŒ–ï¼Œæ— æ˜æ˜¾æˆæ•ˆçš„ä¼˜åŒ–ä¸æ˜¯ä¼˜åŒ–ã€‚æµè§ˆå™¨çš„æ€§èƒ½å·²ç»è¶³å¤Ÿå¿«ï¼Œä¸è¦å› ä¸ºâ€œè¿‡æ¸¡ä¼˜åŒ–â€ç‰ºç‰²ä»£ç çš„å¯è¯»æ€§</p><p>å…ˆåšç®€å•è§æ•ˆå¿«çš„ä¼˜åŒ–ï¼Œå†åšå¤æ‚è§æ•ˆæ…¢çš„ä¼˜åŒ–ã€‚ä¸€å¼ æœªå‹ç¼©çš„å¤§å›¾ç‰‡å¯èƒ½æŠµæ¶ˆè¾›è¾›è‹¦è‹¦åšçš„å…¨éƒ¨å…¶ä»–æŠ€æœ¯ä¼˜åŒ–</p><p><a href="https://zhuanlan.zhihu.com/p/32150769?group_id=926470274442936320" title="Forked from çŸ¥ä¹" target="_blank" rel="noopener">åŸæ–‡</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ç®¡æ˜¯åº”ä»˜å‰ç«¯é¢è¯•è¿˜æ˜¯æ”¹è¿›äº§å“ä½“éªŒï¼Œæ€§èƒ½ä¼˜åŒ–éƒ½æ˜¯èº²ä¸å¼€çš„è¯é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬å°±ç®€å•èŠä¸€èŠæ€§èƒ½ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¼ è¾“å¿«-vs-ä½“éªŒå¿«&quot;&gt;&lt;a href=&quot;#ä¼ è¾“å¿«-vs-ä½“éªŒå¿«&quot; class=&quot;headerlink&quot; title=&quot;ä¼ è¾“å¿« vs ä½“éªŒå¿«&quot;&gt;&lt;/a&gt;ä¼ è¾“å¿« vs ä½“éªŒå¿«&lt;/h2&gt;&lt;p&gt;ä¼˜åŒ–çš„ç›®çš„æ˜¯è®©ç”¨æˆ·æœ‰â€œå¿«â€çš„æ„Ÿå—ï¼Œé‚£å¦‚ä½•è®©ç”¨æˆ·æ„Ÿå—åˆ°å¿«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åŠ è½½é€Ÿåº¦çœŸçš„å¾ˆå¿«ï¼Œç”¨æˆ·æ‰“å¼€è¾“å…¥ç½‘å€æŒ‰ä¸‹å›è½¦ç«‹å³çœ‹åˆ°äº†é¡µé¢&lt;br&gt;åŠ è½½é€Ÿåº¦å¹¶æ²¡æœ‰å˜å¿«ï¼Œä½†ç”¨æˆ·æ„Ÿè§‰ä½ çš„ç½‘ç«™å¾ˆå¿«&lt;/p&gt;
&lt;h2 id=&quot;ä¼ è¾“å¿«&quot;&gt;&lt;a href=&quot;#ä¼ è¾“å¿«&quot; class=&quot;headerlink&quot; title=&quot;ä¼ è¾“å¿«&quot;&gt;&lt;/a&gt;ä¼ è¾“å¿«&lt;/h2&gt;&lt;p&gt;æ‰€è°“çš„çœŸå¿«å°±æ˜¯ç½‘ç«™èµ„æºä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç”¨æˆ·æµè§ˆå™¨ï¼Œé‚£å¦‚ä½•å»åšå‘¢ï¼Ÿæˆ‘ä»¬å…ˆç²—ç•¥å®šä¸€äº›åŸåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼ è¾“çš„å†…å®¹ä½“ç§¯è¦å°&lt;/li&gt;
&lt;li&gt;ä¼ è¾“çš„å†…å®¹æ•°é‡è¦å°‘&lt;/li&gt;
&lt;li&gt;ç½‘é€Ÿè¦è¶³å¤Ÿå¿«&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å“åº”è¦åŠæ—¶&lt;/li&gt;
&lt;li&gt;èƒ½é‡å¤åˆ©ç”¨çš„èµ„æºè¦åˆ©ç”¨å¥½&lt;/li&gt;
&lt;li&gt;æš‚æ—¶ä¸éœ€è¦çš„èµ„æºå…ˆä¸è¦&lt;/li&gt;
&lt;li&gt;å°†æ¥éœ€è¦çš„èµ„æºæŠ½ç©ºè¦&lt;/li&gt;
&lt;li&gt;ä¸‹é¢å°±èƒ½é¡ºè—¤æ‘¸ç“œï¼Œåšä¸ªç»†åŒ–&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Frontend" scheme="https://blog.v2next.com/tags/Frontend/"/>
    
      <category term="Performance" scheme="https://blog.v2next.com/tags/Performance/"/>
    
  </entry>
  
  <entry>
    <title>webpackçš„ä½¿ç”¨</title>
    <link href="https://blog.v2next.com/2017/08/10/Use-webpack/"/>
    <id>https://blog.v2next.com/2017/08/10/Use-webpack/</id>
    <published>2017-08-10T08:45:34.000Z</published>
    <updated>2019-10-20T07:59:34.696Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€ç¯‡å¯¹ webpack çš„ä½¿ç”¨ä»‹ç»ï¼Œé‡Œé¢çš„å†…å®¹å¤šæ˜¯ä¾æ®å®˜ç½‘ä¾‹å­å†™å‡ºçš„ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æŒ‡å‡ºã€‚<br>å‚è€ƒï¼š<br><a href="https://segmentfault.com/a/1190000008159877" target="_blank" rel="noopener">https://segmentfault.com/a/1190000008159877</a><br><a href="http://webpack.github.io/docs/" target="_blank" rel="noopener">http://webpack.github.io/docs/</a></p></blockquote><p><a href="https://zhuanlan.zhihu.com/p/27953441?utm_medium=social&amp;utm_source=wechat_session" title="Forked from çŸ¥ä¹ä¸“æ " target="_blank" rel="noopener">åŸæ–‡</a></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç¯‡å¯¹ webpack çš„ä½¿ç”¨ä»‹ç»ï¼Œé‡Œé¢çš„å†…å®¹å¤šæ˜¯ä¾æ®å®˜ç½‘ä¾‹å­å†™å‡ºçš„ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æŒ‡å‡ºã€‚&lt;br&gt;å‚è€ƒï¼š&lt;br&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000008159877&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://segmentfault.com/a/1190000008159877&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://webpack.github.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://webpack.github.io/docs/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/27953441?utm_medium=social&amp;amp;utm_source=wechat_session&quot; title=&quot;Forked from çŸ¥ä¹ä¸“æ &quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Javascript" scheme="https://blog.v2next.com/tags/Javascript/"/>
    
      <category term="webpack" scheme="https://blog.v2next.com/tags/webpack/"/>
    
      <category term="Module" scheme="https://blog.v2next.com/tags/Module/"/>
    
  </entry>
  
  <entry>
    <title>æ¢ç©¶Babelç”Ÿæ€</title>
    <link href="https://blog.v2next.com/2017/08/08/Understand-Babel-ecosystem/"/>
    <id>https://blog.v2next.com/2017/08/08/Understand-Babel-ecosystem/</id>
    <published>2017-08-08T08:40:04.000Z</published>
    <updated>2019-10-20T07:59:34.695Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä» babel çš„åŸºç¡€çŸ¥è¯†ï¼Œä½¿ç”¨æ–¹æ³•ï¼Œå¦‚ä½•é…ç½®ï¼Œè§£æåŸç†å’Œå¦‚ä½•å¼€å‘ babel æ’ä»¶äº”ä¸ªæ–¹é¢è®©ä½ äº†è§£ bablelï¼Œä»¥ä¾¿ç”¨ babel æå‡å¼€å‘æ•ˆç‡ã€‚<br>ä½¿ç”¨æ–¹æ³•å’Œå¦‚ä½•é…ç½®ç« èŠ‚å°†å‘Šè¯‰ä½ åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ babelï¼Œè§£æåŸç†å’Œå¦‚ä½•å¼€å‘ babel æ’ä»¶ç« èŠ‚å¸®åŠ©ä½ å¼€å‘è‡ªå·±çš„ babel æ’ä»¶ã€‚</p></blockquote><h2 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h2><p>ç›¸ä¿¡ç”¨ es6/7 å†™ä»£ç çš„åŒå­¦å¯¹ babel åº”è¯¥ä¸ä¼šé™Œç”Ÿï¼ŒBabel æ˜¯ç”¨äºç¼–å†™ä¸‹ä¸€ä»£ JavaScript çš„ç¼–è¯‘å™¨ã€‚JavaScript ä½œä¸ºä¸€é—¨è¯­è¨€ï¼Œä¸æ–­å‘å±•æ›´æ–°ï¼Œæ–°çš„ç‰¹æ€§å±‚å‡ºä¸ç©·ï¼Œæƒ³è¦æå‰ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¿…é¡»å€ŸåŠ©åƒ babel è¿™æ ·çš„ç¼–è¯‘å™¨ã€‚ç›®å‰ä¸»æµæµè§ˆå™¨æœ€æ–°ç‰ˆæœ¬éƒ½åŸºæœ¬å®ç°äº†å¯¹ es5/6 è¯­æ³•çš„å®Œå…¨æ”¯æŒï¼Œå…·ä½“è¯·å‚è€ƒå…¼å®¹æ€§è¡¨æ ¼,è§ <a href="http://kangax.github.io/compat-table/es6/" target="_blank" rel="noopener">http://kangax.github.io/compat-table/es6/</a></p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/Wvz7HBpajwwZgScY87QSIbWg0lb4QicfNGqZJia3KRXEStwzClntN7u6icvfliaqtj2xhdtiaQ5KOx74RBLNAI5zWLA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="alt text" title="Babel"></p><p>å½“ä½ éœ€è¦ä½¿ç”¨ es7+è¯­æ³•ç‰¹æ€§æˆ–è€…å…¼å®¹æ—§ç‰ˆæœ¬æµè§ˆå™¨çš„éœ€æ±‚æ—¶ï¼Œä½ å°±éœ€è¦ä¸€æ¬¾ç¼–è¯‘å™¨æ”¯æŒå°† ES6/7 ç¼–è¯‘æˆæµè§ˆå™¨æ”¯æŒçš„ ES5/ES3 ä»£ç ã€‚Babel æ˜¯ä½¿ç”¨æœ€å¤šçš„ä¸€ä¸ªã€‚é™¤äº†ç¼–è¯‘å™¨ï¼Œbabel è¿˜æ”¯æŒè¯­æ³•æ‰©å±•ï¼ˆå¦‚ react çš„ JSX è¯­æ³•ï¼ŒReact ç°åœ¨å·²ç»ä¾èµ– babel ç¼–è¯‘å®ƒçš„ JSX è¯­æ³•ä¸”å¼ƒç”¨äº†å®ƒåŸæœ‰çš„è‡ªå®šä¹‰å·¥å…·ï¼‰å’Œé™æ€è¯­æ³•åˆ†æï¼ˆè¯­æ³•æ£€æŸ¥ï¼Œä»£ç é«˜äº®ï¼Œå‹ç¼©ï¼Œç»Ÿä¸€ä»£ç é£æ ¼ç­‰ï¼‰ã€‚</p><a id="more"></a><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p>æœ¬æ–‡æåˆ°çš„æ‰€æœ‰é…ç½®çš„éƒ½æ˜¯ babel6ï¼Œbabel6 åºŸå¼ƒäº† babel åŒ…ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å„ç§æ¨¡å—åŒ…ï¼Œbabel6 æŠŠæ‰€æœ‰è½¬æ¢å™¨éƒ½åˆ†ç¦»å‡ºå»ä»¥æ’ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œéœ€è¦å•ç‹¬å®‰è£…æ’ä»¶åŒ…ã€‚æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹ babel ä¸ä¼šå¯¹æºç åšä»»ä½•è½¬æ¢ï¼Œéœ€è¦è‡ªå·±é…ç½®</p><h4 id="é›†æˆåˆ°å·¥å…·ä¸­"><a href="#é›†æˆåˆ°å·¥å…·ä¸­" class="headerlink" title="é›†æˆåˆ°å·¥å…·ä¸­"></a>é›†æˆåˆ°å·¥å…·ä¸­</h4><p><b>Webpack</b></p><pre>å®‰è£…ï¼šnpm install â€“save-dev babel-loader babel-core1.webpacké…ç½®ï¼šmodule: {  rules: [    { test: /\.js$/, exclude: /node_modules/, loader: "babel-loader" }  ]}2.é…ç½®.babelrcæ–‡ä»¶å®‰è£…æ’ä»¶ï¼šnpm install babel-preset-es2015 babel-plugin-transform-runtime.babelrc{  "presets": [â€œes2015â€],  "plugins": [â€œtransform-runtimeâ€]}</pre><p><b>fis3:</b></p><pre>â‘   å®‰è£…ï¼šnpm install â€“save-dev babel-core fis-parser-babel-6.xâ‘¡  é…ç½®fis-confæ–‡ä»¶ï¼šfis.match('src/**.js', {           isMod: true,           preprocessor: fis.plugin('js-require-css'),           parser: fis.plugin('babel-6.x', {               sourceMaps: true,           }),           rExt: '.js'});â‘¢  åˆ›å»º.babelrcæ–‡ä»¶åŒä¸Šå…¶ä»–å·¥å…·è¯·å‚è§å®‰è£…ç»„åˆæ–¹å¼ã€‚http://babeljs.io/docs/setup/#installation</pre><h4 id="å‘½ä»¤è¡Œä¸‹ä½¿ç”¨-babel-å‘½ä»¤ç¼–è¯‘"><a href="#å‘½ä»¤è¡Œä¸‹ä½¿ç”¨-babel-å‘½ä»¤ç¼–è¯‘" class="headerlink" title="å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ babel å‘½ä»¤ç¼–è¯‘"></a>å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ babel å‘½ä»¤ç¼–è¯‘</h4><h4 id="babel-registerï¼Œbabel-node"><a href="#babel-registerï¼Œbabel-node" class="headerlink" title="babel-registerï¼Œbabel-node"></a>babel-registerï¼Œbabel-node</h4><p><a href="https://mp.weixin.qq.com/s?__biz=MzUzOTAwOTU5NQ==&amp;mid=2247484150&amp;idx=1&amp;sn=7747918a0a04fc554e3ce5a77c6b362e&amp;chksm=facfb5a2cdb83cb43109d8329c698bddde8e150eeca6291207c12ed45dceace7717e4c7adf26&amp;mpshare=1&amp;scene=1&amp;srcid=0802JW0MtLjWJSyupjKKoWlO&amp;pass_ticket=4TLHatSXkFGfA98BgewD8BiThpO6w4bZ7HcvXB49Twk%3D#rd" title="Forked from ç™¾åº¦å¤–å–" target="_blank" rel="noopener">åŸæ–‡</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;æœ¬æ–‡ä» babel çš„åŸºç¡€çŸ¥è¯†ï¼Œä½¿ç”¨æ–¹æ³•ï¼Œå¦‚ä½•é…ç½®ï¼Œè§£æåŸç†å’Œå¦‚ä½•å¼€å‘ babel æ’ä»¶äº”ä¸ªæ–¹é¢è®©ä½ äº†è§£ bablelï¼Œä»¥ä¾¿ç”¨ babel æå‡å¼€å‘æ•ˆç‡ã€‚&lt;br&gt;ä½¿ç”¨æ–¹æ³•å’Œå¦‚ä½•é…ç½®ç« èŠ‚å°†å‘Šè¯‰ä½ åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ babelï¼Œè§£æåŸç†å’Œå¦‚ä½•å¼€å‘ babel æ’ä»¶ç« èŠ‚å¸®åŠ©ä½ å¼€å‘è‡ªå·±çš„ babel æ’ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;åŸºæœ¬ä»‹ç»&quot;&gt;&lt;a href=&quot;#åŸºæœ¬ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬ä»‹ç»&quot;&gt;&lt;/a&gt;åŸºæœ¬ä»‹ç»&lt;/h2&gt;&lt;p&gt;ç›¸ä¿¡ç”¨ es6/7 å†™ä»£ç çš„åŒå­¦å¯¹ babel åº”è¯¥ä¸ä¼šé™Œç”Ÿï¼ŒBabel æ˜¯ç”¨äºç¼–å†™ä¸‹ä¸€ä»£ JavaScript çš„ç¼–è¯‘å™¨ã€‚JavaScript ä½œä¸ºä¸€é—¨è¯­è¨€ï¼Œä¸æ–­å‘å±•æ›´æ–°ï¼Œæ–°çš„ç‰¹æ€§å±‚å‡ºä¸ç©·ï¼Œæƒ³è¦æå‰ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¿…é¡»å€ŸåŠ©åƒ babel è¿™æ ·çš„ç¼–è¯‘å™¨ã€‚ç›®å‰ä¸»æµæµè§ˆå™¨æœ€æ–°ç‰ˆæœ¬éƒ½åŸºæœ¬å®ç°äº†å¯¹ es5/6 è¯­æ³•çš„å®Œå…¨æ”¯æŒï¼Œå…·ä½“è¯·å‚è€ƒå…¼å®¹æ€§è¡¨æ ¼,è§ &lt;a href=&quot;http://kangax.github.io/compat-table/es6/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://kangax.github.io/compat-table/es6/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://mmbiz.qpic.cn/mmbiz_png/Wvz7HBpajwwZgScY87QSIbWg0lb4QicfNGqZJia3KRXEStwzClntN7u6icvfliaqtj2xhdtiaQ5KOx74RBLNAI5zWLA/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&quot; alt=&quot;alt text&quot; title=&quot;Babel&quot;&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ éœ€è¦ä½¿ç”¨ es7+è¯­æ³•ç‰¹æ€§æˆ–è€…å…¼å®¹æ—§ç‰ˆæœ¬æµè§ˆå™¨çš„éœ€æ±‚æ—¶ï¼Œä½ å°±éœ€è¦ä¸€æ¬¾ç¼–è¯‘å™¨æ”¯æŒå°† ES6/7 ç¼–è¯‘æˆæµè§ˆå™¨æ”¯æŒçš„ ES5/ES3 ä»£ç ã€‚Babel æ˜¯ä½¿ç”¨æœ€å¤šçš„ä¸€ä¸ªã€‚é™¤äº†ç¼–è¯‘å™¨ï¼Œbabel è¿˜æ”¯æŒè¯­æ³•æ‰©å±•ï¼ˆå¦‚ react çš„ JSX è¯­æ³•ï¼ŒReact ç°åœ¨å·²ç»ä¾èµ– babel ç¼–è¯‘å®ƒçš„ JSX è¯­æ³•ä¸”å¼ƒç”¨äº†å®ƒåŸæœ‰çš„è‡ªå®šä¹‰å·¥å…·ï¼‰å’Œé™æ€è¯­æ³•åˆ†æï¼ˆè¯­æ³•æ£€æŸ¥ï¼Œä»£ç é«˜äº®ï¼Œå‹ç¼©ï¼Œç»Ÿä¸€ä»£ç é£æ ¼ç­‰ï¼‰ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Javascript" scheme="https://blog.v2next.com/tags/Javascript/"/>
    
      <category term="Babel" scheme="https://blog.v2next.com/tags/Babel/"/>
    
  </entry>
  
  <entry>
    <title>Create a new branch with git and manage branches</title>
    <link href="https://blog.v2next.com/2017/07/25/Create-a-new-branch-with-git-and-manage-branches/"/>
    <id>https://blog.v2next.com/2017/07/25/Create-a-new-branch-with-git-and-manage-branches/</id>
    <published>2017-07-25T08:25:46.000Z</published>
    <updated>2019-10-20T07:59:34.695Z</updated>
    
    <content type="html"><![CDATA[<p>Forked from <a href="https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches" target="_blank" rel="noopener">https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches</a></p><p>In your github fork, you need to keep your master branch clean, by clean I mean without any changes, like that you can create at any time a branch from your master. Each time that you want to commit a bug or a feature, you need to create a branch for it, which will be a copy of your master branch.</p><p>When you do a pull request on a branch, you can continue to work on another branch and make another pull request on this other branch.</p><p>Before creating a new branch, pull the changes from upstream. Your master needs to be up to date.</p><p>Create the branch on your local machine and switch in this branch :</p><pre>$ git checkout -b [name_of_your_new_branch]</pre><a id="more"></a><p>Change working branch :</p><pre>$ git checkout [name_of_your_new_branch]</pre><p>Push the branch on github :</p><pre>$ git push origin [name_of_your_new_branch]</pre><p>When you want to commit something in your branch, be sure to be in your branch.</p><p>You can see all branches created by using :</p><pre>$ git branch</pre><p>Which will show :</p><pre>* approval_messages  master  master_clean</pre><p>Add a new remote for your branch :</p><pre>$ git remote add [name_of_your_remote] <url></url></pre><p>Push changes from your commit into your branch :</p><pre>$ git push [name_of_your_new_remote] [name_of_your_branch]</pre><p>Update your branch when the original branch from official repository has been updated :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch [name_of_your_remote]</span><br></pre></td></tr></table></figure><p>Then you need to apply to merge changes, if your branch is derivated from develop you need to do :</p><pre>$ git merge [name_of_your_remote]/develop</pre><p>Delete a branch on your local filesystem :</p><pre>$ git branch -d [name_of_your_new_branch]</pre><p>To force the deletion of local branch on your filesystem :</p><pre>$ git branch -D [name_of_your_new_branch]</pre><p>Delete the branch on github :</p><pre>$ git push origin :[name_of_your_new_branch]</pre><p>The only difference is the : to say delete, you can do it too by using github interface to remove branch : <a href="https://help.github.com/articles/deleting-unused-branches" target="_blank" rel="noopener">https://help.github.com/articles/deleting-unused-branches</a>.</p><p>If you want to change default branch, itâ€™s so easy with github, in your fork go into Admin and in the drop-down list default branch choose what you want.</p><p>This will push all your branches to the remote, and â€“set-upstream tracking correctly for you:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --all -u</span><br></pre></td></tr></table></figure><p>(Not exactly what the OP was asking for, but this one-liner is pretty popular)</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Forked from &lt;a href=&quot;https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In your github fork, you need to keep your master branch clean, by clean I mean without any changes, like that you can create at any time a branch from your master. Each time that you want to commit a bug or a feature, you need to create a branch for it, which will be a copy of your master branch.&lt;/p&gt;
&lt;p&gt;When you do a pull request on a branch, you can continue to work on another branch and make another pull request on this other branch.&lt;/p&gt;
&lt;p&gt;Before creating a new branch, pull the changes from upstream. Your master needs to be up to date.&lt;/p&gt;
&lt;p&gt;Create the branch on your local machine and switch in this branch :&lt;/p&gt;
&lt;pre&gt;$ git checkout -b [name_of_your_new_branch]&lt;/pre&gt;
    
    </summary>
    
    
      <category term="git" scheme="https://blog.v2next.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>How to handle conflicts with git</title>
    <link href="https://blog.v2next.com/2017/07/25/How-to-handle-conflicts-with-git/"/>
    <id>https://blog.v2next.com/2017/07/25/How-to-handle-conflicts-with-git/</id>
    <published>2017-07-25T08:25:46.000Z</published>
    <updated>2019-10-20T07:59:34.695Z</updated>
    
    <content type="html"><![CDATA[<p>Forked from <a href="https://github.com/Kunena/Kunena-Forum/wiki/How-to-handle-conflicts-with-git" target="_blank" rel="noopener">https://github.com/Kunena/Kunena-Forum/wiki/How-to-handle-conflicts-with-git</a></p><p>How to handle conflicts when merging something with git :</p><p>When you have a fork and you want update it because you have conflicts, itâ€™s good to know how to do it.</p><p>Donâ€™t forget to add the remote upstream before doing the following steps.</p><p>You have done a :</p><pre>$ git fetch upstream</pre><p>and then a :</p><pre>$ git merge upstream/master</pre><a id="more"></a><p>But it has failed :</p><pre>error: Your local changes to the following files would be overwritten by merge:        build/build.numberPlease, commit your changes or stash them before you can merge.Aborting</pre><p>You have changed something in the file build/build.number, so you have two choices revert you change or if you want lose your change stash it.</p><p>In my case i do a simple revert :</p><pre>$ git reset --hard HEAD</pre><p>Now itâ€™s good :</p><pre>HEAD is now at 030223c # [#21] Little issue with parent on agora category import</pre><p>You can do the merge :</p><pre>$ git merge upstream/master</pre><p>But now you have a conflict :</p><pre>Auto-merging administrator/components/com_kunenaimporter/CHANGELOG.phpCONFLICT (content): Merge conflict in administrator/components/com_kunenaimporter/CHANGELOG.phpAutomatic merge failed; fix conflicts and then commit the result.</pre><p>Check the differences :</p><pre>$ git diff</pre><pre>diff --cc administrator/components/com_kunenaimporter/CHANGELOG.phpindex e98aba5,9d74f73..0000000--- a/administrator/components/com_kunenaimporter/CHANGELOG.php+++ b/administrator/components/com_kunenaimporter/CHANGELOG.php@@@ -31,18 -31,34 +31,49 @@@ Legend  KunenaImporter 1.6.5-DEV++<<<<<<< HEAD +19-July-2011 Xillibit +# [#21] Little issue with parent on agora category import + +18-July-2011 Xillibit +# [#21] Improve ccboard and agora support (improve cat<c3><a9>gories, messages + +17-July-2011 Xillibit +# [#21] Improve ccboard and agora support (avatar galleries import for agora) + +14-July-2011 Xillibit +# [#21] Improve ccboard and agora support (improvements on agora categories im +# [#21] Improve ccboard and agora support (improvements on messages import)++=======+ 18-July-2011 Matias+ ^ [#30] Code cleanup in importer & exporter+ ^ [#5] Reviewed and fixed phpBB3 support, closes #5++ 17-July-2011 Matias</a9></c3></pre><p>Go into eclipse/Zend Studio and edit the file to remove the conlfict. Then, when you have done you need to mark the conflicts as resolved :</p><pre>$ git add -u</pre><p>You can check that all is fine before commit :</p><pre>$ git status</pre><pre># On branch master# Your branch is ahead of 'origin/master' by 2 commits.## Changes to be committed:##       modified:   administrator/components/com_kunenaimporter/CHANGELOG.php#       new file:   administrator/components/com_kunenaimporter/assets/agora-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/agora.png#       new file:   administrator/components/com_kunenaimporter/assets/ccboard-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/ccboard.png#       new file:   administrator/components/com_kunenaimporter/assets/discussions-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/discussions.png#       modified:   administrator/components/com_kunenaimporter/assets/importer.css#       new file:   administrator/components/com_kunenaimporter/assets/joobb-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/joobb.png#       new file:   administrator/components/com_kunenaimporter/assets/kunena.png#       new file:   administrator/components/com_kunenaimporter/assets/ninjaboard-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/ninjaboard.png#       new file:   administrator/components/com_kunenaimporter/assets/phpbb2-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/phpbb2.png#       new file:   administrator/components/com_kunenaimporter/assets/phpbb3-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/phpbb3-large.png#       new file:   administrator/components/com_kunenaimporter/assets/phpbb3.png#       new file:   administrator/components/com_kunenaimporter/assets/pnphpbb2-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/pnphpbb2.png#       new file:   administrator/components/com_kunenaimporter/assets/smf2-gray.png#       new file:   administrator/components/com_kunenaimporter/assets/smf2.png#       modified:   administrator/components/com_kunenaimporter/config.xml#       modified:   administrator/components/com_kunenaimporter/controller.php#       modified:   administrator/components/com_kunenaimporter/kunenaimporter.xml#       modified:   administrator/components/com_kunenaimporter/language/en-GB/en-GB.com_kunenaimporter.ini#       modified:   administrator/components/com_kunenaimporter/models/export.php#       modified:   administrator/components/com_kunenaimporter/models/export_ccboard.php#       modified:   administrator/components/com_kunenaimporter/models/export_example.php#       modified:   administrator/components/com_kunenaimporter/models/export_phpbb2.php#       modified:   administrator/components/com_kunenaimporter/models/export_phpbb3.php#       modified:   administrator/components/com_kunenaimporter/models/export_smf2.php#       modified:   administrator/components/com_kunenaimporter/models/import.php#       modified:   administrator/components/com_kunenaimporter/models/kunena.php#       modified:   administrator/components/com_kunenaimporter/views/default/tmpl/default.php#       modified:   administrator/components/com_kunenaimporter/views/default/view.html.php#       modified:   administrator/components/com_kunenaimporter/views/import/tmpl/default.php#       new file:   administrator/components/com_kunenaimporter/views/start/index.html#       new file:   administrator/components/com_kunenaimporter/views/start/tmpl/default.php#       new file:   administrator/components/com_kunenaimporter/views/start/tmpl/index.html#       new file:   administrator/components/com_kunenaimporter/views/start/view.html.php#       modified:   administrator/components/com_kunenaimporter/views/user/tmpl/default.php#       modified:   build/build.number#</pre><p>No conflicts anymore. So, you can commit :</p><pre>$ git commit -m "# [#74] Fix a very bad bug"</pre><p>You need to do now a push on the origin</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Forked from &lt;a href=&quot;https://github.com/Kunena/Kunena-Forum/wiki/How-to-handle-conflicts-with-git&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/Kunena/Kunena-Forum/wiki/How-to-handle-conflicts-with-git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;How to handle conflicts when merging something with git :&lt;/p&gt;
&lt;p&gt;When you have a fork and you want update it because you have conflicts, itâ€™s good to know how to do it.&lt;/p&gt;
&lt;p&gt;Donâ€™t forget to add the remote upstream before doing the following steps.&lt;/p&gt;
&lt;p&gt;You have done a :&lt;/p&gt;
&lt;pre&gt;$ git fetch upstream&lt;/pre&gt;

&lt;p&gt;and then a :&lt;/p&gt;
&lt;pre&gt;$ git merge upstream/master&lt;/pre&gt;
    
    </summary>
    
    
      <category term="git" scheme="https://blog.v2next.com/tags/git/"/>
    
  </entry>
  
</feed>
