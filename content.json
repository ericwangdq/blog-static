[{"title":"Kotlin React App","date":"2019-12-20T07:51:00.000Z","path":"2019/12/20/Kotlin-React-App/","text":"Great guide for Kotlin + React: https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/01_Introduction Instead of using JSX, Kotlin React is using its own domain-specific language (DSL) to describe it: https://medium.com/@ralf.stuckert/getting-started-with-kotlin-react-c5f3b079a8bf Frontend with Kotlin/JSJetBrains create-react-kotlin-app repo: https://github.com/JetBrains/create-react-kotlin-app JetBrains kotlin-react-router-dom repo: https://github.com/JetBrains/kotlin-wrappers/tree/master/kotlin-react-router-dom I have create a repo, and coding here: https://github.com/ericwdq/kotlin-react-app Add the kotlin-react-router-dom to the app, in order to integrate react-kotlin app into micro frontend container We need to add @jetbrains/kotlin-react-router-domâ€ modules to package.json by using commands List â€œbrowserRouterâ€ or â€œhashRouterâ€ to register the react routers Creating navigation component like sidebar for routing, and expose the paths to container Can reuse react components from npm : https://play.kotlinlang.org/hands-on/Building%20Web%20Applications%20with%20React%20and%20Kotlin%20JS/07_Using_Packages_From_NPM â†’ but need to add types manually â†’ can this be used to reuse fiori for react components? components we wrote in JS? List of reusable, pre-typed projects: https://github.com/JetBrains/kotlin-wrappers How to add dependency into project, take fundamental-react for example We have to wrap each fundamental control/component, because fundamental index donâ€™t have a default export. And each file will export a single component, which will be a huge workload as fundamental react has many components, and the content may changed. We can package fundamental-react in a specified naming space, and export them as a common library to all projects Use @file:JsModule(â€œfundamental-react/Buttonâ€) to define a component, and better to add an interface ButtonProps to make it typed Code snippet may like those Next step is how to package them into ui-framework and ui-utils template. Microfrontend compatible? code split?","tags":[{"name":"React","slug":"React","permalink":"https://blog.v2next.com/tags/React/"},{"name":"Kotlin","slug":"Kotlin","permalink":"https://blog.v2next.com/tags/Kotlin/"}]},{"title":"GraphQL Apollo Server implementation","date":"2019-10-28T08:16:52.000Z","path":"2019/10/28/GraphQL-Apollo-Server-implementation/","text":"ç›®æ ‡æ˜¯é‡‡ç”¨ä¸€ä¸ªGraphQLåº“ï¼Œèƒ½å¤Ÿä½¿ç”¨è¾ƒå°çš„payloadè°ƒç”¨åç«¯æŸ¥è¯¢çš„APIï¼Œå‡å°‘HTTPè¯·æ±‚å’Œå“åº”çš„æ—¶é—´ï¼Œä¼˜åŒ–APIæ•°æ®è®¿é—®é€Ÿåº¦ã€‚ å½“ç„¶GraphQLè¿˜æœ‰å¾ˆå¤šçš„ä¼˜åŠ¿ï¼Œèƒ½æ ¹æ®å®¢æˆ·ç«¯çš„æœŸæœ›æ¥è¿”å›APIç»“æ„æŒ‰éœ€è·å–ï¼ŒAPI Firstï¼Œå¼ºç±»å‹ Schemaï¼Œå¯ä»¥ç»„åˆå’Œè¿æ¥å¤šä¸ªGraphQL APIï¼Œåˆå¹¶ä¸ºä¸€ä¸ªAPIç­‰ç­‰ã€‚ æˆ‘ä»¬é€‰æ‹©äº†GraphQL Apollo Serverçš„ExpressJSåº“, è¿è¡Œåœ¨NodeJSä¸­ã€‚ ä¸‹é¢å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„Apollo GraphQLå·¥ä½œæµç¨‹ï¼š https://www.apollographql.com/docs/apollo-server/ é…ç½® Apollo Server å’Œ ExpressJS åœ¨ NodeJS:å®‰è£…ä¾èµ–ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š1yarn add apollo-server-express graphql graphql-tools Or 1npm install apollo-server-express graphql graphql-tools åˆ›å»º GraphQL Schema12345678910const ApolloServer= new ApolloServer(&#123; typeDefs: Types, resolvers: Resolvers, playground: &#123; endpoint: `/graphql`, settings: &#123; 'editor.theme': 'light', &#125;, &#125;,&#125;); åˆ›å»º GraphQL Apollo æœåŠ¡å™¨ä½¿ç”¨åŸºæœ¬é€‰é¡¹1234ApolloServer.applyMiddleware(&#123; app: app, // this parameter is express application path: '/graphql',&#125;); åˆ›å»º GraphQL Queryä»¥è°ƒç”¨BusinessPartner apiä¸ºä¾‹1234type Query &#123; BusinessPartner(Id: Int!): BusinessPartner BusinessPartners: [BusinessPartner]&#125; åˆ›å»º GraphQL Type12345678type BusinessPartner &#123; Id: Int BusinessPartner: Int BusinessPartnerName: String SearchTerm1: String CreatedByUser: String BusinessPartnerAddress: [BusinessPartnerAddress]&#125; åˆ›å»º GraphQL Resolvers1234567BusinessPartner: async ( parent: void, args: any, info: GraphQLResolveInfo, ) =&gt; &#123; return await api.getBusinessPartner(args.Id);&#125;, å®Œæˆåˆ›å»ºå,è¿è¡Œ yarn start, ä½ å¯ä»¥è®¿é—® http://localhost:3000/graphql å’Œæµ‹è¯•ä½ çš„ GraphQL queryåœ¨Apollo Playgound. GraphQLæœ‰ä¸¤ç§ç±»å‹ Query å’Œ Mutationã€‚ ä¸‹é¢æ˜¯æˆ‘å­¦ä¹ æŸ¥æ‰¾ä¸€äº›æœ‰ç”¨çš„èµ„æºhttps://graphql.org/https://graphql.org/code/https://graphql.org/code/#javascripthttps://github.com/graphql/graphql-js/https://github.com/graphql/graphiql/ graphiqlhttps://www.apollographql.com/docs/apollo-server/ GraphQL Best Practiceshttps://graphql.org/learn/best-practices/ Apollo graphql server:https://www.apollographql.com/docs/apollo-server/https://www.howtographql.com/graphql-js/8-filtering-pagination-and-sorting/ Server:https://graphql.org/graphql-js/running-an-express-graphql-server/https://graphql.org/code/#javascript https://github.com/graphql/graphql-spechttps://graphql.github.io/graphql-spec/June2018/https://blog.apollographql.com/three-ways-to-represent-your-graphql-schema-a41f4175100d Client: https://graphql.org/graphql-js/graphql-clients/https://github.com/prisma/graphql-request Facebook data loader: https://github.com/graphql/dataloader GraphQL API v4 Githubhttps://developer.github.com/v4/ Dynamic schema and resolver generationhttps://www.contentful.com/blog/2018/12/21/dynamic-schema-generation-changing-data-models/https://blog.hasura.io/the-ultimate-guide-to-schema-stitching-in-graphql-f30178ac0072/https://github.com/apollographql/apollo-server/issues/2560 https://medium.com/open-graphql/graphql-dynamic-persisted-queries-eb259700f1d3 Modularizing your GraphQL schema codehttps://blog.apollographql.com/modularizing-your-graphql-schema-code-d7f71d5ed5f2æ¯ä¸ª service çš„æ•°æ®ç»“æ„å¥‘çº¦ï¼Œéƒ½æ”¾å…¥äº†ä¸€ä¸ªå¤§è€Œå…¨çš„ GraphQL Schema é‡Œï¼›å¦‚æœä¸åšä»»ä½•æ¨¡å—åŒ–å’Œè§£è€¦ï¼Œå¼€å‘ä½“éªŒå°†ä¼šéå¸¸ç³Ÿç³•ã€‚æ¯ä¸ªå›¢é˜Ÿæˆå‘˜ï¼Œéƒ½å»ä¿®æ”¹åŒä¸€ä»½ Schema æ–‡ä»¶ã€‚è¿™æ˜æ˜¾æ˜¯ä¸åˆç†çš„ã€‚GraphQL-BFF çš„å¼€å‘æ¨¡å¼ï¼Œåº”è¯¥è·Ÿ service çš„é¢†åŸŸæ¨¡å‹ï¼Œæœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ç„¶åé€šè¿‡æŸç§å½¢å¼ï¼Œå¤šä¸ª services è‡ªç„¶æ•´åˆåˆ°ä¸€èµ·ã€‚ GraphQL-BFFï¼šå¾®æœåŠ¡èƒŒæ™¯ä¸‹çš„å‰åç«¯æ•°æ®äº¤äº’æ–¹æ¡ˆhttps://zhuanlan.zhihu.com/p/75241522å¼€å‘è¯­è¨€é€‰ç”¨äº† TypeScriptï¼Œè·‘åœ¨ Node.js v10.x ç‰ˆæœ¬ä¸Šï¼ŒæœåŠ¡ç«¯æ¡†æ¶æ˜¯ Koa v2.x ç‰ˆæœ¬ï¼Œä½¿ç”¨ apollo-server-koa æ¨¡å—å»è¿è¡Œ GraphQL æœåŠ¡ã€‚Apollo-GraphQL æ˜¯ Node.js ç¤¾åŒºé‡Œï¼Œæ¯”è¾ƒçŸ¥åå’Œæˆç†Ÿçš„ GraphQL æ¡†æ¶ã€‚åšäº†å¾ˆå¤šçš„ç»†èŠ‚å·¥ä½œï¼Œä¹Ÿæœ‰ä¸€äº›ç›¸å¯¹å‰æ²¿çš„æ¢ç´¢ï¼Œæ¯”å¦‚ Apollo Federation æ¶æ„ç­‰ã€‚ä¸è¿‡ï¼Œæœ‰ä¸¤ç‚¹å€¼å¾—ä¸€æï¼š1ï¼‰Apollo-GraphQL å±äº GraphQL ç¤¾åŒºçš„ä¸€éƒ¨åˆ†ï¼Œè€Œé Facebook å®˜æ–¹çš„ GraphQL å¼€å‘å›¢é˜Ÿã€‚Apollo-GraphQL åœ¨å®˜æ–¹ GraphQL çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¸¦æœ‰ä»–ä»¬è‡ªèº«ç†å¿µç‰¹ç‚¹çš„å°è£…å’Œè®¾è®¡ã€‚åƒ Apollo Federation è¿™ç±»ç›®å‰çœ‹æ¥æ¯”è¾ƒæ¿€è¿›çš„æ–¹æ¡ˆï¼Œå³ä½¿æ˜¯ GraphQL å®˜æ–¹çš„å¼€å‘äººå‘˜ï¼Œå¯¹æ­¤ä¹ŸæŒä¿ç•™æ€åº¦ã€‚2ï¼‰Apollo-GraphQL çš„é‡å¿ƒæ˜¯å‰æ–‡æ‰€è¯´çš„ç¬¬ä¸€ç±» API Gateway è§’è‰²çš„ GraphQL æœåŠ¡ï¼Œæœ¬æ–‡æ¢è®¨çš„æ˜¯ç¬¬äºŒç±»ã€‚å› æ­¤ï¼ŒApollo-GraphQL é‡Œæœ‰å¾ˆå¤šåŠŸèƒ½å¯¹æˆ‘ä»¬æ¥è¯´æ²¡å¿…è¦ï¼Œæœ‰ä¸€äº›åŠŸèƒ½çš„ä½¿ç”¨æ–¹å¼ï¼Œè·Ÿæˆ‘ä»¬çš„åœºæ™¯ä¹Ÿä¸å¥‘åˆã€‚æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„æ˜¯ Apollo-GraphQL çš„ graphql-tools å’Œ apollo-server-koa ä¸¤ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†ç¬¦åˆæˆ‘ä»¬åœºæ™¯çš„è®¾è®¡å’Œæ”¹ç¼–ã€‚ Decouple schema and resovler: â€“&gt; Loosly couple æ¾è€¦åˆ | ç´§è€¦åˆ 1. Merge å¤šä¸ª GraphQL-Service çš„ Schema åç”Ÿæˆçš„ç»“æœã€‚å¯ä»¥çœ‹å‡ºæ¥ï¼Œè·Ÿä¹‹å‰æ‰‹å†™çš„ç‰ˆæœ¬ï¼Œæ€»ä½“ä¸Šæ˜¯ä¸€æ ·çš„ 2. TypeScript + GraphQL = TypeGraphQLhttps://zhuanlan.zhihu.com/p/56516614https://github.com/MichalLytek/type-graphql GraphQL å¿«é€Ÿå…¥é—¨æ•™ç¨‹https://zhuanlan.zhihu.com/p/75618997https://github.com/MudOnTire/graphQL-tutorial How to build an Apollo GraphQL server with TypeScript and Webpack Hot Module Replacementhttps://medium.com/free-code-camp/build-an-apollo-graphql-server-with-typescript-and-webpack-hot-module-replacement-hmr-3c339d05184fhttps://github.com/apollographql/apollo-server/tree/master/packages/apollo-server-express Running an Express GraphQL Serverhttps://graphql.org/graphql-js/running-an-express-graphql-server/https://graphql.org/blog/mocking-with-graphql/https://graphql.org/blog/graphql-a-query-language/https://graphql.org/community/https://launchpad.graphql.com/98lq7vz8r Cannot use graphQL server with express routerhttps://github.com/apollographql/apollo-server/issues/336 GraphQL is the better RESThttps://www.graphql.com/https://www.howtographql.com/basics/1-graphql-is-the-better-rest/ å¦‚ä½•å°† Web ä¸»é¡µæ€§èƒ½æå‡åå€ä»¥ä¸Šï¼Ÿhttps://www.infoq.cn/article/Xxyy8WZrWLwUlIF0*IxR","tags":[{"name":"GraphQL","slug":"GraphQL","permalink":"https://blog.v2next.com/tags/GraphQL/"},{"name":"Apollo","slug":"Apollo","permalink":"https://blog.v2next.com/tags/Apollo/"},{"name":"Web API","slug":"Web-API","permalink":"https://blog.v2next.com/tags/Web-API/"},{"name":"NodeJs","slug":"NodeJs","permalink":"https://blog.v2next.com/tags/NodeJs/"},{"name":"Evaluation","slug":"Evaluation","permalink":"https://blog.v2next.com/tags/Evaluation/"},{"name":"Frontend Architecture","slug":"Frontend-Architecture","permalink":"https://blog.v2next.com/tags/Frontend-Architecture/"}]},{"title":"Micro Frontends In Action","date":"2019-08-18T08:18:10.000Z","path":"2019/08/18/Micro-Frontends-In-Action/","text":"æ–°éƒ¨é—¨çš„å‰ç«¯é¡¹ç›®æ¶æ„ä¸­å®è·µäº†å¾®å‰ç«¯ï¼Œåé¢æœ‰æ—¶é—´å†æ•´ç†å†…å®¹ï¼Œä¸‹é¢å¼€å‘ä¸­æ”¶é›†çš„ä¸€äº›èµ„æ–™ã€‚ Micro frontendshttps://martinfowler.com/articles/micro-frontends.html https://github.com/micro-frontends-demo https://micro-frontends.org/ Single SPAhttps://github.com/CanopyTax/single-spahttps://single-spa.js.org/https://single-spa.surge.sh/ Building Micro Frontends with React, Vue, and Single-spahttps://github.com/dabit3/micro-frontend-examplehttps://dev.to/dabit3/building-micro-frontends-with-react-vue-and-single-spa-52op qiankunï¼ˆä¹¾å¤ï¼‰ï¼šAn implementation of Micro Frontends, based on single-spa, but made it production-ready.ğŸ“¦ğŸš€Blazing fast, simple and completed solution for micro frontends.https://github.com/umijs/qiankun å¯èƒ½æ˜¯ä½ è§è¿‡æœ€å®Œå–„çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆhttps://zhuanlan.zhihu.com/p/78362028 å¾®å‰ç«¯å¦‚ä½•è½åœ°ï¼Ÿhttps://zhuanlan.zhihu.com/p/73090920 Micro frontendsâ€”a microservice approach to front-end web developmenthttps://medium.com/@tomsoderlund/micro-frontends-a-microservice-approach-to-front-end-web-development-f325ebdadc16 typescript+nodejs æ˜¯å¦é€‚åˆå¼€å‘å¤§å‹é¡¹ç›®ï¼Ÿhttps://www.zhihu.com/question/338345340/answer/778069075 Monorepoâ€”â€”å¤§å‹å‰ç«¯é¡¹ç›®çš„ä»£ç ç®¡ç†æ–¹å¼https://segmentfault.com/a/1190000019309820 Google repo mgmt:https://zhuanlan.zhihu.com/p/50564255","tags":[{"name":"React","slug":"React","permalink":"https://blog.v2next.com/tags/React/"},{"name":"Frontend Architecture","slug":"Frontend-Architecture","permalink":"https://blog.v2next.com/tags/Frontend-Architecture/"},{"name":"Micro Frontends","slug":"Micro-Frontends","permalink":"https://blog.v2next.com/tags/Micro-Frontends/"}]},{"title":"ä½¿ç”¨ Docker Compose éƒ¨ç½² NodeJS Web App","date":"2019-04-10T06:48:38.000Z","path":"2019/04/10/docker-compose-for-node-webapp/","text":"ä¸Šä¸€ç¯‡ Post ä½¿ç”¨äº† Docker åŒ– Node.js çš„ Web Appï¼Œè¿™ä¸€ç¯‡ Post å°è¯•ç©ä¸‹ docker composeã€‚ğŸ˜Š Dockerfile å’Œ dockerignore å‰é¢å·²ç»åˆ›å»ºè¿‡ ğŸ”—atlas-app æ–°å»º docker-compose.yml 1234567891011app: build: ./ volumes: - ./:/usr/src/app ports: - 8888:6075 environment: - NODE_ENV=development - PORT=6075 command: \"npm start\" restart: always 8888 æ˜¯å®¿ä¸»æœº IP å’Œç«¯å£ï¼Œ6075 æ˜¯è·‘åœ¨ docker é‡Œ app çš„ç«¯å£ æ„å»ºå’Œè¿è¡Œ 1docker-compose -f ./docker-compose.yml up -d æŸ¥çœ‹ containers å’Œå¯¹åº”çš„ logs 1docker ps 1docker logs &lt;container id&gt; æ‰§è¡Œå®¹å™¨ä¸­ bash 1docker exec -it &lt;container id&gt; /bin/bash å‚è€ƒèµ„æ–™ï¼š ğŸ”— A Docker/docker-compose setup with Redis and Node/Express ğŸ”— Using Docker Compose for NodeJS Development ğŸ”— ä½¿ç”¨ docker-composer éƒ¨ç½² nodejs åº”ç”¨","tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"https://blog.v2next.com/tags/NodeJS/"},{"name":"Docker Compose","slug":"Docker-Compose","permalink":"https://blog.v2next.com/tags/Docker-Compose/"},{"name":"Docker","slug":"Docker","permalink":"https://blog.v2next.com/tags/Docker/"},{"name":"Web App","slug":"Web-App","permalink":"https://blog.v2next.com/tags/Web-App/"}]},{"title":"Docker åŒ– Node.js çš„ Web App","date":"2019-03-15T05:54:17.000Z","path":"2019/03/15/nodejs-docker-webapp/","text":"é¦–å…ˆé€šè¿‡git cloneå‘½ä»¤åœ¨æœ¬åœ° clone å¥½ä¸€ä¸ª node appã€‚ 1git clone https://github.com/ericwdq/atlas-app.git ç„¶åå‡†å¤‡ä¸º App åˆ›å»ºä¸€ä¸ª Docker é•œåƒï¼Œæœ€åå†å°†åˆ›å»ºçš„é•œåƒè¿ä½œåœ¨ä¸€ä¸ªå®¹å™¨ä¸­ã€‚ Docker å¯ä»¥æŠŠå…·æœ‰æ‰€æœ‰ä¾èµ–å…³ç³»çš„ App æ‰“åŒ…åˆ°ä¸€ä¸ªæ ‡å‡†åŒ–å•å…ƒçš„å®¹å™¨ç”¨äºè½¯ä»¶å¼€å‘ã€‚ å®¹å™¨æ˜¯ Linux ä¸­åŸºç¡€æ¦‚å¿µï¼Œé•œåƒå°±æ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸­çš„åº”ç”¨ç¨‹åºã€‚ è¿è¡Œ App åœ¨ Docker ä¸Š åˆ›å»º Dockerfile æ–‡ä»¶åœ¨ App çš„æ ¹ç›®å½• 12345678910111213141516171819202122FROM node:8# Create app directoryWORKDIR /usr/src/app# Install app dependencies# A wildcard is used to ensure both package.json AND package-lock.json are copied# where available (npm@5+)COPY package*.json ./RUN npm install# If you are building your code for production# RUN npm ci --only=production# Bundle app sourceCOPY . .# Expose app portsEXPOSE 6075# Start applicationCMD [ \"npm\", \"start\" ] åˆ›å»º dockerignore æ–‡ä»¶åœ¨ App çš„æ ¹ç›®å½• 12node_modulesnpm-debug.log æ„å»ºé•œåƒ 1docker build -t eric/atlas-app . ä¸Šé¢çš„ . ä»£è¡¨å½“å‰ç›®å½• æŸ¥çœ‹ docker é•œåƒåˆ—è¡¨ 1docker images REPOSITORY TAG IMAGE ID CREATED SIZE eric/atlas-app latest d6e01bdfc655 40 minutes ago 1.24GB è¿è¡Œå®¹å™¨ 1docker run -p 8888:6075 -d -it eric/atlas-app ä¸Šé¢çš„ç¤ºä¾‹ï¼ŒDocker å°†æ˜ å°„å®¹å™¨ä¸­çš„ 6075 ç«¯å£åˆ° 8888 ä½ çš„æœºå™¨çš„ç«¯å£ä¸Šï¼Œæ‰€ä»¥ä½ å¯ä»¥è®¿é—® 8888 ç«¯å£å»æµ‹è¯• appã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çš„ç›¸åŒçš„ç«¯å£è½¬å‘ã€‚ è·å–å®¹å™¨çš„ ID 1docker ps æ‰“å° app çš„æ—¥å¿— 1docker logs &lt;container id&gt; æµ‹è¯•è®¿é—® app urlhttp://localhost:8888 æ‰§è¡Œå®¹å™¨ä¸­çš„ bash 1docker exec -it &lt;container id&gt; /bin/bash åˆ é™¤å®¹å™¨ 1docker rm --force &lt;container id&gt; åˆ é™¤é•œåƒ 1docker rmi Image &lt;container id&gt; å‚è€ƒèµ„æ–™ï¼š ğŸ”— Dockerizing a Node.js web app ä¸‹ä¸€æ­¥å‡†å¤‡å°è¯•ä½¿ç”¨ docker compose å¤šå®¹å™¨æ§åˆ¶å’Œè‡ªåŠ¨åŒ–ã€‚ ğŸ˜Š ğŸ”— Using Docker Compose for NodeJS Development ğŸ”— ä½¿ç”¨ docker-composer éƒ¨ç½² nodejs åº”ç”¨","tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"https://blog.v2next.com/tags/NodeJS/"},{"name":"Docker","slug":"Docker","permalink":"https://blog.v2next.com/tags/Docker/"},{"name":"Web App","slug":"Web-App","permalink":"https://blog.v2next.com/tags/Web-App/"}]},{"title":"React Hooks with Typescript","date":"2019-02-15T09:21:46.000Z","path":"2019/02/15/react-hooks-with-ts/","text":"React Hooks are a new addition in React 16.8. They let you use state and other React features without writing a class. - from reactjs.org React Hooks with TypeScriptğŸ”— https://blog.usejournal.com/using-react-hooks-with-typescript-aae6c7b2a3a9 ğŸ”— https://react-hooks-typescript.now.sh/ ğŸ”— https://github.com/ericwdq/react-hooks-typescript-example Code sandbox live demo:ğŸ”— https://codesandbox.io/s/github/skovy/react-hooks-typescript-example ğŸ”— How to Use Typescript with React and Reduxhttps://medium.com/@rossbulat/how-to-use-typescript-with-react-and-redux-a118b1e02b76 UseStateUseEffectUseReducerUseContextTypescript:https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html","tags":[{"name":"React","slug":"React","permalink":"https://blog.v2next.com/tags/React/"},{"name":"React Hooks","slug":"React-Hooks","permalink":"https://blog.v2next.com/tags/React-Hooks/"},{"name":"ts","slug":"ts","permalink":"https://blog.v2next.com/tags/ts/"},{"name":"Typescript","slug":"Typescript","permalink":"https://blog.v2next.com/tags/Typescript/"}]},{"title":"React Hooks å¼€å‘ Todo List","date":"2018-12-06T06:45:59.000Z","path":"2018/12/06/react-hooks/","text":"Introducing Hookshttps://reactjs.org/docs/hooks-intro.html How to Build a Todo List with React Hookshttps://medium.freecodecamp.org/how-to-build-a-todo-list-with-react-hooks-ebaa4e3db3b https://codesandbox.io/s/github/yazeedb/react-hooks-todo","tags":[{"name":"React","slug":"React","permalink":"https://blog.v2next.com/tags/React/"},{"name":"React Hooks","slug":"React-Hooks","permalink":"https://blog.v2next.com/tags/React-Hooks/"}]},{"title":"å®‰è£… nvm and NodeJS åœ¨ SUSE/Linux ç¯å¢ƒ","date":"2018-12-03T08:54:46.000Z","path":"2018/12/03/install-nvm-and-nodejs-on-SUSE-Linux/","text":"å…¬å¸çš„é¡¹ç›®äº§å“ server build çš„ç¯å¢ƒæ˜¯ SUSE Linux ï¼Œæ‰€ä»¥å‰ç«¯é¡¹ç›®æ„å»ºä½¿ç”¨çš„ NodeJS æ˜¯ linux ç‰ˆæœ¬ï¼Œç ”ç©¶äº†ä¸‹ nvm å’Œ NodeJS åœ¨ SUSE çš„å®‰è£…ã€‚ å®‰è£…æ­¥éª¤ æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼š 1$ lsb_release -a; uname -a; arch æ‰§è¡Œç»“æœï¼š cnpvg50842594:~/.nvm/versions/node # lsb_release -a; uname -a; arch LSB Version: n/a Distributor ID: SUSE LINUX Description: SUSE Linux Enterprise Server 12 SP1 Release: 12.1 Codename: n/a Linux cnpvg50842594 3.12.74-60.64.40-xen #1 SMP Wed May 10 05:07:16 UTC 2017 (4eb35ec) x86_64 x86_64 x86_64 GNU/Linux x86_64 ä¸‹è½½å®‰è£… nvmï¼š 1$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.10/install.sh | bash ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ .nvmï¼š 1$ vim ~/.bashrc export NVM_DIR=\"$HOME/.nvm\" [ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\" # This loads nvm 1$ source ~/.bashrc nvm github å®‰è£…è„šæœ¬ï¼šhttps://github.com/creationix/nvm#install-script æŸ¥çœ‹ nvm å‘½ä»¤ï¼š 1$ command -v nvm å®‰è£… nodejs 1$ nvm install 10.14.0 [arch] æŸ¥çœ‹å·²å®‰è£…çš„ nodejs åˆ—è¡¨ 1nvm list ä¸‹é¢æœ‰ä¸ª Youtobe è§†é¢‘ï¼ŒåŸºæœ¬å®‰è£…æ­¥éª¤å·®ä¸å¤šã€‚https://www.youtube.com/watch?v=MYXRbXabmsc","tags":[{"name":"nvm","slug":"nvm","permalink":"https://blog.v2next.com/tags/nvm/"},{"name":"NodeJS","slug":"NodeJS","permalink":"https://blog.v2next.com/tags/NodeJS/"},{"name":"SUSE","slug":"SUSE","permalink":"https://blog.v2next.com/tags/SUSE/"},{"name":"Linux","slug":"Linux","permalink":"https://blog.v2next.com/tags/Linux/"}]},{"title":"ä½¿ç”¨ JSON Web Token","date":"2018-11-06T02:53:26.000Z","path":"2018/11/06/jwt-auth/","text":"Here are some scenarios where JSON Web Tokens are useful: Authorization: This is the most common scenario for using JWT. Once the user is logged in, each subsequent request will include the JWT, allowing the user to access routes, services, and resources that are permitted with that token. Single Sign On is a feature that widely uses JWT nowadays, because of its small overhead and its ability to be easily used across different domains. Information Exchange: JSON Web Tokens are a good way of securely transmitting information between parties. Because JWTs can be signedâ€”for example, using public/private key pairsâ€”you can be sure the senders are who they say they are. Additionally, as the signature is calculated using the header [GitHub] Understanding JWT (JSON web token) authenticationhttps://github.com/ericwdq/jwt-auth ä¸è¦ç”¨ JWT æ›¿ä»£ session ç®¡ç†ï¼ˆä¸Šï¼‰ï¼šå…¨é¢äº†è§£ Token,JWT,OAuth,SAML,SSOhttps://zhuanlan.zhihu.com/p/38942172 jwt.iohttps://jwt.io/introduction/","tags":[{"name":"JSON Web Token","slug":"JSON-Web-Token","permalink":"https://blog.v2next.com/tags/JSON-Web-Token/"},{"name":"JWT","slug":"JWT","permalink":"https://blog.v2next.com/tags/JWT/"},{"name":"auth","slug":"auth","permalink":"https://blog.v2next.com/tags/auth/"}]},{"title":"You Don't Need jQuery","date":"2018-09-12T02:36:13.000Z","path":"2018/09/12/you-dont-need-jquery-cn/","text":"ğŸ“° GitHub å·¥ç¨‹å›¢é˜Ÿå‘å¸ƒæ–‡ç«  ğŸ”—Removing jQuery from GitHub.com frontend å®£å¸ƒä»–ä»¬å°†é€æ¸è„±ç¦» jQueryï¼Œç›´åˆ°èƒ½å¤Ÿå®Œå…¨åˆ é™¤åº“ï¼Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ APIs å¯ä»¥æ»¡è¶³æ‰€æœ‰éœ€æ±‚ã€‚æˆ‘æ¸…æ™°çš„è®°å¾—åˆšå¼€å§‹ jQuery çš„æ—¶å€™ï¼Œä½¿å‰ç«¯å¼€å‘å·¥ä½œå˜çš„ç®€å•ï¼Œé«˜æ•ˆã€‚æ‰€ä»¥ä¸å¾—ä¸è¯´ jQuery æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„åº“ï¼Œâ¤ï¸ çºªå¿µä¸€ä¸‹ï¼Œæ„Ÿè°¢ jQueryï¼ æˆ‘åœ¨ Github ä¸Šå‘ç°äº†è¿™ä¸ªå¾ˆå®ç”¨çš„ repoï¼ğŸ”—You Donâ€™t Need jQuery æœ‰å¾ˆå¤šç¿»è¯‘ç‰ˆæœ¬ï¼Œä¸‹é¢æ˜¯ä¸­æ–‡ç‰ˆã€‚ å‰ç«¯å‘å±•å¾ˆå¿«ï¼Œç°ä»£æµè§ˆå™¨åŸç”Ÿ API å·²ç»è¶³å¤Ÿå¥½ç”¨ã€‚æˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸ºäº†æ“ä½œ DOMã€Event ç­‰å†å­¦ä¹ ä¸€ä¸‹ jQuery çš„ APIã€‚åŒæ—¶ç”±äº Reactã€Angularã€Vue ç­‰æ¡†æ¶çš„æµè¡Œï¼Œç›´æ¥æ“ä½œ DOM ä¸å†æ˜¯å¥½çš„æ¨¡å¼ï¼ŒjQuery ä½¿ç”¨åœºæ™¯å¤§å¤§å‡å°‘ã€‚æœ¬é¡¹ç›®æ€»ç»“äº†å¤§éƒ¨åˆ† jQuery API æ›¿ä»£çš„æ–¹æ³•ï¼Œæš‚æ—¶åªæ”¯æŒ IE10 ä»¥ä¸Šæµè§ˆå™¨ã€‚ ç›®å½• Query Selector CSS &amp; Style DOM Manipulation Ajax Events Utilities Promises Animation Alternatives Browser Support Query Selectorå¸¸ç”¨çš„ classã€idã€å±æ€§ é€‰æ‹©å™¨éƒ½å¯ä»¥ä½¿ç”¨ document.querySelector æˆ– document.querySelectorAll æ›¿ä»£ã€‚åŒºåˆ«æ˜¯ document.querySelector è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ Element document.querySelectorAll è¿”å›æ‰€æœ‰åŒ¹é…çš„ Element ç»„æˆçš„ NodeListã€‚å®ƒå¯ä»¥é€šè¿‡ [].slice.call() æŠŠå®ƒè½¬æˆ Array å¦‚æœåŒ¹é…ä¸åˆ°ä»»ä½• Elementï¼ŒjQuery è¿”å›ç©ºæ•°ç»„ []ï¼Œä½† document.querySelector è¿”å› nullï¼Œæ³¨æ„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å½“æ‰¾ä¸åˆ°æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ || è®¾ç½®é»˜è®¤çš„å€¼ï¼Œå¦‚ document.querySelectorAll(selector) || [] æ³¨æ„ï¼šdocument.querySelector å’Œ document.querySelectorAll æ€§èƒ½å¾ˆå·®ã€‚å¦‚æœæƒ³æé«˜æ€§èƒ½ï¼Œå°½é‡ä½¿ç”¨ document.getElementByIdã€document.getElementsByClassName æˆ– document.getElementsByTagNameã€‚ 1.0 é€‰æ‹©å™¨æŸ¥è¯¢ 12345// jQuery$(\"selector\");// Nativedocument.querySelectorAll(\"selector\"); 1.1 class æŸ¥è¯¢ 12345678// jQuery$(\".class\");// Nativedocument.querySelectorAll(\".class\");// ordocument.getElementsByClassName(\"class\"); 1.2 id æŸ¥è¯¢ 12345678// jQuery$(\"#id\");// Nativedocument.querySelector(\"#id\");// ordocument.getElementById(\"id\"); 1.3 å±æ€§æŸ¥è¯¢ 12345// jQuery$(\"a[target=_blank]\");// Nativedocument.querySelectorAll(\"a[target=_blank]\"); 1.4 åä»£æŸ¥è¯¢ 12345// jQuery$el.find(\"li\");// Nativeel.querySelectorAll(\"li\"); 1.5 å…„å¼ŸåŠä¸Šä¸‹å…ƒç´  å…„å¼Ÿå…ƒç´  123456789// jQuery$el.siblings();// Native - latest, Edge13+[...el.parentNode.children].filter(child =&gt; child !== el);// Native (alternative) - latest, Edge13+Array.from(el.parentNode.children).filter(child =&gt; child !== el);// Native - IE10+Array.prototype.filter.call(el.parentNode.children, child =&gt; child !== el); ä¸Šä¸€ä¸ªå…ƒç´  12345// jQuery$el.prev();// Nativeel.previousElementSibling; ä¸‹ä¸€ä¸ªå…ƒç´  12345// next$el.next();// Nativeel.nextElementSibling; 1.6 Closest Closest è·å¾—åŒ¹é…é€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªç¥–å…ˆå…ƒç´ ï¼Œä»å½“å‰å…ƒç´ å¼€å§‹æ²¿ DOM æ ‘å‘ä¸Šã€‚ 1234567891011121314151617181920212223// jQuery$el.closest(queryString);// Native - Only latest, NO IEel.closest(selector);// Native - IE10+function closest(el, selector) &#123; const matchesSelector = el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector; while (el) &#123; if (matchesSelector.call(el, selector)) &#123; return el; &#125; else &#123; el = el.parentElement; &#125; &#125; return null;&#125; 1.7 Parents Until è·å–å½“å‰æ¯ä¸€ä¸ªåŒ¹é…å…ƒç´ é›†çš„ç¥–å…ˆï¼Œä¸åŒ…æ‹¬åŒ¹é…å…ƒç´ çš„æœ¬èº«ã€‚ 1234567891011121314151617181920212223242526// jQuery$el.parentsUntil(selector, filter);// Nativefunction parentsUntil(el, selector, filter) &#123; const result = []; const matchesSelector = el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector; // match start from parent el = el.parentElement; while (el &amp;&amp; !matchesSelector.call(el, selector)) &#123; if (!filter) &#123; result.push(el); &#125; else &#123; if (matchesSelector.call(el, filter)) &#123; result.push(el); &#125; &#125; el = el.parentElement; &#125; return result;&#125; 1.8 Form Input/Textarea 12345// jQuery$(\"#my-input\").val();// Nativedocument.querySelector(\"#my-input\").value; è·å– e.currentTarget åœ¨ .radio ä¸­çš„æ•°ç»„ç´¢å¼• 12345678// jQuery$(\".radio\").index(e.currentTarget);// NativeArray.prototype.indexOf.call( document.querySelectorAll(\".radio\"), e.currentTarget); 1.9 Iframe Contents jQuery å¯¹è±¡çš„ iframe contents() è¿”å›çš„æ˜¯ iframe å†…çš„ document Iframe contents 12345// jQuery$iframe.contents();// Nativeiframe.contentDocument; Iframe Query 12345// jQuery$iframe.contents().find(\".css\");// Nativeiframe.contentDocument.querySelectorAll(\".css\"); 1.10 è·å– body 12345// jQuery$(\"body\");// Nativedocument.body; 1.11 è·å–æˆ–è®¾ç½®å±æ€§ è·å–å±æ€§ 12345// jQuery$el.attr(\"foo\");// Nativeel.getAttribute(\"foo\"); è®¾ç½®å±æ€§ 12345// jQuery, note that this works in memory without change the DOM$el.attr(\"foo\", \"bar\");// Nativeel.setAttribute(\"foo\", \"bar\"); è·å– data- å±æ€§ 12345678// jQuery$el.data(\"foo\");// Native (use `getAttribute`)el.getAttribute(\"data-foo\");// Native (use `dataset` if only need to support IE 11+)el.dataset[\"foo\"]; â¬† å›åˆ°é¡¶éƒ¨ CSS &amp; Style 2.1 CSS Get style 123456789// jQuery$el.css(\"color\");// Native// æ³¨æ„ï¼šæ­¤å¤„ä¸ºäº†è§£å†³å½“ style å€¼ä¸º auto æ—¶ï¼Œè¿”å› auto çš„é—®é¢˜const win = el.ownerDocument.defaultView;// null çš„æ„æ€æ˜¯ä¸è¿”å›ä¼ªç±»å…ƒç´ win.getComputedStyle(el, null).color; Set style 12345// jQuery$el.css(&#123; color: \"#ff0011\" &#125;);// Nativeel.style.color = \"#ff0011\"; Get/Set Styles æ³¨æ„ï¼Œå¦‚æœæƒ³ä¸€æ¬¡è®¾ç½®å¤šä¸ª styleï¼Œå¯ä»¥å‚è€ƒ oui-dom-utils ä¸­ setStyles æ–¹æ³• Add class 12345// jQuery$el.addClass(className);// Nativeel.classList.add(className); Remove class 12345// jQuery$el.removeClass(className);// Nativeel.classList.remove(className); has class 12345// jQuery$el.hasClass(className);// Nativeel.classList.contains(className); Toggle class 12345// jQuery$el.toggleClass(className);// Nativeel.classList.toggle(className); 2.2 Width &amp; Height Width ä¸ Height è·å–æ–¹æ³•ç›¸åŒï¼Œä¸‹é¢ä»¥ Height ä¸ºä¾‹ï¼š Window height 12345678// window height$(window).height();// å« scrollbarwindow.document.documentElement.clientHeight;// ä¸å« scrollbarï¼Œä¸ jQuery è¡Œä¸ºä¸€è‡´window.innerHeight; Document height 12345678910111213// jQuery$(document).height();// Nativeconst body = document.body;const html = document.documentElement;const height = Math.max( body.offsetHeight, body.scrollHeight, html.clientHeight, html.offsetHeight, html.scrollHeight); Element height 123456789101112131415161718192021// jQuery$el.height();// Nativefunction getHeight(el) &#123; const styles = this.getComputedStyle(el); const height = el.offsetHeight; const borderTopWidth = parseFloat(styles.borderTopWidth); const borderBottomWidth = parseFloat(styles.borderBottomWidth); const paddingTop = parseFloat(styles.paddingTop); const paddingBottom = parseFloat(styles.paddingBottom); return ( height - borderBottomWidth - borderTopWidth - paddingTop - paddingBottom );&#125;// ç²¾ç¡®åˆ°æ•´æ•°ï¼ˆborder-box æ—¶ä¸º height - border å€¼ï¼Œcontent-box æ—¶ä¸º height + padding å€¼ï¼‰el.clientHeight;// ç²¾ç¡®åˆ°å°æ•°ï¼ˆborder-box æ—¶ä¸º height å€¼ï¼Œcontent-box æ—¶ä¸º height + padding + border å€¼ï¼‰el.getBoundingClientRect().height; 2.3 Position &amp; Offset Position è·å¾—åŒ¹é…å…ƒç´ ç›¸å¯¹çˆ¶å…ƒç´ çš„åç§» 12345// jQuery$el.position();// Native&#123; left: el.offsetLeft, top: el.offsetTop &#125; Offset è·å¾—åŒ¹é…å…ƒç´ ç›¸å¯¹æ–‡æ¡£çš„åç§» 12345678910111213// jQuery$el.offset();// Nativefunction getOffset(el) &#123; const box = el.getBoundingClientRect(); return &#123; top: box.top + window.pageYOffset - document.documentElement.clientTop, left: box.left + window.pageXOffset - document.documentElement.clientLeft &#125;;&#125; 2.4 Scroll Top è·å–å…ƒç´ æ»šåŠ¨æ¡å‚ç›´ä½ç½®ã€‚ 123456// jQuery$(window).scrollTop();// Native(document.documentElement &amp;&amp; document.documentElement.scrollTop) || document.body.scrollTop; â¬† å›åˆ°é¡¶éƒ¨ DOM Manipulation 3.1 Remove ä» DOM ä¸­ç§»é™¤å…ƒç´ ã€‚ 12345// jQuery$el.remove();// Nativeel.parentNode.removeChild(el); 3.2 Text Get text è¿”å›æŒ‡å®šå…ƒç´ åŠå…¶åä»£çš„æ–‡æœ¬å†…å®¹ã€‚ 12345// jQuery$el.text();// Nativeel.textContent; Set text è®¾ç½®å…ƒç´ çš„æ–‡æœ¬å†…å®¹ã€‚ 12345// jQuery$el.text(string);// Nativeel.textContent = string; 3.3 HTML Get HTML 12345// jQuery$el.html();// Nativeel.innerHTML; Set HTML 12345// jQuery$el.html(htmlString);// Nativeel.innerHTML = htmlString; 3.4 Append Append æ’å…¥åˆ°å­èŠ‚ç‚¹çš„æœ«å°¾ 12345678// jQuery$el.append(\"&lt;div id='container'&gt;hello&lt;/div&gt;\");// Native (HTML string)el.insertAdjacentHTML(\"beforeend\", '&lt;div id=\"container\"&gt;Hello World&lt;/div&gt;');// Native (Element)el.appendChild(newEl); 3.5 Prepend 12345678// jQuery$el.prepend(\"&lt;div id='container'&gt;hello&lt;/div&gt;\");// Native (HTML string)el.insertAdjacentHTML(\"afterbegin\", '&lt;div id=\"container\"&gt;Hello World&lt;/div&gt;');// Native (Element)el.insertBefore(newEl, el.firstChild); 3.6 insertBefore åœ¨é€‰ä¸­å…ƒç´ å‰æ’å…¥æ–°èŠ‚ç‚¹ 1234567891011121314// jQuery$newEl.insertBefore(queryString);// Native (HTML string)el.insertAdjacentHTML( \"beforebegin \", '&lt;div id=\"container\"&gt;Hello World&lt;/div&gt;');// Native (Element)const el = document.querySelector(selector);if (el.parentNode) &#123; el.parentNode.insertBefore(newEl, el);&#125; 3.7 insertAfter åœ¨é€‰ä¸­å…ƒç´ åæ’å…¥æ–°èŠ‚ç‚¹ 1234567891011// jQuery$newEl.insertAfter(queryString);// Native (HTML string)el.insertAdjacentHTML(\"afterend\", '&lt;div id=\"container\"&gt;Hello World&lt;/div&gt;');// Native (Element)const el = document.querySelector(selector);if (el.parentNode) &#123; el.parentNode.insertBefore(newEl, el.nextSibling);&#125; 3.8 is å¦‚æœåŒ¹é…ç»™å®šçš„é€‰æ‹©å™¨ï¼Œè¿”å› true 12345// jQuery$el.is(selector);// Nativeel.matches(selector); 3.9 clone æ·±æ‹·è´è¢«é€‰å…ƒç´ ã€‚ï¼ˆç”Ÿæˆè¢«é€‰å…ƒç´ çš„å‰¯æœ¬ï¼ŒåŒ…å«å­èŠ‚ç‚¹ã€æ–‡æœ¬å’Œå±æ€§ã€‚ï¼‰ 12345//jQuery$el.clone();//Nativeel.cloneNode(); //æ·±æ‹·è´æ·»åŠ å‚æ•°â€˜trueâ€™ 1234567891011- [3.10](#3.10) &lt;a name=&apos;3.10&apos;&gt;&lt;/a&gt; empty ç§»é™¤æ‰€æœ‰å­èŠ‚ç‚¹```javascript//jQuery$el.empty();//Nativeel.innerHTML = &quot;&quot;; 3.11 wrap æŠŠæ¯ä¸ªè¢«é€‰å…ƒç´ æ”¾ç½®åœ¨æŒ‡å®šçš„ HTML ç»“æ„ä¸­ã€‚ 1234567891011//jQuery$(\".inner\").wrap('&lt;div class=\"wrapper\"&gt;&lt;/div&gt;');//NativeArray.prototype.forEach.call(document.querySelector(\".inner\"), el =&gt; &#123; const wrapper = document.createElement(\"div\"); wrapper.className = \"wrapper\"; el.parentNode.insertBefore(wrapper, el); el.parentNode.removeChild(el); wrapper.appendChild(el);&#125;); 3.12 unwrap ç§»é™¤è¢«é€‰å…ƒç´ çš„çˆ¶å…ƒç´ çš„ DOM ç»“æ„ 123456789101112// jQuery$(\".inner\").unwrap();// NativeArray.prototype.forEach.call(document.querySelectorAll(\".inner\"), el =&gt; &#123; let elParentNode = el.parentNode; if (elParentNode !== document.body) &#123; elParentNode.parentNode.insertBefore(el, elParentNode); elParentNode.parentNode.removeChild(elParentNode); &#125;&#125;); 3.13 replaceWith ç”¨æŒ‡å®šçš„å…ƒç´ æ›¿æ¢è¢«é€‰çš„å…ƒç´  12345678910//jQuery$(\".inner\").replaceWith('&lt;div class=\"outer\"&gt;&lt;/div&gt;');//NativeArray.prototype.forEach.call(document.querySelectorAll(\".inner\"), el =&gt; &#123; const outer = document.createElement(\"div\"); outer.className = \"outer\"; el.parentNode.insertBefore(outer, el); el.parentNode.removeChild(el);&#125;); 3.14 simple parse è§£æ HTML/SVG/XML å­—ç¬¦ä¸² 12345678910111213141516171819202122// jQuery$(`&lt;ol&gt; &lt;li&gt;a&lt;/li&gt; &lt;li&gt;b&lt;/li&gt;&lt;/ol&gt;&lt;ol&gt; &lt;li&gt;c&lt;/li&gt; &lt;li&gt;d&lt;/li&gt;&lt;/ol&gt;`);// Nativerange = document.createRange();parse = range.createContextualFragment.bind(range);parse(`&lt;ol&gt; &lt;li&gt;a&lt;/li&gt; &lt;li&gt;b&lt;/li&gt;&lt;/ol&gt;&lt;ol&gt; &lt;li&gt;c&lt;/li&gt; &lt;li&gt;d&lt;/li&gt;&lt;/ol&gt;`); â¬† å›åˆ°é¡¶éƒ¨ AjaxFetch API æ˜¯ç”¨äºæ›¿æ¢ XMLHttpRequest å¤„ç† ajax çš„æ–°æ ‡å‡†ï¼ŒChrome å’Œ Firefox å‡æ”¯æŒï¼Œæ—§æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ polyfills æä¾›æ”¯æŒã€‚ IE9+ è¯·ä½¿ç”¨ github/fetchï¼ŒIE8+ è¯·ä½¿ç”¨ fetch-ie8ï¼ŒJSONP è¯·ä½¿ç”¨ fetch-jsonpã€‚ 4.1 ä»æœåŠ¡å™¨è¯»å–æ•°æ®å¹¶æ›¿æ¢åŒ¹é…å…ƒç´ çš„å†…å®¹ã€‚ 12345678910// jQuery$(selector).load(url, completeCallback);// Nativefetch(url) .then(data =&gt; data.text()) .then(data =&gt; &#123; document.querySelector(selector).innerHTML = data; &#125;) .then(completeCallback); â¬† å›åˆ°é¡¶éƒ¨ Eventså®Œæ•´åœ°æ›¿ä»£å‘½åç©ºé—´å’Œäº‹ä»¶ä»£ç†ï¼Œé“¾æ¥åˆ° https://github.com/oneuijs/oui-dom-events 5.0 Document ready by DOMContentLoaded 12345678910// jQuery$(document).ready(eventHandler);// Native// æ£€æµ‹ DOMContentLoaded æ˜¯å¦å·²å®Œæˆif (document.readyState !== \"loading\") &#123; eventHandler();&#125; else &#123; document.addEventListener(\"DOMContentLoaded\", eventHandler);&#125; 5.1 ä½¿ç”¨ on ç»‘å®šäº‹ä»¶ 12345// jQuery$el.on(eventName, eventHandler);// Nativeel.addEventListener(eventName, eventHandler); 5.2 ä½¿ç”¨ off è§£ç»‘äº‹ä»¶ 12345// jQuery$el.off(eventName, eventHandler);// Nativeel.removeEventListener(eventName, eventHandler); 5.3 Trigger 123456789101112// jQuery$(el).trigger(\"custom-event\", &#123; key1: \"data\" &#125;);// Nativeif (window.CustomEvent) &#123; const event = new CustomEvent(\"custom-event\", &#123; detail: &#123; key1: \"data\" &#125; &#125;);&#125; else &#123; const event = document.createEvent(\"CustomEvent\"); event.initCustomEvent(\"custom-event\", true, true, &#123; key1: \"data\" &#125;);&#125;el.dispatchEvent(event); â¬† å›åˆ°é¡¶éƒ¨ Utilitieså¤§éƒ¨åˆ†å®ç”¨å·¥å…·éƒ½èƒ½åœ¨ native API ä¸­æ‰¾åˆ°. å…¶ä»–é«˜çº§åŠŸèƒ½å¯ä»¥é€‰ç”¨ä¸“æ³¨äºè¯¥é¢†åŸŸçš„ç¨³å®šæ€§å’Œæ€§èƒ½éƒ½æ›´å¥½çš„åº“æ¥ä»£æ›¿ï¼Œæ¨è lodashã€‚ 6.1 åŸºæœ¬å·¥å…· isArray æ£€æµ‹å‚æ•°æ˜¯ä¸æ˜¯æ•°ç»„ã€‚ 12345// jQuery$.isArray(range);// NativeArray.isArray(range); isWindow æ£€æµ‹å‚æ•°æ˜¯ä¸æ˜¯ windowã€‚ 1234567// jQuery$.isWindow(obj);// Nativefunction isWindow(obj) &#123; return obj !== null &amp;&amp; obj !== undefined &amp;&amp; obj === obj.window;&#125; inArray åœ¨æ•°ç»„ä¸­æœç´¢æŒ‡å®šå€¼å¹¶è¿”å›ç´¢å¼• (æ‰¾ä¸åˆ°åˆ™è¿”å› -1)ã€‚ 12345678// jQuery$.inArray(item, array);// Nativearray.indexOf(item) &gt; -1;// ES6-wayarray.includes(item); isNumeric æ£€æµ‹ä¼ å…¥çš„å‚æ•°æ˜¯ä¸æ˜¯æ•°å­—ã€‚Use typeof to decide the type or the type example for better accuracy. 1234567// jQuery$.isNumeric(item);// Nativefunction isNumeric(n) &#123; return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);&#125; isFunction æ£€æµ‹ä¼ å…¥çš„å‚æ•°æ˜¯ä¸æ˜¯ JavaScript å‡½æ•°å¯¹è±¡ã€‚ 12345678910111213// jQuery$.isFunction(item);// Nativefunction isFunction(item) &#123; if (typeof item === \"function\") &#123; return true; &#125; var type = Object.prototype.toString(item); return ( type === \"[object Function]\" || type === \"[object GeneratorFunction]\" );&#125; isEmptyObject æ£€æµ‹å¯¹è±¡æ˜¯å¦ä¸ºç©º (åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§). 1234567// jQuery$.isEmptyObject(obj);// Nativefunction isEmptyObject(obj) &#123; return Object.keys(obj).length === 0;&#125; isPlainObject æ£€æµ‹æ˜¯ä¸æ˜¯æ‰å¹³å¯¹è±¡ (ä½¿ç”¨ â€œ{}â€ æˆ– â€œnew Objectâ€ åˆ›å»º). 12345678910111213141516171819202122232425// jQuery$.isPlainObject(obj);// Nativefunction isPlainObject(obj) &#123; if ( typeof obj !== \"object\" || obj.nodeType || (obj !== null &amp;&amp; obj !== undefined &amp;&amp; obj === obj.window) ) &#123; return false; &#125; if ( obj.constructor &amp;&amp; !Object.prototype.hasOwnProperty.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) &#123; return false; &#125; return true;&#125; extend åˆå¹¶å¤šä¸ªå¯¹è±¡çš„å†…å®¹åˆ°ç¬¬ä¸€ä¸ªå¯¹è±¡ã€‚object.assign æ˜¯ ES6 APIï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ polyfillã€‚ 12345// jQuery$.extend(&#123;&#125;, defaultOpts, opts);// NativeObject.assign(&#123;&#125;, defaultOpts, opts); trim ç§»é™¤å­—ç¬¦ä¸²å¤´å°¾ç©ºç™½ã€‚ 12345// jQuery$.trim(string);// Nativestring.trim(); map å°†æ•°ç»„æˆ–å¯¹è±¡è½¬åŒ–ä¸ºåŒ…å«æ–°å†…å®¹çš„æ•°ç»„ã€‚ 12345// jQuery$.map(array, (value, index) =&gt; &#123;&#125;);// Nativearray.map((value, index) =&gt; &#123;&#125;); each è½®è¯¢å‡½æ•°ï¼Œå¯ç”¨äºå¹³æ»‘çš„è½®è¯¢å¯¹è±¡å’Œæ•°ç»„ã€‚ 12345// jQuery$.each(array, (index, value) =&gt; &#123;&#125;);// Nativearray.forEach((value, index) =&gt; &#123;&#125;); grep æ‰¾åˆ°æ•°ç»„ä¸­ç¬¦åˆè¿‡æ»¤å‡½æ•°çš„å…ƒç´ ã€‚ 12345// jQuery$.grep(array, (value, index) =&gt; &#123;&#125;);// Nativearray.filter((value, index) =&gt; &#123;&#125;); type æ£€æµ‹å¯¹è±¡çš„ JavaScript [Class] å†…éƒ¨ç±»å‹ã€‚ 1234567891011// jQuery$.type(obj);// Nativefunction type(item) &#123; const reTypeOf = /(?:^\\[object\\s(.*?)\\]$)/; return Object.prototype.toString .call(item) .replace(reTypeOf, \"$1\") .toLowerCase();&#125; merge åˆå¹¶ç¬¬äºŒä¸ªæ•°ç»„å†…å®¹åˆ°ç¬¬ä¸€ä¸ªæ•°ç»„ã€‚ 12345678910111213141516// jQuery$.merge(array1, array2);// Native// ä½¿ç”¨ concatï¼Œä¸èƒ½å»é™¤é‡å¤å€¼function merge(...args) &#123; return [].concat(...args);&#125;// ES6ï¼ŒåŒæ ·ä¸èƒ½å»é™¤é‡å¤å€¼array1 = [...array1, ...array2];// ä½¿ç”¨ Setï¼Œå¯ä»¥å»é™¤é‡å¤å€¼function merge(...args) &#123; return Array.from(new Set([].concat(...args)));&#125; now è¿”å›å½“å‰æ—¶é—´çš„æ•°å­—å‘ˆç°ã€‚ 12345// jQuery$.now();// NativeDate.now(); proxy ä¼ å…¥å‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ç»‘å®šæŒ‡å®šä¸Šä¸‹æ–‡ã€‚ 12345// jQuery$.proxy(fn, context);// Nativefn.bind(context); makeArray ç±»æ•°ç»„å¯¹è±¡è½¬åŒ–ä¸ºçœŸæ­£çš„ JavaScript æ•°ç»„ã€‚ 12345678// jQuery$.makeArray(arrayLike);// NativeArray.prototype.slice.call(arrayLike);// ES6-wayArray.from(arrayLike); 6.2 åŒ…å« æ£€æµ‹ DOM å…ƒç´ æ˜¯ä¸æ˜¯å…¶ä»– DOM å…ƒç´ çš„åä»£. 12345// jQuery$.contains(el, child);// Nativeel !== child &amp;&amp; el.contains(child); 6.3 Globaleval å…¨å±€æ‰§è¡Œ JavaScript ä»£ç ã€‚ 12345678910111213// jQuery$.globaleval(code);// Nativefunction Globaleval(code) &#123; const script = document.createElement(\"script\"); script.text = code; document.head.appendChild(script).parentNode.removeChild(script);&#125;// Use eval, but context of eval is current, context of $.Globaleval is global.eval(code); 6.4 è§£æ parseHTML è§£æå­—ç¬¦ä¸²ä¸º DOM èŠ‚ç‚¹æ•°ç»„. 12345678910111213141516// jQuery$.parseHTML(htmlString);// Nativefunction parseHTML(string) &#123; const context = document.implementation.createHTMLDocument(); // Set the base href for the created document so any parsed elements with URLs // are based on the document's URL const base = context.createElement(\"base\"); base.href = document.location.href; context.head.appendChild(base); context.body.innerHTML = string; return context.body.children;&#125; parseJSON ä¼ å…¥æ ¼å¼æ­£ç¡®çš„ JSON å­—ç¬¦ä¸²å¹¶è¿”å› JavaScript å€¼. 12345// jQuery$.parseJSON(str);// NativeJSON.parse(str); â¬† å›åˆ°é¡¶éƒ¨ PromisesPromise ä»£è¡¨å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœã€‚jQuery ç”¨å®ƒè‡ªå·±çš„æ–¹å¼å¤„ç† promisesï¼ŒåŸç”Ÿ JavaScript éµå¾ª Promises/A+ æ ‡å‡†å®ç°äº†æœ€å° API æ¥å¤„ç† promisesã€‚ 7.1 done, fail, always done ä¼šåœ¨ promise è§£å†³æ—¶è°ƒç”¨ï¼Œfail ä¼šåœ¨ promise æ‹’ç»æ—¶è°ƒç”¨ï¼Œalways æ€»ä¼šè°ƒç”¨ã€‚ 12345678// jQuery$promise .done(doneCallback) .fail(failCallback) .always(alwaysCallback);// Nativepromise.then(doneCallback, failCallback).then(alwaysCallback, alwaysCallback); 7.2 when when ç”¨äºå¤„ç†å¤šä¸ª promisesã€‚å½“å…¨éƒ¨ promises è¢«è§£å†³æ—¶è¿”å›ï¼Œå½“ä»»ä¸€ promise è¢«æ‹’ç»æ—¶æ‹’ç»ã€‚ 123456// jQuery$.when($promise1, $promise2).done((promise1Result, promise2Result) =&gt; &#123;&#125;);// NativePromise.all([$promise1, $promise2]).then([promise1Result, promise2Result] =&gt; &#123;&#125;); 7.3 Deferred Deferred æ˜¯åˆ›å»º promises çš„ä¸€ç§æ–¹å¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// jQueryfunction asyncFunc() &#123; const defer = new $.Deferred(); setTimeout(() =&gt; &#123; if (true) &#123; defer.resolve(\"some_value_computed_asynchronously\"); &#125; else &#123; defer.reject(\"failed\"); &#125; &#125;, 1000); return defer.promise();&#125;// Nativefunction asyncFunc() &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; if (true) &#123; resolve(\"some_value_computed_asynchronously\"); &#125; else &#123; reject(\"failed\"); &#125; &#125;, 1000); &#125;);&#125;// Deferred wayfunction defer() &#123; const deferred = &#123;&#125;; const promise = new Promise((resolve, reject) =&gt; &#123; deferred.resolve = resolve; deferred.reject = reject; &#125;); deferred.promise = () =&gt; &#123; return promise; &#125;; return deferred;&#125;function asyncFunc() &#123; const defer = defer(); setTimeout(() =&gt; &#123; if (true) &#123; defer.resolve(\"some_value_computed_asynchronously\"); &#125; else &#123; defer.reject(\"failed\"); &#125; &#125;, 1000); return defer.promise();&#125; â¬† å›åˆ°é¡¶éƒ¨ Animation 8.1 Show &amp; Hide 12345678// jQuery$el.show();$el.hide();// Native// æ›´å¤š show æ–¹æ³•çš„ç»†èŠ‚è¯¦è§ https://github.com/oneuijs/oui-dom-utils/blob/master/src/index.js#L363el.style.display = \"\" | \"inline\" | \"inline-block\" | \"inline-table\" | \"block\";el.style.display = \"none\"; 8.2 Toggle æ˜¾ç¤ºæˆ–éšè—å…ƒç´ ã€‚ 123456789101112// jQuery$el.toggle();// Nativeif ( el.ownerDocument.defaultView.getComputedStyle(el, null).display === \"none\") &#123; el.style.display = \"\" | \"inline\" | \"inline-block\" | \"inline-table\" | \"block\";&#125; else &#123; el.style.display = \"none\";&#125; 8.3 FadeIn &amp; FadeOut 12345678910// jQuery$el.fadeIn(3000);$el.fadeOut(3000);// Nativeel.style.transition = \"opacity 3s\";// fadeInel.style.opacity = \"1\";// fadeOutel.style.opacity = \"0\"; 8.4 FadeTo è°ƒæ•´å…ƒç´ é€æ˜åº¦ã€‚ 12345// jQuery$el.fadeTo(\"slow\", 0.15);// Nativeel.style.transition = \"opacity 3s\"; // å‡è®¾ 'slow' ç­‰äº 3 ç§’el.style.opacity = \"0.15\"; 8.5 FadeToggle åŠ¨ç”»è°ƒæ•´é€æ˜åº¦ç”¨æ¥æ˜¾ç¤ºæˆ–éšè—ã€‚ 1234567891011// jQuery$el.fadeToggle();// Nativeel.style.transition = \"opacity 3s\";const &#123; opacity &#125; = el.ownerDocument.defaultView.getComputedStyle(el, null);if (opacity === \"1\") &#123; el.style.opacity = \"0\";&#125; else &#123; el.style.opacity = \"1\";&#125; 8.6 SlideUp &amp; SlideDown 1234567891011// jQuery$el.slideUp();$el.slideDown();// Nativeconst originHeight = \"100px\";el.style.transition = \"height 3s\";// slideUpel.style.height = \"0px\";// slideDownel.style.height = originHeight; 8.7 SlideToggle æ»‘åŠ¨åˆ‡æ¢æ˜¾ç¤ºæˆ–éšè—ã€‚ 123456789101112// jQuery$el.slideToggle();// Nativeconst originHeight = \"100px\";el.style.transition = \"height 3s\";const &#123; height &#125; = el.ownerDocument.defaultView.getComputedStyle(el, null);if (parseInt(height, 10) === 0) &#123; el.style.height = originHeight;&#125; else &#123; el.style.height = \"0px\";&#125; 8.8 Animate æ‰§è¡Œä¸€ç³»åˆ— CSS å±æ€§åŠ¨ç”»ã€‚ 12345678// jQuery$el.animate(&#123; params &#125;, speed);// Nativeel.style.transition = 'all ' + speed;Object.keys(params).forEach((key) =&gt; el.style[key] = params[key];) â¬† å›åˆ°é¡¶éƒ¨ Alternatives ä½ å¯èƒ½ä¸éœ€è¦ jQuery (You Might Not Need jQuery) - å¦‚ä½•ä½¿ç”¨åŸç”Ÿ JavaScript å®ç°é€šç”¨äº‹ä»¶ï¼Œå…ƒç´ ï¼Œajax ç­‰ç”¨æ³•ã€‚ npm-dom ä»¥åŠ webmodules - åœ¨ NPM ä¸Šæä¾›ç‹¬ç«‹ DOM æ¨¡å—çš„ç»„ç»‡ Browser Support Latest âœ” Latest âœ” 10+ âœ” Latest âœ” 6.1+ âœ” LicenseMIT","tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://blog.v2next.com/tags/jQuery/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://blog.v2next.com/tags/JavaScript/"},{"name":"Web","slug":"Web","permalink":"https://blog.v2next.com/tags/Web/"},{"name":"Github","slug":"Github","permalink":"https://blog.v2next.com/tags/Github/"}]},{"title":"å…³äº WebAssembly / wasm","date":"2018-09-05T06:32:13.000Z","path":"2018/09/05/about-webassembly-wasm/","text":"æœ€è¿‘åœ¨çœ‹ WebAssemblyï¼Œæ”¶é›†äº†ä¸€äº›èµ„æ–™ã€‚åé¢å‡†å¤‡å†™ä¸€äº› samplesã€‚ MDN ä¸Šå…³äº WebAssembly çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚MDN Github ç¤ºä¾‹ï¼šhttps://github.com/mdn/webassembly-examplesMDN WebAssembly æ–‡æ¡£ï¼š https://developer.mozilla.org/en-US/docs/WebAssembly. MS Blazor:å¾®è½¯ Blazor = Browser + Razor æ˜¯ä¸€ä¸ªè¯•éªŒçš„ Web UI æ¡†æ¶åŸºäº C#ï¼ŒRazor å’Œ HTMLï¼Œ é€šè¿‡ WebAssembly è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚ https://blogs.msdn.microsoft.com/webdev/2018/02/06/blazor-experimental-project Blazor demo: https://blazor-demo.github.io/Blazor demo repo: https://github.com/blazor-demo ä¸‹é¢æ˜¯é€›çŸ¥ä¹å‘ç°çš„ Vim å’Œ WIndows 2000 è·‘åœ¨ wasm ä¸Šï¼Œå¾ˆèµï¼ğŸ‘ éå¸¸æœ‰è¶£ï¼ğŸ˜„ WebAssembly Vim:https://github.com/rhysd/vim.wasmhttps://zhuanlan.zhihu.com/p/39879691 WebAssembly Windows 2000:https://yq.aliyun.com/roundtable/289191https://zhuanlan.zhihu.com/p/44076682","tags":[{"name":"WebAssembly","slug":"WebAssembly","permalink":"https://blog.v2next.com/tags/WebAssembly/"},{"name":"wasm","slug":"wasm","permalink":"https://blog.v2next.com/tags/wasm/"},{"name":"Blazor","slug":"Blazor","permalink":"https://blog.v2next.com/tags/Blazor/"},{"name":"fun","slug":"fun","permalink":"https://blog.v2next.com/tags/fun/"}]},{"title":"ç”¨ Vue, React, Angular æ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ª","date":"2018-08-25T02:21:11.000Z","path":"2018/08/25/react-vs-vue-vs-angular/","text":"ğŸ”—ç”¨ Vue å’Œ React æ„å»ºç›¸åŒåº”ç”¨ç¨‹åºï¼ŒåŒºåˆ«åœ¨å“ªï¼Ÿ- Infoq ğŸ”—I created the exact same app in React and Vue. Here are the differences. - Medium ğŸ”—I created the same app in React and Vue (Part 2: Angular). - Medium","tags":[{"name":"React","slug":"React","permalink":"https://blog.v2next.com/tags/React/"},{"name":"Vue","slug":"Vue","permalink":"https://blog.v2next.com/tags/Vue/"}]},{"title":"ä½¿ç”¨nodejså¼€å‘WebSocketåº”ç”¨","date":"2018-08-20T05:10:10.000Z","path":"2018/08/20/nodejs-websocket/","text":"ä½¿ç”¨äº†websocket npmæ­å»º websocket server, ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ socket.ioï¼Œä½†æ˜¯socket.io å°è£…æ¯”è¾ƒå¥½ï¼ŒåŸºæœ¬ä¸ç”¨å†™ä»€ä¹ˆä»£ç ï¼Œæˆ‘è¿˜æ˜¯æƒ³å†™äº›ä»£ç ä½“éªŒä¸€ä¸‹ã€‚ ğŸ“² Chat App:https://github.com/ericwdq/ws-chat âœ‰ï¸ Backend data push:https://github.com/ericwdq/d3-demo","tags":[{"name":"NodeJS","slug":"NodeJS","permalink":"https://blog.v2next.com/tags/NodeJS/"},{"name":"WebSocket","slug":"WebSocket","permalink":"https://blog.v2next.com/tags/WebSocket/"},{"name":"ws","slug":"ws","permalink":"https://blog.v2next.com/tags/ws/"},{"name":"npm","slug":"npm","permalink":"https://blog.v2next.com/tags/npm/"}]},{"title":"Javascript Async and Await","date":"2018-03-23T08:58:12.000Z","path":"2018/03/23/Javascript-async-and-await/","text":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_functionhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await","tags":[{"name":"ES2017","slug":"ES2017","permalink":"https://blog.v2next.com/tags/ES2017/"},{"name":"Javascript","slug":"Javascript","permalink":"https://blog.v2next.com/tags/Javascript/"},{"name":"Async","slug":"Async","permalink":"https://blog.v2next.com/tags/Async/"},{"name":"Await","slug":"Await","permalink":"https://blog.v2next.com/tags/Await/"}]},{"title":"Promiseä½¿ç”¨æŠ€å·§ä¹åˆ™","date":"2018-03-22T07:24:27.000Z","path":"2018/03/22/promising-promise-tips/","text":"æœ¬æ–‡è¯‘è‡ª 9 Promising Promise Tipsã€‚ å·¥ç¨‹å¸ˆä»¬ï¼Œä½ ä»¬æ€»è¯´ Pormise å¥½ç”¨ï¼ä½†æœ‰æ—¶å€™ç”¨èµ·æ¥æ˜¯ä¸æ˜¯è¿˜å¾ˆæ‡µé€¼ã€‚æœ¬æ–‡ä¼ æˆç»™ä½ ä¹æ¡å®ç”¨çš„ Promise ä½¿ç”¨æŠ€å·§ï¼Œå¸®åŠ©ä½ å’Œå®ƒå»ºç«‹èµ·è‰¯å¥½çš„å…³ç³»ï¼ 1. ä½ å¯ä»¥åœ¨ .then å›è°ƒé‡Œè¿”å› Promiseæ˜¯çš„ï¼ä½ å¯ä»¥ .then å›è°ƒé‡Œè¿”å› Promiseï¼ è€Œä¸”ï¼Œè¿”å›çš„ promise ä¼šåœ¨æ¥ä¸‹æ¥çš„ .then è¢«è‡ªåŠ¨æ‰“å¼€ï¼ˆunwrappedï¼‰ï¼š 12345678.then(r =&gt; &#123; // è¿™æ˜¯ä¸€ä¸ª &#123; statusCode: 200 &#125; promise return serverStatusPromise(r);&#125;).then(resp =&gt; &#123; // 200ï¼›æ³¨æ„ä¸Šé¢çš„ promise è¢«è‡ªåŠ¨ unwrap äº† console.log(resp.statusCode);&#125;) 2. æ¯æ¬¡è°ƒç”¨ .then éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ Promiseå¦‚æœä½ ç†Ÿæ‚‰ JavaScript çš„é“¾å¼è°ƒç”¨ï¼Œå¯¹è¿™ç§ç”¨æ³•ä¸€å®šä¸é™Œç”Ÿã€‚ è°ƒç”¨ .then å’Œ .catch æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Promiseã€‚è¿™ä¸ªæ–°çš„ Promise å¯ä»¥ç»§ç»­ä½¿ç”¨ .then æˆ–è€… .catchã€‚ 1234567var statusProm = fetchServerStatus();var promA = statusProm.then(r =&gt; (r.statusCode === 200 ? \"good\" : \"bad\"));var promB = promA.then(r =&gt; (r === \"good\" ? \"ALL OK\" : \"NOTOK\"));var promC = statusProm.then(r =&gt; fetchThisAnotherThing()); é‡ç‚¹æ³¨æ„ï¼Œ promAã€ promB å’Œ promC è™½ç„¶ç›¸å…³ï¼Œä½†éƒ½æ˜¯ä¸åŒçš„ promise å®ä¾‹ã€‚ æˆ‘å–œæ¬¢æŠŠè¿™ç§ .then é“¾å½“åšä¸€ä¸ªå·¨å¤§çš„æ°´æš–ç³»ç»Ÿï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹å‡ºäº†æ•…éšœï¼Œçƒ­æ°´å°†æ— æ³•æµå…¥åˆ°è‡ªèŠ‚ç‚¹ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ promB æ•…éšœäº†ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸å—å½±å“ï¼Œä½†æ˜¯å¦‚æœ statusProm å‡ºé—®é¢˜äº†ï¼Œå…¶ä»–èŠ‚ç‚¹å°±ä¼šè¢«å½±å“ï¼Œä¹Ÿå°±æ˜¯è¢« rejectedã€‚ 3. åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise resolve/reject çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„è¿™æ˜¯ Promise ä¹‹æ‰€ä»¥å¥½ç”¨çš„åŸå› ã€‚ç®€å•ç†è§£ï¼Œå°±æ˜¯å¦‚æœä¸€ä¸ª promise åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œå½“å®ƒè¢« resolve æˆ–è€… reject çš„æ—¶å€™ï¼Œéƒ½ä¼šè·å¾—é€šçŸ¥ã€‚ è€Œä¸” promise æ˜¯æ— æ³•è¢«ä¿®æ”¹çš„ï¼Œå› æ­¤å®ƒå¯ä»¥éšæ„ä¼ é€’ã€‚ 12345678910111213function yourFunc() &#123; const yourAwesomeProm = makeMeProm(); // æ— è®ºåå”å”å¦‚ä½•æ¶ˆè´¹ä½ çš„ promiseï¼Œä½ çš„ promise éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œ yourEvilUncle(yourAwesomeProm); return yourAwesomeProm.then(r =&gt; importantProcessing(r));&#125;function yourEvilUncle(prom) &#123; // åå”å” return prom.then(r =&gt; Promise.reject(\"destroy!!\"));&#125; Promise çš„è®¾è®¡é¿å…äº†æ¶æ„çš„ç ´åï¼Œå¦‚æˆ‘æ‰€è¯´ï¼šâ€œæ²¡äº‹ï¼Œå¯ä»¥æŠŠ promise éšä¾¿æ‰”ï¼â€ 4. Promise æ„é€ å‡½æ•°ä¸æ˜¯ä¸‡é‡‘æ²¹æˆ‘å‘ç°æœ‰äº›å·¥ç¨‹å¸ˆåœ¨ä»»ä½•åœ°æ–¹éƒ½ä¼šä½¿ç”¨ Promise çš„ constructorï¼Œè¿˜è®¤ä¸ºè¿™å°±æ˜¯ promise çš„ä½¿ç”¨æ–¹å¼ã€‚è¿™æ˜¯ä¸å¯¹çš„ï¼Œæ ¹æœ¬åŸå› å°±æ˜¯ constructor API ä¸åŸæ¥ callback API å¾ˆåƒï¼Œè€çš„ä¹ æƒ¯å¾ˆéš¾æ”¹ã€‚ å¦‚æœä½ çš„ä»£ç ä¸­éå¸ƒ Promise constructorï¼Œä½ çš„åšæ³•å°±æ˜¯é”™çš„ï¼ Promise æ„é€ å‡½æ•°æ­£ç¡®çš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š 123456return new Promise((res, rej) =&gt; &#123; fs.readFile(\"/etc/passwd\", function(err, data) &#123; if (err) return rej(err); return res(data); &#125;);&#125;); Promise constructor åªåœ¨å°†å›è°ƒè½¬æˆ promise æ—¶ä½¿ç”¨ã€‚ çœ‹ä¸€ä¸ªå†—ä½™çš„ä¾‹å­ï¼š 1234567891011121314// é”™è¯¯ç”¨æ³•return new Promise((res, rej) =&gt; &#123; var fetchPromise = fetchSomeData(.....); fetchPromise .then(data =&gt; &#123; res(data); // é”™è¯¯çš„æ–¹å¼ &#125;) .catch(err =&gt; rej(err))&#125;)// æ­£ç¡®ç”¨æ³•// çœ‹ä¸Šå»å¯¹å°±æ˜¯å¯¹çš„return fetchSomeData(...); åœ¨ Node.js ä¸­ï¼Œæ¨èä½¿ç”¨ util.promisifyã€‚ç”¨æ¥å°†å›è°ƒ API è½¬æˆ promise å¼çš„ï¼š 12345678const &#123; promisify &#125; = require(\"util\");const fs = require(\"fs\");const readFileAsync = promisify(fs.readFile);readFileAsync(\"myfile.txt\", \"utf-8\") .then(r =&gt; console.log(r)) .catch(e =&gt; console.error(e)); 5. ä½¿ç”¨ Promise.resolveJavaScript æä¾›äº† Promise.resolve APIï¼Œæ˜¯äº§ç”Ÿ Promise å¯¹è±¡çš„ä¸€ç§å¿«æ·æ–¹å¼ï¼Œè¿™ä¸ª promise å¯¹è±¡æ˜¯è¢« resolve çš„ã€‚ 123var similarProm = new Promise(res =&gt; res(5));// ç›¸å½“äºvar prom = Promise.resolve(5); è¿™æœ‰å¾ˆå¤šä½¿ç”¨åœºæ™¯ï¼Œæˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªæ˜¯ï¼Œå°†ä¸€ä¸ªåŒæ­¥çš„å¯¹è±¡è½¬æˆä¸€ä¸ª promiseï¼š 1234// å°†ä¸€ä¸ªåŒæ­¥å‡½æ•°è½¬æˆå¼‚æ­¥çš„function foo() &#123; return Promise.resolve(5);&#125; ä¹Ÿå¯ä»¥ç”¨æ¥åœ¨ä¸ç¡®å®šè¿”å›å€¼æ˜¯æ™®é€šå¯¹è±¡è¿˜æ˜¯ promise æ—¶ï¼Œå°†è¿”å›å€¼å°è£…ä¸º promise å¯¹è±¡ï¼š 12345678910111213function goodProm(maybePromise) &#123; return Promise.resolve(maybePromise);&#125;goodProm(5).then(console.log); // 5// è¿™ä¸ª promise resolve æˆ 5var sixPromise = fetchMeNumber(6);goodProm(sixPromise).then(console.log); // 6// 5ï¼Œæ³¨æ„ï¼Œæ¯å±‚ promise éƒ½è¢«è‡ªåŠ¨ unwrap äº†goodProm(Promise.resolve(Promise.resolve(5))).then(console.log); 6. ä½¿ç”¨ Promise.rejectä¸ Promise.resolve ç±»ä¼¼ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§å¿«æ·å†™æ³• 123var rejProm = new Promise((res, reject) =&gt; reject(5));rejProm.catch(e =&gt; console.log(e)); // 5 æˆ‘æœ€å–œæ¬¢çš„ Promise.reject çš„ç”¨æ³•æ˜¯ï¼Œå°½æ—©åœ° rejectï¼š 12345678function foo(myVal) &#123; if (!mVal) &#123; return Promise.reject(new Error(\"myVal is required\")); &#125; return new Promise((res, rej) =&gt; &#123; // è¿™äº›å°†å·¨å¤§çš„ callback è½¬æˆ promise &#125;);&#125; åœ¨ .then ä¸­ä½¿ç”¨ rejectï¼š 123456.then(val =&gt; &#123; if (val != 5) &#123; return Promise.reject('Not Good'); &#125;&#125;).catch(e =&gt; console.log(e)) // Not Good 7. ä½¿ç”¨ Promise.allJavaScript è¿˜æä¾›äº† Promise.allï¼Œä½†å®ƒä¸æ˜¯ä»€ä¹ˆå¿«æ·æ–¹å¼ã€‚ å¯ä»¥å¦‚ä¸‹æ€»ç»“å®ƒçš„ç®—æ³•ï¼š æ¥å—ä¸€ä¸ª promise çš„æ•°ç»„ ç­‰å¾…æ‰€æœ‰è¿™äº› promise å®Œæˆ è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå°†æ‰€æœ‰çš„ resolve ç»“æœæ”¾è¿›ä¸€ä¸ªæ•°ç»„é‡Œ åªè¦æœ‰ä¸€ä¸ª promise å¤±è´¥/rejectedï¼Œè¿™ä¸ªæ–°çš„ promise å°†ä¼šè¢« rejected ä¸‹ä¾‹å±•ç¤ºäº†æ‰€æœ‰ promise éƒ½ resolve çš„æƒ…å†µï¼š 12345678var prom1 = Promise.resolve(5);var prom2 = fetchServerStatus(); // returns a promise of &#123;statusCode: 200&#125;Proimise.all([prom1, prom2]).then([val1, val2] =&gt; &#123; // notice that it resolves into an Array console.log(val1); // 5 console.log(val2.statusCode); // 200&#125;) ä¸‹ä¾‹å±•ç¤ºæœ‰ä¸€ä¸ªå¤±è´¥çš„æƒ…å†µï¼š 12345678var prom1 = Promise.resolve(5);var prom2 = fetchServerStatus(); // returns a promise of &#123;statusCode: 200&#125;Proimise.all([prom1, prom2]).then([val1, val2] =&gt; &#123; // notice that it resolves into an Array console.log(val1); // 5 console.log(val2.statusCode); // 200&#125;) æ³¨æ„ï¼šPromise.all æ˜¯ä¸€ç‚¹ä¸ç¬¨ï¼Œåªè¦æœ‰ä¸€ä¸ª promise è¢« reject äº†ï¼Œå®ƒå°±ç›´æ¥ rejectï¼Œä¸ä¼šç­‰åˆ°å…¶ä»– promise å®Œæˆã€‚ 8. ä¸è¦å®³æ€• reject æˆ–è€…ä¸è¦åœ¨æ¯ä¸€ä¸ª .then åé¢ä½¿ç”¨ .catchæˆ‘ä»¬æ˜¯ä¸æ˜¯å¸¸å¸¸æ„Ÿåˆ°æœ‰å¾ˆå¤šéšè—çš„é”™è¯¯æ²¡æœ‰è¢«å¤„ç†ï¼Ÿ ä¸ç”¨æ‹…å¿ƒåƒä¸‹é¢è¿™æ ·å†™ï¼š 1return fetchSomeData(...); ä½ å¯ä»¥åœ¨ä»»ä½•ä½ æƒ³å¤„ç†çš„åœ°æ–¹è§£å†³æˆ–è€…å»¶ç»­ rejectionã€‚ å¤„ç†æ‰ rejectionè¿™å¾ˆç®€å•ï¼Œåœ¨ .catch å›è°ƒä¸­ï¼Œæ— è®ºä½ è¿”å›ä»€ä¹ˆéƒ½ä¼šå˜æˆ resolveï¼Œé™¤éä½ è¿”å›ä¸€ä¸ª Promise.rejectï¼Œæ‰ä¼šå»¶ç»­ rejectionã€‚ 12345678910.then(() =&gt; 5.length) // &lt;-- something wrong happenned here.catch(e =&gt; &#123; return 5; // &lt;-- making javascript great again&#125;).then(r =&gt; &#123; console.log(r); // 5&#125;).catch(e =&gt; &#123; console.error(e); // this function will never be called :)&#125;) reject rejectionreject rejection çš„æ–¹æ³•å°±æ˜¯ä»€ä¹ˆéƒ½ä¸åšã€‚é€šå¸¸ï¼Œçˆ¶å‡½æ•°æ¯”èµ·å½“å‰å‡½æ•°æ›´æ“…é•¿å¤„ç† rejectionã€‚ è¦è®°ä½ä¸€ä¸ªè¦ç‚¹ï¼Œä¸€æ—¦ä½ å†™äº† .catch å°±æ„å‘³ç€ rejection å·²ç»è¢«å¤„ç†äº†ï¼Œè¿™ä¸åŒæ­¥çš„ try/catch ç±»ä¼¼ã€‚ å¦‚æœä½ ç¡®å®æƒ³è¦é˜»æ–­ rejectionï¼ˆæˆ‘å¼ºçƒˆä¸æ¨èè¿™ä¹ˆåšï¼‰ï¼š 1234567891011.then(() =&gt; 5.length) // &lt;-- something wrong happenned here.catch(e =&gt; &#123; errorLogger(e); // do something impure return Promise.reject(e); // reject it, Yes you can do that!&#125;).then(r =&gt; &#123; console.log(r); // this .then (or any subsequent .then) will never be called as we rejected it above :)&#125;).catch(e =&gt; &#123; console.error(e); //&lt;-- it becomes this catch's problem&#125;) .then(x,y) å’Œ then(x).catch(x) .then æ¥å—ç¬¬äºŒä¸ªå›è°ƒå‚æ•°æ¥å¤„ç†é”™è¯¯ã€‚è™½ç„¶ä¸ then(x).catch(x) çœ‹ä¸€èµ·ç±»ä¼¼ï¼Œä½†å´æœ‰æ‰€ä¸åŒï¼Œä¸åŒç‚¹åœ¨äºå¯æ•è·çš„é”™è¯¯ã€‚ ä¸‹é¢ä¾‹å­å¾ˆå¥½åœ°è¯´äº†è¿™ä¸ªé—®é¢˜ï¼š 123456789101112.then(function() &#123; return Promise.reject(new Error('something wrong happened'));&#125;).catch(function(e) &#123; console.error(e); // something wrong happened&#125;);.then(function() &#123; return Promise.reject(new Error('something wrong happened'));&#125;, function(e) &#123; // callback handles error coming from the chain above the current `.then` console.error(e); // no error logged&#125;); 9. é¿å… .then åµŒå¥—è¿™ä¸ªåŸåˆ™ç†è§£èµ·æ¥å¾ˆç®€å•ï¼Œå°±æ˜¯é¿å…åœ¨ .then é‡Œé¢ç»§ç»­ä½¿ç”¨ .then æˆ–è€… .catchã€‚ç›¸ä¿¡æˆ‘ï¼Œè¿™ç»å¯¹æ˜¯å¯ä»¥é¿å…çš„ã€‚ 12345678910111213141516171819// é”™è¯¯ç”¨æ³•request(opts).catch(err =&gt; &#123; if (err.statusCode === 400) &#123; return request(opts) .then(r =&gt; r.text()) .catch(err2 =&gt; console.error(err2)); &#125;&#125;);// æ­£ç¡®ç”¨æ³•request(opts) .catch(err =&gt; &#123; if (err.statusCode === 400) &#123; return request(opts); &#125; return Promise.reject(err); &#125;) .then(r =&gt; r.text()) .catch(err =&gt; console.erro(err)); å°±ç®—æ˜¯å¦‚ä¸‹è¿™ç§æƒ…å†µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Promise.all æ¥è§£å†³ï¼š 12345678.then(myVal =&gt; &#123; const promA = foo(myVal); const promB = anotherPromMake(myVal); return promA .then(valA =&gt; &#123; return promB.then(valB =&gt; hungryFunc(valA, valB)); // very hungry! &#125;)&#125;) å¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼š 123456789.then(myVal =&gt; &#123; const promA = foo(myVal); const promB = anotherPromMake(myVal); return Promise.all([prom, anotherProm])&#125;).then(([valA, valB]) =&gt; &#123; // putting ES6 destructing to good use console.log(valA, valB) // all the resolved values return hungryFunc(valA, valB)&#125;) å¥½äº†ï¼ŒçœŸå¿ƒå¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åˆ°ä½ æ›´å¥½åœ°ç†è§£ Promiseï¼ åŸæ–‡","tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://blog.v2next.com/tags/Javascript/"},{"name":"ES6","slug":"ES6","permalink":"https://blog.v2next.com/tags/ES6/"},{"name":"Promise","slug":"Promise","permalink":"https://blog.v2next.com/tags/Promise/"}]},{"title":"Parcelï¼Œé›¶é…ç½®å¼€å‘ React åº”ç”¨ï¼","date":"2017-12-28T03:27:17.000Z","path":"2017/12/28/Create-a-React-app-with-zero-configuration-using-Parcel/","text":"æœ¬æ–‡è¯‘è‡ª Create a React app with zero configuration using Parcel å·²ç»ç»å†ä¸‰å››å¹´çš„å‘å±•ï¼Œç¤¾åŒºå’ŒæŠ€æœ¯è¶‹äºæˆç†Ÿï¼Œå®ƒå·²ç»æˆä¸ºäº†å‰ç«¯å¼€å‘ä¸­çš„å¿…å¤‡å·¥å…·ã€‚é‚£é—®é¢˜æ¥äº†ï¼Œä¼šæœ‰æ–°çš„å·¥å…·æ¥æŒ‘æˆ˜ webpack çš„åœ°ä½å—ï¼Ÿå„ä½ä¸å¦¨çœ‹çœ‹æœ¬æ–‡çš„ Parcelï¼Œè¯´ä¸å®šå°±æ˜¯æœªæ¥çš„ä¸»è§’ã€‚ ä¸€å¼€å§‹ä½¿ç”¨ React çš„ç—›è‹¦æƒ³å¿…å¤§å®¶éƒ½ç»å†è¿‡ã€‚åœ¨çœŸæ­£è¿›å…¥ç¼–ç ä¹‹å‰ï¼Œéœ€è¦èŠ±å¤§é‡çš„æ—¶é—´ææ¸…æ¥šå¦‚ä½•é…ç½® webpackã€‚ Create React App é¡¹ç›®çš„æµè¡Œå°±æ˜¯å› ä¸ºå®ƒç®€åŒ–äº†é…ç½®ï¼ŒåŠ å¿«äº†é¡¹ç›®åˆå§‹åŒ–çš„é€Ÿåº¦ã€‚ä¿—è¯è¯´ï¼Œæˆä¹Ÿé£äº‘ï¼Œè´¥ä¹Ÿé£äº‘ã€‚å°† webpack é…ç½®éšè—æ—¢æ˜¯å®ƒçš„ä¼˜ç‚¹ï¼Œä¹Ÿæ˜¯å®ƒçš„ç¼ºç‚¹ã€‚éšç€é¡¹ç›®ä¸æ–­åœ°æ‰©å¤§ï¼Œä½ å¯èƒ½æƒ³åšä¸€äº›é«˜çº§é…ç½®ï¼Œå°±éœ€è¦å°† webpack é…ç½®ä» Create React App â€œæ‹–â€ï¼ˆejectï¼‰å‡ºæ¥ï¼Œè¿™æ®µé…ç½®å¼‚å¸¸å¤æ‚ï¼Œè¿™å°±å›åˆ°äº†è€é—®é¢˜â€”â€”webpack è¿˜æ˜¯å¾—å­¦ä¹ å•Šï¼ æœ€è¿‘ï¼Œä¸€ä¸ªæ–°çš„æ„å»ºå·¥å…· Parcel å‡ºç°äº†ï¼Œå®ƒæ˜¯é›¶é…ç½®çš„ï¼çœŸçš„ä¸æ•¢ç›¸ä¿¡æœ‰è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼Œçœ‹èµ·æ¥æ‰€æœ‰é—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£ã€‚ æˆ‘åœ¨ä¸€ä¸ªå¤§é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨ Parcelï¼Œæ•ˆæœæ‹”ç¾¤ã€‚build å‡ºåŒ…ç»è¿‡ä¼˜åŒ–ï¼Œè¦çŸ¥é“ç”¨ webpack çš„æ—¶å€™ï¼Œæˆ‘éœ€è¦èŠ±æ•°å¤©æ—¶é—´æ¥å®ç°ç›¸åŒçš„ä¼˜åŒ–ã€‚ æˆ‘æƒ³è¿™ä¸ªå·¥å…·æ½œåŠ›æ— é™ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒæ¥è½»æ¾æ­å»ºä¸€ä¸ª React åº”ç”¨ã€‚ ä½¿ç”¨ Parcel å¼€å‘ React åº”ç”¨é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª NPM é¡¹ç›®ï¼š 123mkdir react-parcelcd react-parcelnpm init npm init ä¼šè¯¢é—®ä½ ä¸€äº›é—®é¢˜ï¼Œç›´æ¥æŒ‰ enter é”®ä½¿ç”¨é»˜è®¤å€¼å³å¯ã€‚ ä¸‹ä¸€æ­¥å®‰è£… Reactã€babel å’Œ Parcel ä¾èµ–ï¼š 123mkdir react-parcelcd react-parcelnpm init æ¥ä¸‹æ¥ï¼Œåˆ›å»º .babelrc æ–‡ä»¶ï¼Œå‘Šè¯‰ parcel æˆ‘ä»¬ä½¿ç”¨ ES6 å’Œ React JSXï¼š 123&#123; \"presets\": [\"env\", \"react\"]&#125; åˆ›å»º React Appï¼Œå°±ä¸¤ä¸ªæ–‡ä»¶ï¼š index.jsï¼š 1234567891011import React from \"react\";import ReactDOM from \"react-dom\";class HelloMessage extends React.Component &#123; render() &#123; return &lt;div&gt;Hello &#123;this.props.name&#125;&lt;/div&gt;; &#125;&#125;var mountNode = document.getElementById(\"app\");ReactDOM.render(&lt;HelloMessage name=\"Jane\" /&gt;, mountNode); index.html: 12345678910&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;React starter app&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"app\"&gt;&lt;/div&gt; &lt;script src=\"index.js\"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; ç°åœ¨ï¼Œåªéœ€è¦åœ¨ package.json æ·»åŠ ä¸€ä¸ªå¯åŠ¨è„šæœ¬å°±å¯ä»¥æŠŠæˆ‘ä»¬çš„åº”ç”¨è·‘èµ·æ¥äº†ï¼š 123\"scripts\": &#123; \"start\": \"parcel index.html\",&#125;, æå®šï¼Œå¯åŠ¨ï¼š 1npm start parcel-react - Github Repo åŸæ–‡","tags":[{"name":"React","slug":"React","permalink":"https://blog.v2next.com/tags/React/"},{"name":"Parcel","slug":"Parcel","permalink":"https://blog.v2next.com/tags/Parcel/"},{"name":"Build System","slug":"Build-System","permalink":"https://blog.v2next.com/tags/Build-System/"}]},{"title":"èŠä¸€èŠæ€§èƒ½ä¼˜åŒ–","date":"2017-12-27T03:28:08.000Z","path":"2017/12/27/Talk-about-performance-optimization/","text":"ä¸ç®¡æ˜¯åº”ä»˜å‰ç«¯é¢è¯•è¿˜æ˜¯æ”¹è¿›äº§å“ä½“éªŒï¼Œæ€§èƒ½ä¼˜åŒ–éƒ½æ˜¯èº²ä¸å¼€çš„è¯é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬å°±ç®€å•èŠä¸€èŠæ€§èƒ½ä¼˜åŒ–ã€‚ ä¼ è¾“å¿« vs ä½“éªŒå¿«ä¼˜åŒ–çš„ç›®çš„æ˜¯è®©ç”¨æˆ·æœ‰â€œå¿«â€çš„æ„Ÿå—ï¼Œé‚£å¦‚ä½•è®©ç”¨æˆ·æ„Ÿå—åˆ°å¿«å‘¢ï¼Ÿ åŠ è½½é€Ÿåº¦çœŸçš„å¾ˆå¿«ï¼Œç”¨æˆ·æ‰“å¼€è¾“å…¥ç½‘å€æŒ‰ä¸‹å›è½¦ç«‹å³çœ‹åˆ°äº†é¡µé¢åŠ è½½é€Ÿåº¦å¹¶æ²¡æœ‰å˜å¿«ï¼Œä½†ç”¨æˆ·æ„Ÿè§‰ä½ çš„ç½‘ç«™å¾ˆå¿« ä¼ è¾“å¿«æ‰€è°“çš„çœŸå¿«å°±æ˜¯ç½‘ç«™èµ„æºä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç”¨æˆ·æµè§ˆå™¨ï¼Œé‚£å¦‚ä½•å»åšå‘¢ï¼Ÿæˆ‘ä»¬å…ˆç²—ç•¥å®šä¸€äº›åŸåˆ™ï¼š ä¼ è¾“çš„å†…å®¹ä½“ç§¯è¦å° ä¼ è¾“çš„å†…å®¹æ•°é‡è¦å°‘ ç½‘é€Ÿè¦è¶³å¤Ÿå¿« æœåŠ¡å™¨å“åº”è¦åŠæ—¶ èƒ½é‡å¤åˆ©ç”¨çš„èµ„æºè¦åˆ©ç”¨å¥½ æš‚æ—¶ä¸éœ€è¦çš„èµ„æºå…ˆä¸è¦ å°†æ¥éœ€è¦çš„èµ„æºæŠ½ç©ºè¦ ä¸‹é¢å°±èƒ½é¡ºè—¤æ‘¸ç“œï¼Œåšä¸ªç»†åŒ– ä¼ è¾“çš„å†…å®¹ä½“ç§¯è¦å° å›¾ç‰‡è¦å‹ç¼© å›¾ç‰‡æ ¹æ®æ”¯æŒæƒ…å†µé€‰æ‹©ä½“ç§¯æ›´å°çš„æ ¼å¼(å¦‚ webp) cssã€js å†…å®¹å‹ç¼© æœåŠ¡ç«¯å¼€å¯ Gzipï¼Œåœ¨ä¼ è¾“æ•°æ®ä¹‹å‰å†æ¬¡å‹ç¼© ä¼ è¾“çš„å†…å®¹æ•°é‡è¦å°‘ å›¾ç‰‡å›¾æ ‡åˆå¹¶ï¼ˆcss spriteï¼‰ã€svg å›¾æ ‡åˆå¹¶ï¼ˆsvg spriteï¼‰ cssã€js æ–‡ä»¶æ‰“åŒ…åˆå¹¶ ç½‘é€Ÿè¦è¶³å¤Ÿå¿« æœåŠ¡å™¨å‡ºå£å¸¦å®½è¦å¤Ÿ è€ƒè™‘åˆ°å—åŒ—å·®å¼‚ã€è¿è¥å•†å·®å¼‚ï¼Œåœ¨ä¸åŒåœ°åŒºéƒ¨ç½²æœåŠ¡å™¨ é™æ€èµ„æºæ”¾ CDN æœåŠ¡å™¨å“åº”è¦åŠæ—¶ æ¥å£å“åº”é€Ÿåº¦è¦å¿«(æ•°æ®åº“ä¼˜åŒ–ã€æŸ¥è¯¢ä¼˜åŒ–ã€ç®—æ³•ä¼˜åŒ–) cpuã€å†…å­˜ã€ç¡¬ç›˜è¯»å†™ä¸è¦æˆä¸ºç“¶é¢ˆï¼›å¤šåŠ å‡ å°æœºå™¨ é‡è¦é¡µé¢(é¦–é¡µ)é™æ€åŒ–ã€‚æœåŠ¡ç«¯æå‰æ¸²æŸ“åé¦–é¡µç”Ÿæˆé™æ€é¡µé¢ï¼Œç”¨æˆ·è®¿é—®é¦–é¡µç›´æ¥è¿”å›é™æ€é¡µé¢ï¼Œä¸éœ€è¦åƒå…¶ä»–é¡µé¢é‚£æ ·è¿˜éœ€åŠ è½½ cssã€js å†è·å–æ•°æ®æ¸²æŸ“å±•ç¤º èƒ½é‡å¤åˆ©ç”¨çš„èµ„æºè¦åˆ©ç”¨å¥½ æœåŠ¡å™¨è®¾ç½®åˆé€‚çš„é™æ€èµ„æºç¼“å­˜æ—¶é—´ å‰ç«¯æ–‡ä»¶æ‰“åŒ…æ—¶åšåˆç†çš„åˆ†å—ï¼Œè®©å…¬å…±çš„èµ„æºç¼“å­˜åèƒ½è¢«å¤šä¸ªé¡µé¢å¤ç”¨ æš‚æ—¶ä¸éœ€è¦çš„èµ„æºå…ˆä¸è¦ å›¾ç‰‡æ‡’åŠ è½½ åŠŸèƒ½ã€æ¨¡å—ã€ç»„ä»¶æŒ‰éœ€åŠ è½½ å°†æ¥éœ€è¦çš„èµ„æºæŠ½ç©ºå…ˆæ‹¿åˆ° 1.DNS é¢„è§£æ 1&lt;link rel=\"dns-prefetch\" href=\"//jirengu.com\" /&gt; 2.é¢„è¿æ¥ 1&lt;link rel=\"preconnect\" href=\"//jirengu.com\" /&gt; 3.é¢„è·å– 1&lt;link rel=\"prefetch\" href=\"image.png\" /&gt; 4.é¢„æ¸²æŸ“ 1&lt;link rel=\"prerender\" href=\"//xiedaimala.com\" /&gt; ä½“éªŒå¿«æ‰€è°“çš„ä½“éªŒå¿«å°±æ˜¯è®©ç”¨æˆ·è§‰å¾—ç½‘ç«™çš„äº¤äº’æ˜¯â€œæµç•…çš„â€ã€â€œèˆ’é€‚çš„â€ã€‚æ¯”å¦‚ æ»šåŠ¨é¡µé¢ä¸è¦æœ‰è¿Ÿæ»æ„Ÿ å¯¹äºçŸ­æ—¶è¿ç»­å¤§é‡è§¦å‘çš„æ“ä½œè¦åšèŠ‚æµ ä¸€äº›å¸¸è§æ“ä½œä¸è¦æ„Ÿè§‰æ‹–æ³¥å¸¦æ°´ DOM çš„æ“ä½œä¸è¦è¿‡äºé¢‘ç¹ ä¸è¦å‡ºç°å†…å­˜æ³„éœ² ä¼˜åŒ–å¤æ‚è¿ç®— åŠ¨ç”»ä¸è¦å¡é¡¿ å¤šç”¨ CSS åŠ¨ç”»ï¼Œå°‘ç”¨ JS åŠ¨ç”» å¼€å¯ç¡¬ä»¶åŠ é€Ÿ ä¸è¦ç”¨ setTimeout/setInterval å»æ¨¡æ‹ŸåŠ¨ç”» åŠ¨ç”»æˆ–è€…è¿‡æ¸¡çš„æ‰§è¡Œæ—¶é—´ä¸è¦å¤ªä¹… æ€§èƒ½ä¼˜åŒ–çš„å»ºè®®è‡†æƒ³çš„ä¼˜åŒ–ä¸æ˜¯ä¼˜åŒ–ï¼Œæ— æ˜æ˜¾æˆæ•ˆçš„ä¼˜åŒ–ä¸æ˜¯ä¼˜åŒ–ã€‚æµè§ˆå™¨çš„æ€§èƒ½å·²ç»è¶³å¤Ÿå¿«ï¼Œä¸è¦å› ä¸ºâ€œè¿‡æ¸¡ä¼˜åŒ–â€ç‰ºç‰²ä»£ç çš„å¯è¯»æ€§ å…ˆåšç®€å•è§æ•ˆå¿«çš„ä¼˜åŒ–ï¼Œå†åšå¤æ‚è§æ•ˆæ…¢çš„ä¼˜åŒ–ã€‚ä¸€å¼ æœªå‹ç¼©çš„å¤§å›¾ç‰‡å¯èƒ½æŠµæ¶ˆè¾›è¾›è‹¦è‹¦åšçš„å…¨éƒ¨å…¶ä»–æŠ€æœ¯ä¼˜åŒ– åŸæ–‡","tags":[{"name":"Frontend","slug":"Frontend","permalink":"https://blog.v2next.com/tags/Frontend/"},{"name":"Performance","slug":"Performance","permalink":"https://blog.v2next.com/tags/Performance/"}]},{"title":"webpackçš„ä½¿ç”¨","date":"2017-08-10T08:45:34.000Z","path":"2017/08/10/Use-webpack/","text":"è¿™æ˜¯ä¸€ç¯‡å¯¹ webpack çš„ä½¿ç”¨ä»‹ç»ï¼Œé‡Œé¢çš„å†…å®¹å¤šæ˜¯ä¾æ®å®˜ç½‘ä¾‹å­å†™å‡ºçš„ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æŒ‡å‡ºã€‚å‚è€ƒï¼šhttps://segmentfault.com/a/1190000008159877http://webpack.github.io/docs/ åŸæ–‡","tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://blog.v2next.com/tags/Javascript/"},{"name":"webpack","slug":"webpack","permalink":"https://blog.v2next.com/tags/webpack/"},{"name":"Module","slug":"Module","permalink":"https://blog.v2next.com/tags/Module/"}]},{"title":"æ¢ç©¶Babelç”Ÿæ€","date":"2017-08-08T08:40:04.000Z","path":"2017/08/08/Understand-Babel-ecosystem/","text":"æœ¬æ–‡ä» babel çš„åŸºç¡€çŸ¥è¯†ï¼Œä½¿ç”¨æ–¹æ³•ï¼Œå¦‚ä½•é…ç½®ï¼Œè§£æåŸç†å’Œå¦‚ä½•å¼€å‘ babel æ’ä»¶äº”ä¸ªæ–¹é¢è®©ä½ äº†è§£ bablelï¼Œä»¥ä¾¿ç”¨ babel æå‡å¼€å‘æ•ˆç‡ã€‚ä½¿ç”¨æ–¹æ³•å’Œå¦‚ä½•é…ç½®ç« èŠ‚å°†å‘Šè¯‰ä½ åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ babelï¼Œè§£æåŸç†å’Œå¦‚ä½•å¼€å‘ babel æ’ä»¶ç« èŠ‚å¸®åŠ©ä½ å¼€å‘è‡ªå·±çš„ babel æ’ä»¶ã€‚ åŸºæœ¬ä»‹ç»ç›¸ä¿¡ç”¨ es6/7 å†™ä»£ç çš„åŒå­¦å¯¹ babel åº”è¯¥ä¸ä¼šé™Œç”Ÿï¼ŒBabel æ˜¯ç”¨äºç¼–å†™ä¸‹ä¸€ä»£ JavaScript çš„ç¼–è¯‘å™¨ã€‚JavaScript ä½œä¸ºä¸€é—¨è¯­è¨€ï¼Œä¸æ–­å‘å±•æ›´æ–°ï¼Œæ–°çš„ç‰¹æ€§å±‚å‡ºä¸ç©·ï¼Œæƒ³è¦æå‰ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¿…é¡»å€ŸåŠ©åƒ babel è¿™æ ·çš„ç¼–è¯‘å™¨ã€‚ç›®å‰ä¸»æµæµè§ˆå™¨æœ€æ–°ç‰ˆæœ¬éƒ½åŸºæœ¬å®ç°äº†å¯¹ es5/6 è¯­æ³•çš„å®Œå…¨æ”¯æŒï¼Œå…·ä½“è¯·å‚è€ƒå…¼å®¹æ€§è¡¨æ ¼,è§ http://kangax.github.io/compat-table/es6/ å½“ä½ éœ€è¦ä½¿ç”¨ es7+è¯­æ³•ç‰¹æ€§æˆ–è€…å…¼å®¹æ—§ç‰ˆæœ¬æµè§ˆå™¨çš„éœ€æ±‚æ—¶ï¼Œä½ å°±éœ€è¦ä¸€æ¬¾ç¼–è¯‘å™¨æ”¯æŒå°† ES6/7 ç¼–è¯‘æˆæµè§ˆå™¨æ”¯æŒçš„ ES5/ES3 ä»£ç ã€‚Babel æ˜¯ä½¿ç”¨æœ€å¤šçš„ä¸€ä¸ªã€‚é™¤äº†ç¼–è¯‘å™¨ï¼Œbabel è¿˜æ”¯æŒè¯­æ³•æ‰©å±•ï¼ˆå¦‚ react çš„ JSX è¯­æ³•ï¼ŒReact ç°åœ¨å·²ç»ä¾èµ– babel ç¼–è¯‘å®ƒçš„ JSX è¯­æ³•ä¸”å¼ƒç”¨äº†å®ƒåŸæœ‰çš„è‡ªå®šä¹‰å·¥å…·ï¼‰å’Œé™æ€è¯­æ³•åˆ†æï¼ˆè¯­æ³•æ£€æŸ¥ï¼Œä»£ç é«˜äº®ï¼Œå‹ç¼©ï¼Œç»Ÿä¸€ä»£ç é£æ ¼ç­‰ï¼‰ã€‚ ä½¿ç”¨æ–¹æ³•æœ¬æ–‡æåˆ°çš„æ‰€æœ‰é…ç½®çš„éƒ½æ˜¯ babel6ï¼Œbabel6 åºŸå¼ƒäº† babel åŒ…ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å„ç§æ¨¡å—åŒ…ï¼Œbabel6 æŠŠæ‰€æœ‰è½¬æ¢å™¨éƒ½åˆ†ç¦»å‡ºå»ä»¥æ’ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œéœ€è¦å•ç‹¬å®‰è£…æ’ä»¶åŒ…ã€‚æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹ babel ä¸ä¼šå¯¹æºç åšä»»ä½•è½¬æ¢ï¼Œéœ€è¦è‡ªå·±é…ç½® é›†æˆåˆ°å·¥å…·ä¸­Webpack å®‰è£…ï¼š npm install â€“save-dev babel-loader babel-core 1.webpacké…ç½®ï¼š module: { rules: [ { test: /\\.js$/, exclude: /node_modules/, loader: \"babel-loader\" } ] } 2.é…ç½®.babelrcæ–‡ä»¶ å®‰è£…æ’ä»¶ï¼š npm install babel-preset-es2015 babel-plugin-transform-runtime .babelrc { \"presets\": [â€œes2015â€], \"plugins\": [â€œtransform-runtimeâ€] } fis3: â‘  å®‰è£…ï¼š npm install â€“save-dev babel-core fis-parser-babel-6.x â‘¡ é…ç½®fis-confæ–‡ä»¶ï¼š fis.match('src/**.js', { isMod: true, preprocessor: fis.plugin('js-require-css'), parser: fis.plugin('babel-6.x', { sourceMaps: true, }), rExt: '.js' }); â‘¢ åˆ›å»º.babelrcæ–‡ä»¶åŒä¸Š å…¶ä»–å·¥å…·è¯·å‚è§å®‰è£…ç»„åˆæ–¹å¼ã€‚http://babeljs.io/docs/setup/#installation å‘½ä»¤è¡Œä¸‹ä½¿ç”¨ babel å‘½ä»¤ç¼–è¯‘babel-registerï¼Œbabel-nodeåŸæ–‡","tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://blog.v2next.com/tags/Javascript/"},{"name":"Babel","slug":"Babel","permalink":"https://blog.v2next.com/tags/Babel/"}]},{"title":"How to handle conflicts with git","date":"2017-07-25T08:25:46.000Z","path":"2017/07/25/How-to-handle-conflicts-with-git/","text":"Forked from https://github.com/Kunena/Kunena-Forum/wiki/How-to-handle-conflicts-with-git How to handle conflicts when merging something with git : When you have a fork and you want update it because you have conflicts, itâ€™s good to know how to do it. Donâ€™t forget to add the remote upstream before doing the following steps. You have done a : $ git fetch upstream and then a : $ git merge upstream/master But it has failed : error: Your local changes to the following files would be overwritten by merge: build/build.number Please, commit your changes or stash them before you can merge. Aborting You have changed something in the file build/build.number, so you have two choices revert you change or if you want lose your change stash it. In my case i do a simple revert : $ git reset --hard HEAD Now itâ€™s good : HEAD is now at 030223c # [#21] Little issue with parent on agora category import You can do the merge : $ git merge upstream/master But now you have a conflict : Auto-merging administrator/components/com_kunenaimporter/CHANGELOG.php CONFLICT (content): Merge conflict in administrator/components/com_kunenaimporte r/CHANGELOG.php Automatic merge failed; fix conflicts and then commit the result. Check the differences : $ git diff diff --cc administrator/components/com_kunenaimporter/CHANGELOG.php index e98aba5,9d74f73..0000000 --- a/administrator/components/com_kunenaimporter/CHANGELOG.php +++ b/administrator/components/com_kunenaimporter/CHANGELOG.php @@@ -31,18 -31,34 +31,49 @@@ Legend KunenaImporter 1.6.5-DEV ++< HEAD +19-July-2011 Xillibit +# [#21] Little issue with parent on agora category import + +18-July-2011 Xillibit +# [#21] Improve ccboard and agora support (improve cat","tags":[{"name":"git","slug":"git","permalink":"https://blog.v2next.com/tags/git/"}]},{"title":"Create a new branch with git and manage branches","date":"2017-07-25T08:25:46.000Z","path":"2017/07/25/Create-a-new-branch-with-git-and-manage-branches/","text":"Forked from https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches In your github fork, you need to keep your master branch clean, by clean I mean without any changes, like that you can create at any time a branch from your master. Each time that you want to commit a bug or a feature, you need to create a branch for it, which will be a copy of your master branch. When you do a pull request on a branch, you can continue to work on another branch and make another pull request on this other branch. Before creating a new branch, pull the changes from upstream. Your master needs to be up to date. Create the branch on your local machine and switch in this branch : $ git checkout -b [name_of_your_new_branch] Change working branch : $ git checkout [name_of_your_new_branch] Push the branch on github : $ git push origin [name_of_your_new_branch] When you want to commit something in your branch, be sure to be in your branch. You can see all branches created by using : $ git branch Which will show : * approval_messages master master_clean Add a new remote for your branch : $ git remote add [name_of_your_remote] Push changes from your commit into your branch : $ git push [name_of_your_new_remote] [name_of_your_branch] Update your branch when the original branch from official repository has been updated : 1$ git fetch [name_of_your_remote] Then you need to apply to merge changes, if your branch is derivated from develop you need to do : $ git merge [name_of_your_remote]/develop Delete a branch on your local filesystem : $ git branch -d [name_of_your_new_branch] To force the deletion of local branch on your filesystem : $ git branch -D [name_of_your_new_branch] Delete the branch on github : $ git push origin :[name_of_your_new_branch] The only difference is the : to say delete, you can do it too by using github interface to remove branch : https://help.github.com/articles/deleting-unused-branches. If you want to change default branch, itâ€™s so easy with github, in your fork go into Admin and in the drop-down list default branch choose what you want. This will push all your branches to the remote, and â€“set-upstream tracking correctly for you: 1git push --all -u (Not exactly what the OP was asking for, but this one-liner is pretty popular)","tags":[{"name":"git","slug":"git","permalink":"https://blog.v2next.com/tags/git/"}]}]